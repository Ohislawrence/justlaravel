import{x as E,i as y,f as R,c as a,o as r,w as N,a as s,b as d,g as G,h as i,e as p,j as o,d as c,F as O,l as H,t as f,z as J,A as w,Q as W,a0 as g,k as Y}from"./app-DK7Qb6e3.js";import{A as K}from"./AppLayout-SHzQRZzg.js";import{_ as X,a as Z,b as ee,c as te,d as se,e as oe,f as le}from"./OrderingEditor-BM837OwO.js";import{_ as u}from"./InputError-D4mNXB1g.js";import{F as re}from"./FeatureLimitModal-D8njRvA4.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const ie={class:"font-semibold text-xl text-gray-800 leading-tight"},ae={class:"py-6"},ue={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},me={class:"p-6 bg-white border-b border-gray-200"},ge={class:"grid grid-cols-1 gap-6"},pe=["value"],ce={class:"mt-1"},fe={key:0,class:"mb-4"},be={class:"relative inline-block"},ye=["src"],xe={class:"text-sm text-gray-500 mt-2"},ve={class:"inline-flex items-center"},we={class:"flex justify-end pt-4"},ke=["disabled"],qe={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ve={key:1,class:"flex items-center"},_e={key:2},he={__name:"Create",props:{quiz:Object,questionTypes:Object,question:Object,currentQuestions:{type:Number,default:10},questionLimit:{type:Number,default:10}},setup(k){var z,C,U,Q,M,A,B,F,I;const n=k,e=E({type:((z=n.question)==null?void 0:z.type)||"multiple_choice",question:((C=n.question)==null?void 0:C.question)||"",description:((U=n.question)==null?void 0:U.description)||"",image:null,points:((Q=n.question)==null?void 0:Q.points)||1,time_limit:((M=n.question)==null?void 0:M.time_limit)||null,is_required:((A=n.question)==null?void 0:A.is_required)||!1,options:((B=n.question)==null?void 0:B.options)||null,correct_answers:((F=n.question)==null?void 0:F.correct_answers)||[],settings:{rubric:[],distractors:[]}}),q=y(!1),_=y(""),h=y("");function T(b,t){_.value=b,h.value=t,q.value=!0}const x=y(((I=n.question)==null?void 0:I.image)||null),V=y(!1),m=R(()=>!!n.question);function j(b){const t=b.target.files[0];if(!t)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)){alert("Invalid image type.");return}const v=5*1024*1024;if(t.size>v){alert("Image size must be less than 5MB");return}e.image=t;const L=new FileReader;L.onload=D=>{x.value=D.target.result},L.readAsDataURL(t),V.value=!1}function $(){e.image=null,x.value=null,V.value=!0}function P(){if(!(n.currentQuestions<n.questionLimit)){T("Add Question","You have reached the question limit. Upgrade your plan to add more questions.");return}V.value&&m.value&&(e.remove_image=!0),m.value?e.put(route("examiner.quizzes.questions.update",{quiz:n.quiz.id,question:n.question.id})):e.post(route("examiner.quizzes.questions.store",n.quiz.id))}function S(){router.visit(route("examiner.quizzes.questions.index",n.quiz.id))}return(b,t)=>(r(),a(K,{title:m.value?"Edit Question":"Add Question"},{header:N(()=>[s("h2",ie,f(m.value?"Edit":"Create")+" Question for "+f(k.quiz.title)+" Quiz ",1)]),default:N(()=>[s("div",ae,[s("div",ue,[s("div",de,[s("div",me,[s("form",{onSubmit:G(P,["prevent"])},[s("div",ge,[s("div",null,[t[14]||(t[14]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),p(s("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).type=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},[(r(!0),c(O,null,H(k.questionTypes,(l,v)=>(r(),c("option",{key:v,value:v},f(l),9,pe))),128))],512),[[J,o(e).type]]),d(u,{message:o(e).errors.type,class:"mt-2"},null,8,["message"])]),s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),p(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).question=l),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[w,o(e).question]]),d(u,{message:o(e).errors.question,class:"mt-2"},null,8,["message"])]),s("div",null,[t[16]||(t[16]=s("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),p(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).description=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[w,o(e).description]]),d(u,{message:o(e).errors.description,class:"mt-2"},null,8,["message"])]),s("div",null,[t[19]||(t[19]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),s("div",ce,[x.value?(r(),c("div",fe,[s("div",be,[s("img",{src:x.value,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300 shadow-sm"},null,8,ye),s("button",{type:"button",onClick:$,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200"},t[17]||(t[17]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),s("p",xe,f(m.value&&!o(e).image?"Current image":"Preview"),1)])):i("",!0),s("input",{ref:"imageInput",type:"file",accept:"image/*",onChange:j,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition-colors duration-200"},null,544),t[18]||(t[18]=s("p",{class:"text-xs text-gray-500 mt-1"}," Supported formats: JPEG, PNG, GIF, WebP. Max size: 5MB. ",-1))]),d(u,{message:o(e).errors.image,class:"mt-2"},null,8,["message"])]),s("div",null,[t[20]||(t[20]=s("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),p(s("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).points=l),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[w,o(e).points]]),d(u,{message:o(e).errors.points,class:"mt-2"},null,8,["message"])]),s("div",null,[t[21]||(t[21]=s("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),p(s("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).time_limit=l),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[w,o(e).time_limit]]),d(u,{message:o(e).errors.time_limit,class:"mt-2"},null,8,["message"])]),s("div",null,[s("label",ve,[p(s("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o(e).is_required=l),type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[W,o(e).is_required]]),t[22]||(t[22]=s("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),d(u,{message:o(e).errors.is_required,class:"mt-2"},null,8,["message"])]),o(e).type==="multiple_choice"?(r(),a(X,{key:0,modelValue:o(e),"onUpdate:modelValue":t[6]||(t[6]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).type==="true_false"?(r(),a(Z,{key:1,modelValue:o(e),"onUpdate:modelValue":t[7]||(t[7]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).type==="short_answer"?(r(),a(ee,{key:2,modelValue:o(e),"onUpdate:modelValue":t[8]||(t[8]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).type==="essay"?(r(),a(te,{key:3,modelValue:o(e),"onUpdate:modelValue":t[9]||(t[9]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).type==="fill_in_the_blank"?(r(),a(se,{key:4,modelValue:o(e),"onUpdate:modelValue":t[10]||(t[10]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).type==="matching"?(r(),a(oe,{key:5,modelValue:o(e),"onUpdate:modelValue":t[11]||(t[11]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).type==="ordering"?(r(),a(le,{key:6,modelValue:o(e),"onUpdate:modelValue":t[12]||(t[12]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])):i("",!0),o(e).errors.options?(r(),a(u,{key:7,message:o(e).errors.options,class:"mt-2"},null,8,["message"])):i("",!0),o(e).errors.correct_answers?(r(),a(u,{key:8,message:o(e).errors.correct_answers,class:"mt-2"},null,8,["message"])):i("",!0),o(e).errors.settings?(r(),a(u,{key:9,message:o(e).errors.settings,class:"mt-2"},null,8,["message"])):i("",!0),s("div",we,[s("button",{type:"button",onClick:S,class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),s("button",{type:"submit",disabled:o(e).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 disabled:opacity-25 transition-colors duration-200 flex items-center"},[o(e).processing?i("",!0):(r(),c("svg",qe,t[23]||(t[23]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),o(e).processing?(r(),c("span",Ve,[t[24]||(t[24]=s("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Y(" "+f(m.value?"Updating...":"Creating..."),1)])):(r(),c("span",_e,f(m.value?"Update":"Create")+" Question",1))],8,ke)])])],32)])])])]),d(re,{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=l=>q.value=l),featureName:_.value,message:h.value},null,8,["modelValue","featureName","message"])]),_:1},8,["title"]))}},Fe=ne(he,[["__scopeId","data-v-d5550b3e"]]);export{Fe as default};
