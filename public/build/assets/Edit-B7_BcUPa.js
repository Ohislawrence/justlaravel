import{A as z}from"./AppLayout-DUw_ZWTf.js";import{S as T,L as a,c as U,o as l,w as b,a as t,b as i,k as y,g as M,d as n,h as u,e as g,F,l as P,t as p,s as B,A as c,V as L,x as S}from"./app-Do1sSIaC.js";import{_ as A,a as O,b as Q,c as j,d as N,e as G,f as D}from"./OrderingEditor-Ym64U-gU.js";import{_ as R}from"./InputError-BalbFUZ-.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const W={components:{AppLayout:z,Link:T,MultipleChoiceEditor:D,TrueFalseEditor:G,ShortAnswerEditor:N,EssayEditor:j,FillInTheBlankEditor:Q,MatchingEditor:O,OrderingEditor:A,InputError:R},props:{quiz:Object,questionTypes:Object,question:{type:Object,required:!0}},data(){var r,e;return{form:S({type:this.question.type||"multiple_choice",question:this.question.question||"",description:this.question.description||"",image:null,points:this.question.points||1,time_limit:this.question.time_limit||null,is_required:this.question.is_required||!1,options:this.question.options||null,correct_answers:this.question.correct_answers||[],settings:{rubric:((r=this.question.settings)==null?void 0:r.rubric)||[],distractors:((e=this.question.settings)==null?void 0:e.distractors)||[],...this.question.settings}}),imagePreview:this.question.image||null,removeImage:!1,originalImageUrl:this.question.image||null}},computed:{editing(){return!0},hasExistingImage(){return!!this.originalImageUrl}},methods:{handleImageChange(r){const e=r.target.files[0];if(e){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)"),r.target.value="";return}const x=5*1024*1024;if(e.size>x){alert("Image size must be less than 5MB"),r.target.value="";return}this.form.image=e;const s=new FileReader;s.onload=m=>{this.imagePreview=m.target.result},s.readAsDataURL(e),this.removeImage=!1}},removeCurrentImage(){this.form.image=null,this.imagePreview=null,this.removeImage=!0;const r=this.$refs.imageInput;r&&(r.value="")},resetToOriginalImage(){this.form.image=null,this.imagePreview=this.originalImageUrl,this.removeImage=!1;const r=this.$refs.imageInput;r&&(r.value="")},submitForm(){this.removeImage&&(this.form.remove_image=!0),this.form.put(route("examiner.quizzes.questions.update",{quiz:this.quiz.id,question:this.question.id}),{preserveScroll:!0,onSuccess:()=>{this.$inertia.visit(route("examiner.quizzes.questions.index",this.quiz.id))},onError:r=>{console.log("Validation errors:",r)}})},cancel(){this.$inertia.visit(route("examiner.quizzes.questions.index",this.quiz.id))}},mounted(){this.question.settings&&(this.form.settings={rubric:this.question.settings.rubric||[],distractors:this.question.settings.distractors||[],...this.question.settings})}},H={class:"font-semibold text-xl text-gray-800 leading-tight"},K={class:"py-6"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Z={class:"p-6 bg-white border-b border-gray-200"},$={class:"mb-6"},ee={class:"grid grid-cols-1 gap-6"},se=["value"],te={class:"mt-1"},oe={key:0,class:"mb-4"},ie={class:"relative inline-block"},re=["src"],le={class:"text-sm text-gray-500 mt-2"},ne={class:"text-xs text-gray-500 mt-1"},me={class:"inline-flex items-center"},ue={key:0},de={key:1},ae={key:2},ge={key:3},fe={key:4},pe={key:5},ce={key:6},be={key:7},xe={key:8},he={key:9},ye={class:"flex justify-end"},ve=["disabled"],_e={key:0,class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"};function we(r,e,f,x,s,m){const v=a("Link"),d=a("InputError"),_=a("MultipleChoiceEditor"),w=a("TrueFalseEditor"),k=a("ShortAnswerEditor"),q=a("EssayEditor"),E=a("FillInTheBlankEditor"),I=a("MatchingEditor"),V=a("OrderingEditor"),C=a("AppLayout");return l(),U(C,{title:"Edit Question"},{header:b(()=>[t("h2",H," Edit Question for "+p(f.quiz.title),1)]),default:b(()=>[t("div",K,[t("div",X,[t("div",Y,[t("div",Z,[t("div",$,[i(v,{href:r.route("examiner.quizzes.questions.index",f.quiz.id),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"},{default:b(()=>e[18]||(e[18]=[y(" ← Back to Questions ")])),_:1,__:[18]},8,["href"])]),t("form",{onSubmit:e[17]||(e[17]=M((...o)=>m.submitForm&&m.submitForm(...o),["prevent"]))},[t("div",ee,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),g(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.form.type=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[(l(!0),n(F,null,P(f.questionTypes,(o,h)=>(l(),n("option",{key:h,value:h},p(o),9,se))),128))],512),[[B,s.form.type]]),i(d,{message:s.form.errors.type,class:"mt-2"},null,8,["message"])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),g(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.form.question=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,s.form.question]]),i(d,{message:s.form.errors.question,class:"mt-2"},null,8,["message"])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),g(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.form.description=o),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,s.form.description]]),i(d,{message:s.form.errors.description,class:"mt-2"},null,8,["message"])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),t("div",te,[s.imagePreview?(l(),n("div",oe,[t("div",ie,[t("img",{src:s.imagePreview,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300"},null,8,re),t("button",{type:"button",onClick:e[3]||(e[3]=(...o)=>m.removeCurrentImage&&m.removeCurrentImage(...o)),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500"},e[22]||(e[22]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("p",le,p(s.form.image?"New image preview":"Current image"),1),m.hasExistingImage&&s.form.image?(l(),n("button",{key:0,type:"button",onClick:e[4]||(e[4]=(...o)=>m.resetToOriginalImage&&m.resetToOriginalImage(...o)),class:"mt-2 text-xs text-blue-600 hover:text-blue-800"}," Reset to original image ")):u("",!0)])):u("",!0),t("input",{ref:"imageInput",type:"file",accept:"image/*",onChange:e[5]||(e[5]=(...o)=>m.handleImageChange&&m.handleImageChange(...o)),class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,544),t("p",ne," Supported formats: JPEG, PNG, GIF, WebP. Maximum size: 5MB. "+p(m.hasExistingImage?"Leave empty to keep current image.":""),1)]),i(d,{message:s.form.errors.image,class:"mt-2"},null,8,["message"])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.form.points=o),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,s.form.points]]),i(d,{message:s.form.errors.points,class:"mt-2"},null,8,["message"])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.form.time_limit=o),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[c,s.form.time_limit]]),i(d,{message:s.form.errors.time_limit,class:"mt-2"},null,8,["message"])]),t("div",null,[t("label",me,[g(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.form.is_required=o),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[L,s.form.is_required]]),e[26]||(e[26]=t("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),i(d,{message:s.form.errors.is_required,class:"mt-2"},null,8,["message"])]),s.form.type==="multiple_choice"?(l(),n("div",ue,[i(_,{modelValue:s.form,"onUpdate:modelValue":e[9]||(e[9]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.type==="true_false"?(l(),n("div",de,[i(w,{modelValue:s.form,"onUpdate:modelValue":e[10]||(e[10]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.type==="short_answer"?(l(),n("div",ae,[i(k,{modelValue:s.form,"onUpdate:modelValue":e[11]||(e[11]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.type==="essay"?(l(),n("div",ge,[i(q,{modelValue:s.form,"onUpdate:modelValue":e[12]||(e[12]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.type==="fill_in_blank"?(l(),n("div",fe,[i(E,{modelValue:s.form,"onUpdate:modelValue":e[13]||(e[13]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.type==="matching"?(l(),n("div",pe,[i(I,{modelValue:s.form,"onUpdate:modelValue":e[14]||(e[14]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.type==="ordering"?(l(),n("div",ce,[i(V,{modelValue:s.form,"onUpdate:modelValue":e[15]||(e[15]=o=>s.form=o)},null,8,["modelValue"])])):u("",!0),s.form.errors.options?(l(),n("div",be,[i(d,{message:s.form.errors.options,class:"mt-2"},null,8,["message"])])):u("",!0),s.form.errors.correct_answers?(l(),n("div",xe,[i(d,{message:s.form.errors.correct_answers,class:"mt-2"},null,8,["message"])])):u("",!0),s.form.errors.settings?(l(),n("div",he,[i(d,{message:s.form.errors.settings,class:"mt-2"},null,8,["message"])])):u("",!0),t("div",ye,[t("button",{type:"button",onClick:e[16]||(e[16]=(...o)=>m.cancel&&m.cancel(...o)),class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),t("button",{type:"submit",disabled:s.form.processing,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring focus:ring-blue-300 disabled:opacity-25 transition"},[s.form.processing?(l(),n("svg",_e,e[27]||(e[27]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),e[28]||(e[28]=y(" Update Question "))],8,ve)])])],32)])])])])]),_:1})}const ze=J(W,[["render",we]]);export{ze as default};
