import{i as z,O as I,x as M,f as U,c as C,o,w as v,d as n,h as p,a as l,j as s,t as m,g as A,b as i,F as b,l as x,k as P,n as E}from"./app-CFKp1s14.js";import{A as Q}from"./AppLayout-1-5X1ZUR.js";import{_ as d}from"./InputError-KZVYGvL8.js";import{_ as r}from"./InputLabel-BEcUIb7L.js";import{_ as f}from"./TextInput-DIRysnqB.js";import{_ as j}from"./Textarea-ytAfNIBg.js";import{_ as u}from"./Checkbox-BGfy85le.js";import{_ as w}from"./SelectInput-Bu15NULp.js";import{_ as q}from"./DateTimePicker-B4mMvSbH.js";import{R as S}from"./RichtextEditorNormal-Bd8R9U3D.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./format-3b8xIHeq.js";const $={class:"font-semibold text-xl text-gray-800 leading-tight"},O={key:0,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},R={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},B={key:1,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},G={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},L={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white shadow-sm sm:rounded-lg"},H={class:"p-6 bg-white border-b border-gray-200"},J={class:"grid grid-cols-1 gap-6"},K={class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X=["value"],Z=["value"],ee={key:0},se={class:"space-y-6"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ae={class:"flex items-center"},ie={class:"flex items-center"},le={class:"flex items-center"},re={class:"flex items-center"},oe={class:"flex items-center"},ne={class:"flex items-center"},de={class:"flex items-center"},me={class:"space-y-6"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"space-y-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"relative"},fe={class:"relative"},ge={class:"space-y-6"},ye=["value"],ve={key:0,class:"mt-3 p-3 bg-green-50 rounded"},be={class:"font-medium"},xe={class:"mt-2"},ke={key:0},we={key:1},he={class:"space-y-6"},Ve={class:"card mt-4"},ze={class:"card-body"},Ue={class:"form-check form-switch mb-3"},qe={key:0,class:"mt-3"},Se={class:"mb-3"},De=["value"],Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie={class:"flex items-center justify-end"},Me=["disabled"],Ce={__name:"Create",props:{organization:Object,availablePools:Array,gradingSystems:Array,quizTypes:Object,industries:Object,availableQuestions:Array,quiz:{type:Object,default:()=>({pools:[]})},certificateTemplates:{type:Array,required:!0},initialData:{type:Object,default:()=>({enable_certificates:!1,certificate_template_id:null,certificate_pass_percentage:70,certificate_expiry_days:null})}},setup(g){const c=g,V=z(null),{flash:k}=I().props,e=M({title:"",description:"",instructions:"",quiz_type:"test",grading_system_id:null,industry:null,is_published:!1,is_public:!1,randomize_questions:!1,randomize_answers:!1,show_correct_answers:!1,show_leaderboard:!1,enable_discussions:!1,max_attempts:null,max_participants:"",time_limit:"",passing_score:"",starts_at:"",ends_at:"",settings:{},pools:c.quiz.pools||[],survey_thank_you_message:"",enable_certificates:c.initialData.enable_certificates,certificate_template_id:c.initialData.certificate_template_id,certificate_pass_percentage:c.initialData.certificate_pass_percentage,certificate_expiry_days:c.initialData.certificate_expiry_days}),h=U(()=>e.grading_system_id?c.gradingSystems.find(y=>y.id==e.grading_system_id):null),D=U(()=>e.title&&(!V.value||V.value.getPoolData().every(y=>y.questions.length>0))),T=()=>{const y={...e.data(),max_attempts:e.max_attempts!==null?parseInt(e.max_attempts):null,max_participants:e.max_participants!==null?parseInt(e.max_participants):null,time_limit:e.time_limit!==null?parseInt(e.time_limit):null,passing_score:e.passing_score!==null?parseInt(e.passing_score):null,starts_at:e.starts_at?e.starts_at:null,ends_at:e.ends_at?e.ends_at:null,enable_certificates:e.enable_certificates,certificate_template_id:e.certificate_template_id,certificate_pass_percentage:e.certificate_pass_percentage!==null?parseInt(e.certificate_pass_percentage):70,certificate_expiry_days:e.certificate_expiry_days!==null?parseInt(e.certificate_expiry_days):null,grading_system_id:e.grading_system_id};e.transform(()=>y).post(route("examiner.quizzes.store",c.organization.id),{onSuccess:()=>{e.reset()},onError:a=>{console.error("Validation errors:",a)}})};return z([]),(y,a)=>(o(),C(Q,{title:"Create New Quiz"},{header:v(()=>[l("h2",$," Create New Quiz for "+m(g.organization.name),1)]),default:v(()=>[s(k).success?(o(),n("div",O,[l("div",R,m(s(k).success),1)])):p("",!0),s(k).error?(o(),n("div",B,[l("div",G,m(s(k).error),1)])):p("",!0),l("div",L,[l("div",F,[l("div",Y,[l("div",H,[l("form",{onSubmit:A(T,["prevent"])},[l("div",J,[l("div",K,[a[28]||(a[28]=l("h3",{class:"text-lg font-medium"},"Basic Information",-1)),l("div",null,[i(r,{for:"title",value:"Quiz Title *"}),i(f,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":a[0]||(a[0]=t=>s(e).title=t),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),l("div",null,[i(r,{for:"description",value:"Description"}),i(S,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":a[1]||(a[1]=t=>s(e).description=t),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.description},null,8,["message"])]),l("div",null,[i(r,{for:"instructions",value:"Instructions"}),i(S,{id:"instructions",modelValue:s(e).instructions,"onUpdate:modelValue":a[2]||(a[2]=t=>s(e).instructions=t),label:"Instructions",error:s(e).errors.instructions},null,8,["modelValue","error"])]),l("div",W,[l("div",null,[i(r,{for:"quiz_type",value:"Quiz Type *"}),i(w,{id:"quiz_type",modelValue:s(e).quiz_type,"onUpdate:modelValue":a[3]||(a[3]=t=>s(e).quiz_type=t),class:"mt-1 block w-full",required:""},{default:v(()=>[(o(!0),n(b,null,x(g.quizTypes,(t,_)=>(o(),n("option",{key:_,value:_},m(t),9,X))),128))]),_:1},8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.quiz_type},null,8,["message"])]),l("div",null,[i(r,{for:"industry",value:"Industry"}),i(w,{id:"industry",modelValue:s(e).industry,"onUpdate:modelValue":a[4]||(a[4]=t=>s(e).industry=t),class:"mt-1 block w-full"},{default:v(()=>[a[27]||(a[27]=l("option",{value:null},"Select Industry",-1)),(o(!0),n(b,null,x(g.industries,(t,_)=>(o(),n("option",{key:_,value:_},m(t),9,Z))),128))]),_:1,__:[27]},8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.industry},null,8,["message"])]),s(e).quiz_type==="survey"?(o(),n("div",ee,[i(r,{for:"survey_thank_you_message",value:"Survey Thank You Message"}),i(j,{id:"survey_thank_you_message",modelValue:s(e).survey_thank_you_message,"onUpdate:modelValue":a[5]||(a[5]=t=>s(e).survey_thank_you_message=t),class:"mt-1 block w-full",rows:"3",placeholder:"Thank you for completing our survey!"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.survey_thank_you_message},null,8,["message"])])):p("",!0)])]),l("div",se,[a[29]||(a[29]=l("h3",{class:"text-lg font-medium"},"Quiz Settings",-1)),l("div",te,[l("div",ae,[i(u,{id:"is_published",checked:s(e).is_published,"onUpdate:checked":a[6]||(a[6]=t=>s(e).is_published=t)},null,8,["checked"]),i(r,{for:"is_published",value:"Publish Immediately",class:"ml-2"})]),l("div",ie,[i(u,{id:"is_public",checked:s(e).is_public,"onUpdate:checked":a[7]||(a[7]=t=>s(e).is_public=t)},null,8,["checked"]),i(r,{for:"is_public",value:"Make Public",class:"ml-2"})]),l("div",le,[i(u,{id:"randomize_questions",checked:s(e).randomize_questions,"onUpdate:checked":a[8]||(a[8]=t=>s(e).randomize_questions=t)},null,8,["checked"]),i(r,{for:"randomize_questions",value:"Randomize Questions",class:"ml-2"})]),l("div",re,[i(u,{id:"randomize_answers",checked:s(e).randomize_answers,"onUpdate:checked":a[9]||(a[9]=t=>s(e).randomize_answers=t)},null,8,["checked"]),i(r,{for:"randomize_answers",value:"Randomize Answers",class:"ml-2"})]),l("div",oe,[i(u,{id:"show_correct_answers",checked:s(e).show_correct_answers,"onUpdate:checked":a[10]||(a[10]=t=>s(e).show_correct_answers=t)},null,8,["checked"]),i(r,{for:"show_correct_answers",value:"Show Correct Answers",class:"ml-2"})]),l("div",ne,[i(u,{id:"show_leaderboard",checked:s(e).show_leaderboard,"onUpdate:checked":a[11]||(a[11]=t=>s(e).show_leaderboard=t)},null,8,["checked"]),i(r,{for:"show_leaderboard",value:"Show Leaderboard",class:"ml-2"})]),l("div",de,[i(u,{id:"enable_discussions",checked:s(e).enable_discussions,"onUpdate:checked":a[12]||(a[12]=t=>s(e).enable_discussions=t)},null,8,["checked"]),i(r,{for:"enable_discussions",value:"Enable Discussions",class:"ml-2"})])])]),l("div",me,[a[30]||(a[30]=l("h3",{class:"text-lg font-medium"},"Access Restrictions",-1)),l("div",ue,[l("div",null,[i(r,{for:"max_attempts",value:"Max Attempts (0 for unlimited)"}),i(f,{id:"max_attempts",modelValue:s(e).max_attempts,"onUpdate:modelValue":a[13]||(a[13]=t=>s(e).max_attempts=t),type:"number",min:"0",class:"mt-1 block w-full",onInput:a[14]||(a[14]=t=>s(e).max_attempts=t.target.value===""?null:parseInt(t.target.value))},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.max_attempts},null,8,["message"])]),l("div",null,[i(r,{for:"max_participants",value:"Max Participants (0 for unlimited)"}),i(f,{id:"max_participants",modelValue:s(e).max_participants,"onUpdate:modelValue":a[15]||(a[15]=t=>s(e).max_participants=t),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.max_participants},null,8,["message"])]),l("div",null,[i(r,{for:"time_limit",value:"Time Limit (minutes)"}),i(f,{id:"time_limit",modelValue:s(e).time_limit,"onUpdate:modelValue":a[16]||(a[16]=t=>s(e).time_limit=t),type:"number",min:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.time_limit},null,8,["message"])]),l("div",null,[i(r,{for:"passing_score",value:"Passing Score (%)"}),i(f,{id:"passing_score",modelValue:s(e).passing_score,"onUpdate:modelValue":a[17]||(a[17]=t=>s(e).passing_score=t),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.passing_score},null,8,["message"])])])]),l("div",ce,[a[31]||(a[31]=l("h3",{class:"text-lg font-medium"},"Schedule",-1)),l("div",_e,[l("div",pe,[i(r,{for:"starts_at",value:"Start Date & Time"}),i(q,{id:"starts_at",modelValue:s(e).starts_at,"onUpdate:modelValue":[a[18]||(a[18]=t=>s(e).starts_at=t),a[19]||(a[19]=t=>s(e).starts_at=t)],class:"mt-1 block w-full","display-format":"MMM d, yyyy h:mm a","model-value":s(e).starts_at,label:"Start Date & Time"},null,8,["modelValue","model-value"]),i(d,{class:"mt-2",message:s(e).errors.starts_at},null,8,["message"])]),l("div",fe,[i(r,{for:"ends_at",value:"End Date & Time"}),i(q,{id:"ends_at",modelValue:s(e).ends_at,"onUpdate:modelValue":[a[20]||(a[20]=t=>s(e).ends_at=t),a[21]||(a[21]=t=>s(e).ends_at=t)],class:"mt-1 block w-full","display-format":"MMM d, yyyy h:mm a","model-value":s(e).ends_at,label:"End Date & Time"},null,8,["modelValue","model-value"]),i(d,{class:"mt-2",message:s(e).errors.ends_at},null,8,["message"])])])]),l("div",ge,[a[33]||(a[33]=l("h3",{class:"text-lg font-medium"},"Grading System",-1)),l("div",null,[i(r,{for:"grading_system_id",value:"Select Grading System"}),i(w,{id:"grading_system_id",modelValue:s(e).grading_system_id,"onUpdate:modelValue":a[22]||(a[22]=t=>s(e).grading_system_id=t),class:"mt-1 block w-full"},{default:v(()=>[a[32]||(a[32]=l("option",{value:null},"Default (Pass/Fail)",-1)),(o(!0),n(b,null,x(g.gradingSystems,t=>(o(),n("option",{key:t.id,value:t.id},m(t.name)+" ("+m(t.type)+") ",9,ye))),128))]),_:1,__:[32]},8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.grading_system_id},null,8,["message"]),h.value?(o(),n("div",ve,[l("h4",be,m(h.value.name)+" Grade Ranges:",1),l("div",xe,[(o(!0),n(b,null,x(h.value.grade_ranges,(t,_)=>(o(),n("div",{key:_,class:"text-sm"},[P(m(t.min)+"% - "+m(t.max)+"%: "+m(t.grade)+" ",1),t.points?(o(),n("span",ke,"("+m(t.points)+" points)",1)):p("",!0),t.interpretation?(o(),n("span",we,"- "+m(t.interpretation),1)):p("",!0)]))),128))])])):p("",!0)])]),l("div",he,[a[35]||(a[35]=l("h3",{class:"text-lg font-medium"},"Certificate Settings",-1)),l("div",Ve,[l("div",ze,[l("div",Ue,[i(u,{id:"enable_certificates",checked:s(e).enable_certificates,"onUpdate:checked":a[23]||(a[23]=t=>s(e).enable_certificates=t)},null,8,["checked"]),i(r,{for:"enable_certificates",value:"Enable certificates for this quiz",class:"ml-2"}),i(d,{class:"mt-2",message:s(e).errors.enable_certificates},null,8,["message"])]),s(e).enable_certificates?(o(),n("div",qe,[l("div",Se,[i(r,{for:"certificate_template_id",value:"Certificate Template"}),i(w,{id:"certificate_template_id",modelValue:s(e).certificate_template_id,"onUpdate:modelValue":a[24]||(a[24]=t=>s(e).certificate_template_id=t),class:"mt-1 block w-full"},{default:v(()=>[a[34]||(a[34]=l("option",{value:null},"Use Default Template",-1)),(o(!0),n(b,null,x(g.certificateTemplates,t=>(o(),n("option",{key:t.id,value:t.id},m(t.name),9,De))),128))]),_:1,__:[34]},8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.certificate_template_id},null,8,["message"])]),l("div",Te,[l("div",null,[i(r,{for:"certificate_pass_percentage",value:"Passing Percentage"}),i(f,{id:"certificate_pass_percentage",modelValue:s(e).certificate_pass_percentage,"onUpdate:modelValue":a[25]||(a[25]=t=>s(e).certificate_pass_percentage=t),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.certificate_pass_percentage},null,8,["message"])]),l("div",null,[i(r,{for:"certificate_expiry_days",value:"Expiry Days (leave blank for no expiry)"}),i(f,{id:"certificate_expiry_days",modelValue:s(e).certificate_expiry_days,"onUpdate:modelValue":a[26]||(a[26]=t=>s(e).certificate_expiry_days=t),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.certificate_expiry_days},null,8,["message"])])])])):p("",!0)])])]),l("div",Ie,[l("button",{type:"submit",class:E(["inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",{"opacity-25":s(e).processing}]),disabled:s(e).processing||!D.value}," Create Quiz ",10,Me)])])],32)])])])])]),_:1}))}},Ye=N(Ce,[["__scopeId","data-v-d9d40637"]]);export{Ye as default};
