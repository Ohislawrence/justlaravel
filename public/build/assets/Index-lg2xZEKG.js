import{d,o as l,n as V,a as e,i as v,z as O,c as W,w as _,b as i,e as S,F as j,l as I,t as p,q as P,A as M,h as z,k as w,j as A,S as Z,W as F}from"./app-CLWqkp7k.js";import{A as G}from"./AppLayout-aGET_Cal.js";import{_ as g}from"./InputLabel-8lkTC4sl.js";import{_ as J}from"./TextInput-DVJYQVFM.js";import{_ as K}from"./Pagination-BNwy7FQq.js";import{_ as X}from"./Modal-C6sNuBSf.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const Y={class:"inline-flex flex-col ml-1 -space-y-1.5"},ee={__name:"SortIcon",props:{direction:{type:String,default:null,validator:a=>[null,"asc","desc"].includes(a)}},setup(a){return(m,x)=>(l(),d("span",Y,[(l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",class:V(["h-3 w-3",{"text-gray-400":a.direction!=="asc","text-indigo-600":a.direction==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},x[0]||(x[0]=[e("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)]),2)),(l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",class:V(["h-3 w-3",{"text-gray-400":a.direction!=="desc","text-indigo-600":a.direction==="desc"}]),viewBox:"0 0 20 20",fill:"currentColor"},x[1]||(x[1]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))]))}},D=U(ee,[["__scopeId","data-v-78733db5"]]);function te(a,m){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"})])}const se={class:"flex justify-between items-center"},oe={class:"flex space-x-2"},ae=["disabled"],ie={class:"py-6"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white shadow-sm sm:rounded-lg mb-6"},ne={class:"p-6 bg-white border-b border-gray-200"},de={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ue=["value"],ce={class:"bg-white shadow-sm sm:rounded-lg overflow-hidden"},pe={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},xe={class:"bg-gray-50"},ve={class:"bg-white divide-y divide-gray-200"},fe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"flex items-center"},ye={class:"text-sm font-medium text-gray-900"},he={class:"text-xs text-gray-500 mt-1"},_e={class:"px-6 py-4 whitespace-nowrap"},we={class:"text-sm text-gray-900"},be={key:0,class:"text-xs text-gray-500 mt-1"},ke={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap"},ze={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},De={class:"flex justify-end space-x-2"},Ve=["onClick"],Le=["onClick"],$e={key:0},qe={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Te={class:"p-6"},je={class:"mb-4"},Ie={class:"mt-1 flex rounded-md shadow-sm"},Me=["value"],Ae={class:"flex justify-end"},Fe={__name:"Index",props:{certificates:{type:Object,required:!0},filters:{type:Object,default:()=>({search:"",quiz_type:"",date_from:"",date_to:""})},sortField:{type:String,default:"issued_at"},sortDirection:{type:String,default:"desc"}},setup(a){const m=a,x=[{value:"test",label:"Test"},{value:"exam",label:"Exam"},{value:"practice",label:"Practice"},{value:"survey",label:"Survey"}],r=v({...m.filters}),c=v(m.sortField),u=v(m.sortDirection),y=v(!1),L=v(""),$=v(null),h=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),q=o=>o.expires_at&&new Date(o.expires_at)<new Date?"Expired":"Valid",B=o=>o.expires_at&&new Date(o.expires_at)<new Date?"bg-red-100 text-red-800":"bg-green-100 text-green-800",b=o=>{c.value===o?u.value=u.value==="asc"?"desc":"asc":(c.value=o,u.value="asc"),F.get(route("certificates.index"),{sort_field:c.value,sort_direction:u.value,...r.value},{preserveState:!0,replace:!0})},k=()=>{F.get(route("certificates.index"),{...r.value,sort_field:c.value,sort_direction:u.value},{preserveState:!0,replace:!0})},E=()=>{r.value={search:"",quiz_type:"",date_from:"",date_to:""},k()},N=o=>{window.location.href=route("certificates.download",o.id)},Q=o=>{const t=new URL(route("certificates.show",o.id),window.location.origin);L.value=t.toString(),y.value=!0},R=()=>{$.value.select(),document.execCommand("copy")},H=()=>{const o=["Certificate Number","Quiz","Score","Issued Date","Expiry Date","Status","Link"],t=m.certificates.data.map(n=>[n.certificate_number,n.quiz.title,`${n.metadata.score}%`,h(n.issued_at),n.expires_at?h(n.expires_at):"Never",q(n),new URL(route("certificates.show",n.id),window.location.origin).toString()]);let s="data:text/csv;charset=utf-8,"+o.join(",")+`
`+t.map(n=>n.join(",")).join(`
`);const C=encodeURI(s),f=document.createElement("a");f.setAttribute("href",C),f.setAttribute("download","certificates_export.csv"),document.body.appendChild(f),f.click(),document.body.removeChild(f)};let T;return O(r,()=>{clearTimeout(T),T=setTimeout(k,500)},{deep:!0}),(o,t)=>(l(),W(G,{title:"My Certificates"},{header:_(()=>[e("div",se,[t[9]||(t[9]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," My Certificates ",-1)),e("div",oe,[e("button",{onClick:H,class:"btn btn-secondary",disabled:a.certificates.data.length===0}," Export to CSV ",8,ae)])])]),default:_(()=>[e("div",ie,[e("div",re,[e("div",le,[e("div",ne,[e("div",de,[e("div",null,[i(g,{for:"search",value:"Search"}),i(J,{id:"search",modelValue:r.value.search,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.search=s),type:"text",class:"mt-1 block w-full",placeholder:"Quiz name, certificate #..."},null,8,["modelValue"])]),e("div",null,[i(g,{for:"quiz_type",value:"Quiz Type"}),S(e("select",{id:"quiz_type","onUpdate:modelValue":t[1]||(t[1]=s=>r.value.quiz_type=s),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[t[10]||(t[10]=e("option",{value:""},"All Types",-1)),(l(),d(j,null,I(x,s=>e("option",{key:s.value,value:s.value},p(s.label),9,ue)),64))],512),[[P,r.value.quiz_type]])]),e("div",null,[i(g,{for:"date_from",value:"From Date"}),S(e("input",{id:"date_from","onUpdate:modelValue":t[2]||(t[2]=s=>r.value.date_from=s),type:"date",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,512),[[M,r.value.date_from]])]),e("div",null,[i(g,{for:"date_to",value:"To Date"}),S(e("input",{id:"date_to","onUpdate:modelValue":t[3]||(t[3]=s=>r.value.date_to=s),type:"date",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,512),[[M,r.value.date_to]])])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:E,class:"btn btn-secondary mr-2"}," Reset Filters "),e("button",{onClick:k,class:"btn btn-primary"}," Apply Filters ")])])]),e("div",ce,[e("div",pe,[e("table",me,[e("thead",xe,[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[4]||(t[4]=s=>b("quiz.title"))},[t[11]||(t[11]=w(" Quiz ")),i(D,{direction:c.value==="quiz.title"?u.value:null},null,8,["direction"])]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[5]||(t[5]=s=>b("issued_at"))},[t[12]||(t[12]=w(" Issued Date ")),i(D,{direction:c.value==="issued_at"?u.value:null},null,8,["direction"])]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[6]||(t[6]=s=>b("metadata.score"))},[t[13]||(t[13]=w(" Score ")),i(D,{direction:c.value==="metadata.score"?u.value:null},null,8,["direction"])]),t[14]||(t[14]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[15]||(t[15]=e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",ve,[(l(!0),d(j,null,I(a.certificates.data,s=>(l(),d("tr",{key:s.id},[e("td",fe,[e("div",ge,[e("div",ye,p(s.quiz.title),1)]),e("div",he," #"+p(s.certificate_number),1)]),e("td",_e,[e("div",we,p(h(s.issued_at)),1),s.expires_at?(l(),d("div",be," Expires: "+p(h(s.expires_at)),1)):z("",!0)]),e("td",ke,[e("div",Ce,p(s.metadata.score)+"% ",1)]),e("td",Se,[e("span",{class:V([B(s),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},p(q(s)),3)]),e("td",ze,[e("div",De,[i(A(Z),{href:o.route("certificates.show",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:_(()=>t[16]||(t[16]=[w(" View ")])),_:2,__:[16]},1032,["href"]),e("button",{onClick:C=>N(s),class:"text-blue-600 hover:text-blue-900"}," Download ",8,Ve),e("button",{onClick:C=>Q(s),class:"text-green-600 hover:text-green-900"}," Share ",8,Le)])])]))),128)),a.certificates.data.length===0?(l(),d("tr",$e,t[17]||(t[17]=[e("td",{colspan:"5",class:"px-6 py-4 text-center text-sm text-gray-500"}," No certificates found ",-1)]))):z("",!0)])])]),a.certificates.meta&&a.certificates.meta.total>a.certificates.meta.per_page?(l(),d("div",qe,[i(K,{links:a.certificates.links},null,8,["links"])])):z("",!0)])])]),i(X,{show:y.value,onClose:t[8]||(t[8]=s=>y.value=!1),"max-width":"md"},{default:_(()=>[e("div",Te,[t[18]||(t[18]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Share Certificate ",-1)),e("div",je,[i(g,{for:"shareLink",value:"Shareable Link"}),e("div",Ie,[e("input",{id:"shareLink",ref_key:"shareLinkInput",ref:$,type:"text",readonly:"",value:L.value,class:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-l-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,Me),e("button",{onClick:R,class:"inline-flex items-center px-3 py-2 border border-l-0 border-gray-300 rounded-r-md bg-gray-50 text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"},[i(A(te),{class:"h-5 w-5"})])])]),e("div",Ae,[e("button",{onClick:t[7]||(t[7]=s=>y.value=!1),class:"btn btn-secondary"}," Close ")])])]),_:1},8,["show"])]),_:1}))}},We=U(Fe,[["__scopeId","data-v-ed811403"]]);export{We as default};
