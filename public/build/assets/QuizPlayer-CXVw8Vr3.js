import{e as n,o as s,a as e,f as x,F as j,h as I,t as c,d as k,s as E,m as O,y as Z,v as W,l as _,z as oe,n as U,g as L,b as ee,w as ie,u as te,A as le,B as ae,C as re,W as ue,D as de,c as ce,E as me,j as fe}from"./app-BYM1Msdw.js";import{r as ve}from"./ClockIcon-8HWf5iue.js";const ge={class:"space-y-3"},he={class:"space-y-2"},pe=["id","name","value","checked","onChange"],xe=["for"],be={key:0,class:"text-red-500 text-sm"},ye={__name:"MCQ",props:{question:{type:Object,required:!0},answer:{type:[String,Number,Object],default:null}},emits:["update"],setup(o,{emit:v}){const r=o,w=v,t=u=>typeof u=="object"&&typeof r.answer=="object"?JSON.stringify(u)===JSON.stringify(r.answer):r.answer===u,m=u=>{w("update",u)};return(u,f)=>(s(),n("div",ge,[e("div",he,[(s(!0),n(j,null,I(o.question.options,(l,i)=>(s(),n("div",{key:i,class:"flex items-center"},[e("input",{id:`option-${o.question.id}-${i}`,type:"radio",name:`question-${o.question.id}`,value:l,checked:t(l),onChange:d=>m(l),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,40,pe),e("label",{for:`option-${o.question.id}-${i}`,class:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer"},c(l.text||l),9,xe)]))),128))]),!o.question.options||o.question.options.length===0?(s(),n("div",be," No options available for this question. ")):x("",!0)]))}},we={class:"space-y-4"},_e={class:"flex items-center space-x-4"},ke={class:"inline-flex items-center"},qe=["name"],$e={class:"inline-flex items-center"},Ce=["name"],je={key:0,class:"mt-3 space-y-2"},Me={key:0,class:"p-2 bg-blue-50 rounded-md"},ze={class:"text-sm text-blue-800"},Se={key:1,class:"p-2 bg-blue-50 rounded-md"},Ie={class:"text-sm text-blue-800"},Ae={__name:"TrueFalse",props:{question:Object,answer:Boolean},emits:["update"],setup(o,{emit:v}){const r=o,w=v,t=k(r.answer);return E(t,m=>{w("update",m)}),(m,u)=>(s(),n("div",we,[e("div",_e,[e("label",ke,[O(e("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>t.value=f),type:"radio",name:`question-${o.question.id}`,value:!0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,qe),[[Z,t.value]]),u[2]||(u[2]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"True",-1))]),e("label",$e,[O(e("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>t.value=f),type:"radio",name:`question-${o.question.id}`,value:!1,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,Ce),[[Z,t.value]]),u[3]||(u[3]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"False",-1))])]),o.question.settings.show_feedback?(s(),n("div",je,[t.value===!0&&o.question.settings.true_feedback?(s(),n("div",Me,[e("p",ze,c(o.question.settings.true_feedback),1)])):x("",!0),t.value===!1&&o.question.settings.false_feedback?(s(),n("div",Se,[e("p",Ie,c(o.question.settings.false_feedback),1)])):x("",!0)])):x("",!0)]))}},Le={class:"space-y-4"},Oe={key:0,class:"p-3 bg-gray-50 rounded-md"},Ee={class:"text-sm text-gray-600"},Be={__name:"ShortAnswer",props:{question:{type:Object,required:!0,default:()=>({settings:{feedback:""},correct_answers:[]})},answer:String},emits:["update"],setup(o,{emit:v}){const r=o,w=v,t=k(r.answer||"");return E(t,m=>{w("update",m)}),(m,u)=>{var f;return s(),n("div",Le,[e("div",null,[u[1]||(u[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Your Answer",-1)),O(e("input",{"onUpdate:modelValue":u[0]||(u[0]=l=>t.value=l),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Type your answer here"},null,512),[[W,t.value]])]),(f=o.question.settings)!=null&&f.feedback?(s(),n("div",Oe,[e("p",Ee,c(o.question.settings.feedback),1)])):x("",!0)])}}},Qe={class:"space-y-4"},Te={key:0,class:"text-sm text-gray-600"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={class:"space-y-2"},Ne={class:"space-y-2"},Fe=["onUpdate:modelValue"],We=["value"],Ye={__name:"Matching",props:{question:{type:Object,required:!0},answer:{type:Array,default:()=>[]}},emits:["update"],setup(o,{emit:v}){var l;const r=o,w=v,t=k(new Array(((l=r.question.options)==null?void 0:l.length)||0).fill("")),m=_(()=>{var d,g;const i=((d=r.question.options)==null?void 0:d.map(b=>b.left))||[];return(g=r.question.settings)!=null&&g.randomize_left?[...i].sort(()=>Math.random()-.5):i}),u=_(()=>{var b,y,q;const i=((b=r.question.options)==null?void 0:b.map(M=>M.right))||[],d=((y=r.question.settings)==null?void 0:y.distractors)||[],g=[...i,...d];return(q=r.question.settings)!=null&&q.randomize_right?[...g].sort(()=>Math.random()-.5):g}),f=()=>{const i={};t.value.forEach((d,g)=>{if(d!==""){const b=m.value[g],y=u.value[d];i[b]=y}}),w("update",i)};return E(()=>r.answer,i=>{i&&typeof i=="object"&&!Array.isArray(i)&&(t.value=new Array(m.value.length).fill(""),Object.entries(i).forEach(([d,g])=>{const b=m.value.indexOf(d),y=u.value.indexOf(g);b!==-1&&y!==-1&&(t.value[b]=y.toString())}))},{immediate:!0}),(i,d)=>{var g;return s(),n("div",Qe,[(g=o.question.settings)!=null&&g.instructions?(s(),n("div",Te,c(o.question.settings.instructions),1)):x("",!0),e("div",Ve,[e("div",Ue,[d[0]||(d[0]=e("h3",{class:"text-sm font-medium text-gray-700"},"Items",-1)),(s(!0),n(j,null,I(m.value,(b,y)=>(s(),n("div",{key:`left-${y}`,class:"p-2 bg-gray-50 rounded border border-gray-200"},c(b),1))),128))]),e("div",Ne,[d[2]||(d[2]=e("h3",{class:"text-sm font-medium text-gray-700"},"Matches",-1)),(s(!0),n(j,null,I(m.value,(b,y)=>O((s(),n("select",{key:`select-${y}`,"onUpdate:modelValue":q=>t.value[y]=q,onChange:f,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[d[1]||(d[1]=e("option",{value:""},"Select match",-1)),(s(!0),n(j,null,I(u.value,(q,M)=>(s(),n("option",{key:`option-${M}`,value:M},c(q),9,We))),128))],40,Fe)),[[oe,t.value[y]]])),128))])])])}}},Re={class:"space-y-4"},De={key:0,class:"text-sm text-gray-600"},Pe={key:0},He={key:1},Je={key:2},Ge=["placeholder"],Ke={class:"flex justify-between items-center"},Xe={key:0,class:"ml-2 text-red-600"},Ze={key:0,class:"text-xs text-blue-600"},et={key:1,class:"mt-4 p-4 bg-gray-50 rounded-md border border-gray-200"},tt=["innerHTML"],st={key:2,class:"mt-4"},nt={class:"mt-1 text-xs text-gray-500"},ot={__name:"Essay",props:{question:{type:Object,required:!0,default:()=>({settings:{min_words:0,max_words:0,sample_answer:"",allow_rich_text:!1,allow_attachments:!1}})},answer:{type:[String,Object],default:""}},emits:["update"],setup(o,{emit:v}){const r=o,w=v,t=k(""),m=k([]);E(()=>r.answer,a=>{typeof a=="string"?t.value=a:a!=null&&a.text&&(t.value=a.text,m.value=a.attachments||[])},{immediate:!0});const u=_(()=>{var a,C;return((a=r.question.settings)==null?void 0:a.min_words)>0||((C=r.question.settings)==null?void 0:C.max_words)>0}),f=_(()=>{var a;return(a=r.question.settings)==null?void 0:a.allow_rich_text}),l=_(()=>t.value.trim()?t.value.trim().split(/\s+/).length:0),i=_(()=>{const a=r.question.settings||{};return a.min_words>0&&l.value<a.min_words||a.max_words>0&&l.value>a.max_words}),d=_(()=>{const a=r.question.settings||{};return a.min_words>0&&l.value<a.min_words?`${a.min_words-l.value} more words required`:a.max_words>0&&l.value>a.max_words?`${l.value-a.max_words} words over limit`:""}),g=_(()=>i.value?"text-red-600":"text-gray-500"),b=_(()=>{const a=r.question.settings||{};return a.min_words>0&&a.max_words>0?`Write your answer here (${a.min_words}-${a.max_words} words)`:a.min_words>0?`Write your answer here (at least ${a.min_words} words)`:a.max_words>0?`Write your answer here (up to ${a.max_words} words)`:"Write your answer here"}),y=_(()=>f.value?"You may attach supporting documents or use rich text formatting below":"You may attach supporting documents if needed"),q=_(()=>{var a;return(a=r.question.settings)!=null&&a.sample_answer?r.question.settings.sample_answer.replace(/\n/g,"<br>"):""}),M=()=>{Q()},N=a=>{m.value=Array.from(a.target.files),Q()},Q=()=>{var a;(a=r.question.settings)!=null&&a.allow_attachments?w("update",{text:t.value,attachments:m.value}):w("update",t.value)};return(a,C)=>{var T,B;return s(),n("div",Re,[u.value?(s(),n("div",De,[o.question.settings.min_words&&o.question.settings.max_words?(s(),n("span",Pe," Your answer should be between "+c(o.question.settings.min_words)+" and "+c(o.question.settings.max_words)+" words. ",1)):o.question.settings.min_words?(s(),n("span",He," Minimum "+c(o.question.settings.min_words)+" words required. ",1)):o.question.settings.max_words?(s(),n("span",Je," Maximum "+c(o.question.settings.max_words)+" words allowed. ",1)):x("",!0)])):x("",!0),O(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=F=>t.value=F),rows:"8",class:U(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",{"border-red-300":i.value}]),placeholder:b.value,onInput:M},null,42,Ge),[[W,t.value]]),e("div",Ke,[e("div",{class:U(["text-sm",g.value])},[L(" Word count: "+c(l.value)+" ",1),i.value?(s(),n("span",Xe," ("+c(d.value)+") ",1)):x("",!0)],2),f.value?(s(),n("div",Ze," Rich text formatting available ")):x("",!0)]),(T=o.question.settings)!=null&&T.sample_answer?(s(),n("div",et,[C[1]||(C[1]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Example Answer",-1)),e("div",{class:"text-sm text-gray-600",innerHTML:q.value},null,8,tt)])):x("",!0),(B=o.question.settings)!=null&&B.allow_attachments?(s(),n("div",st,[C[2]||(C[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Attachments",-1)),e("input",{type:"file",onChange:N,multiple:"",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e("p",nt,c(y.value),1)])):x("",!0)])}}},it={class:"space-y-4"},lt={class:"whitespace-pre-wrap"},at=["onUpdate:modelValue","placeholder"],rt={__name:"FillInTheBlank",props:{question:{type:Object,required:!0},answer:{type:Array,default:()=>[]}},emits:["update"],setup(o,{emit:v}){const r=o,w=v,t=_(()=>{const f=[],l=r.question.question||"",i=/(\[blank\])/gi;let d=0,g=0,b;for(;(b=i.exec(l))!==null;)b.index>d&&f.push({text:l.substring(d,b.index),isBlank:!1}),f.push({text:b[0],isBlank:!0,blankIndex:g++}),d=i.lastIndex;return d<l.length&&f.push({text:l.substring(d),isBlank:!1}),f}),m=k([]);E(()=>r.question,f=>{const l=(f.question.match(/\[blank\]/gi)||[]).length;m.value=new Array(l).fill(""),r.answer&&r.answer.length>0&&r.answer.forEach((i,d)=>{d<m.value.length&&(m.value[d]=i)})},{immediate:!0});const u=()=>{w("update",[...m.value])};return(f,l)=>(s(),n("div",it,[e("div",lt,[(s(!0),n(j,null,I(t.value,(i,d)=>(s(),n(j,{key:d},[i.isBlank?O((s(),n("input",{key:0,"onUpdate:modelValue":g=>m.value[i.blankIndex]=g,onInput:u,type:"text",class:"inline-block mx-1 px-2 py-1 border-b-2 border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:`Blank ${i.blankIndex+1}`},null,40,at)),[[W,m.value[i.blankIndex]]]):(s(),n(j,{key:1},[L(c(i.text),1)],64))],64))),128))])]))}},ut={class:"space-y-4"},dt={key:0,class:"text-sm text-gray-600 mb-3"},ct={class:"flex items-center bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200"},mt={class:"flex-1"},ft={class:"ml-3 text-sm text-gray-500"},vt={class:"mt-4"},gt={class:"list-decimal pl-5 mt-1 space-y-1"},ht={__name:"Ordering",props:{question:{type:Object,required:!0},answer:{type:Array,default:()=>[]}},emits:["update"],setup(o,{emit:v}){const r=o,w=v,t=k([]);E(()=>r.question,u=>{var f;if(u.options)if(r.answer&&r.answer.length>0)t.value=r.answer.map(l=>u.options[l]);else{const l=[...u.options];(f=u.settings)!=null&&f.randomize&&l.sort(()=>Math.random()-.5),t.value=l}},{immediate:!0});const m=()=>{if(!r.question.options)return;const u=t.value.map(f=>r.question.options.findIndex(l=>l.id===f.id)).filter(f=>f!==-1);w("update",u)};return(u,f)=>{var l;return s(),n("div",ut,[(l=o.question.settings)!=null&&l.instructions?(s(),n("div",dt,c(o.question.settings.instructions),1)):x("",!0),ee(te(le),{modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=i=>t.value=i),"item-key":"id",class:"space-y-2",onEnd:m},{item:ie(({element:i,index:d})=>[e("div",ct,[f[1]||(f[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-5 h-5 text-gray-400 cursor-move mr-3"},[e("line",{x1:"9",y1:"18",x2:"9",y2:"6"}),e("line",{x1:"15",y1:"18",x2:"15",y2:"6"})],-1)),e("span",mt,c(i.text),1),e("span",ft,"#"+c(d+1),1)])]),_:1},8,["modelValue"]),e("div",vt,[f[2]||(f[2]=e("h4",{class:"text-sm font-medium text-gray-700"},"Your current order:",-1)),e("ol",gt,[(s(!0),n(j,null,I(t.value,(i,d)=>(s(),n("li",{key:`current-${d}`},c(i.text),1))),128))])])])}}},pt={class:"bg-gray-800 text-white py-3 px-4"},xt={class:"max-w-4xl mx-auto flex justify-between items-center"},bt={class:"text-xl font-bold"},yt={class:"flex items-center space-x-4"},wt={key:0,class:"flex items-center bg-gray-700 px-3 py-1 rounded"},_t=["disabled"],kt={class:"max-w-4xl mx-auto py-6 px-4 sm:px-6"},qt={class:"mb-6"},$t={class:"flex justify-between text-sm text-gray-600 mb-1"},Ct={class:"w-full bg-gray-200 rounded-full h-2"},jt={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Mt={class:"flex items-start mb-4"},zt={class:"flex-shrink-0 bg-blue-100 text-blue-800 rounded-full w-8 h-8 flex items-center justify-center mr-3 font-semibold"},St={class:"min-w-0 flex-1"},It={class:"text-lg font-medium text-gray-900 leading-relaxed"},At={class:"mt-2 flex flex-wrap items-center gap-2 text-sm text-gray-500"},Lt={class:"bg-gray-100 px-2 py-1 rounded"},Ot={class:"bg-blue-100 text-blue-700 px-2 py-1 rounded"},Et={key:0,class:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded"},Bt={key:1,class:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs"},Qt={key:0,class:"mt-3 text-sm text-gray-600 italic"},Tt={key:0,class:"mb-6 flex justify-center"},Vt={class:"max-w-2xl w-full"},Ut=["src","alt"],Nt={key:1},Ft={key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-md"},Wt={class:"flex items-center"},Yt={class:"text-yellow-800 font-medium"},Rt={class:"text-sm text-yellow-700 mt-1"},Dt={key:2,class:"flex justify-center py-8"},Pt={class:"flex justify-between items-center"},Ht=["disabled"],Jt={class:"flex space-x-1"},Gt=["onClick","title"],Kt={class:"flex space-x-2"},Xt=["disabled"],Zt={class:"relative max-w-4xl max-h-full"},es=["src","alt"],ts={class:"absolute bottom-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded text-sm"},ss={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ns={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},os={class:"mt-3 text-center"},is={class:"mt-2 px-7 py-3"},ls={key:0,class:"bg-yellow-50 border border-yellow-200 rounded p-3 mb-4"},as={class:"text-yellow-800 text-sm font-medium"},rs={class:"text-left space-y-2 text-sm text-gray-600"},us={key:0},ds={class:"flex justify-center space-x-3 mt-6"},cs=["disabled"],ms={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},hs={__name:"QuizPlayer",props:{quiz:{type:Object,required:!0},attempt:{type:Object,required:!0},questions:{type:Array,required:!0,default:()=>[]},timeLimit:{type:Number,default:null}},setup(o){const v=o,r=p=>p?{multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",matching:"Matching",ordering:"Ordering",fill_in_the_blank:"Fill In The Blank",essay:"Essay"}[p]||p:"Unknown",w={multiple_choice:ye,true_false:Ae,short_answer:Be,matching:Ye,ordering:ht,fill_in_the_blank:rt,essay:ot},t=k(0),m=k([]),u=k(!1),f=k(!1),l=k(!1),i=k(v.timeLimit?v.timeLimit*60:0),d=k(null),g=_(()=>!v.questions||!v.questions.length||t.value>=v.questions.length?null:v.questions[t.value]),b=_(()=>!v.questions||v.questions.length===0?0:Math.round((t.value+1)/v.questions.length*100)),y=_(()=>{const p=Math.floor(i.value/60),h=i.value%60;return`${p}:${h.toString().padStart(2,"0")}`}),q=_(()=>m.value.filter(p=>p==null||p==="").length),M=p=>{if(!p)return console.error("Question type is undefined"),null;const h=w[p];return h||(console.error(`No component found for question type: ${p}`),null)};ae(()=>{console.log("Quiz component mounted"),console.log("Props:",v),console.log("Questions:",v.questions),v.questions&&v.questions.length>0&&(m.value=new Array(v.questions.length).fill(null)),v.timeLimit&&v.timeLimit>0&&N(),ne(),window.addEventListener("beforeunload",D)}),re(()=>{d.value&&clearInterval(d.value),window.removeEventListener("beforeunload",D)});function N(){d.value=setInterval(()=>{i.value--,i.value<=0&&(clearInterval(d.value),alert("Time is up! Your quiz will be submitted automatically."),R())},1e3)}function Q(){t.value<v.questions.length-1&&t.value++}function a(){t.value>0&&t.value--}function C(p){p>=0&&p<v.questions.length&&(t.value=p)}function T(){f.value=!0}function B(){f.value=!1}function F(p){console.error("Failed to load question image:",p.target.src),p.target.style.display="none"}function se(p){console.log("Updating answer for question",t.value,"with value:",p),m.value[t.value]=p}function Y(){u.value=!0}const R=async()=>{l.value=!0,u.value=!1;try{const p=v.questions.reduce((S,A,V)=>{const $=m.value[V];return $!=null&&$!==""&&(Array.isArray($)?S[A.id]=$:typeof $=="object"&&$!==null?S[A.id]=JSON.stringify($):S[A.id]=$),S},{}),h={attempt_id:v.attempt.id,answers:p,time_spent:v.timeLimit?v.timeLimit*60-i.value:null,proctoring_flags:{tab_switches:window.tabSwitchCount||0,fullscreen_exits:window.fullscreenExitCount||0}};console.log("Submitting quiz with data:",h),await ue.post(route("examinee.submit",{quiz:v.quiz.id}),h,{headers:{"Content-Type":"application/json",Accept:"application/json"}})}catch(p){console.error("Submission failed:",p),alert("Submission failed: "+((p==null?void 0:p.message)||"Unknown error")),l.value=!1}};function ne(){window.tabSwitchCount=0,window.addEventListener("blur",()=>{document.visibilityState==="hidden"&&(window.tabSwitchCount++,console.log("Tab switch detected. Count:",window.tabSwitchCount))}),window.fullscreenExitCount=0,document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(window.fullscreenExitCount++,console.log("Fullscreen exit detected. Count:",window.fullscreenExitCount))})}function D(p){!l.value&&q.value>0&&(p.preventDefault(),p.returnValue="You have unsaved answers. Are you sure you want to leave?")}return(p,h)=>{var S,A,V,$,P,H,J,G,K;return s(),n(j,null,[e("div",pt,[e("div",xt,[e("h1",bt,c(o.quiz.title),1),e("div",yt,[o.timeLimit?(s(),n("div",wt,[ee(te(ve),{class:"h-5 w-5 mr-1"}),e("span",{class:U({"text-red-300":i.value<=300,"animate-pulse":i.value<=60})},c(y.value),3)])):x("",!0),e("button",{onClick:Y,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm transition-colors",disabled:l.value}," Submit Quiz ",8,_t)])])]),e("div",kt,[e("div",qt,[e("div",$t,[e("span",null,"Question "+c(t.value+1)+" of "+c(o.questions.length),1),e("span",null,c(b.value)+"% Complete",1)]),e("div",Ct,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:de({width:`${b.value}%`})},null,4)])]),e("div",jt,[e("div",Mt,[e("span",zt,c(t.value+1),1),e("div",St,[e("h3",It,c(((S=g.value)==null?void 0:S.question)||"Loading question..."),1),e("div",At,[e("span",Lt,c(r((A=g.value)==null?void 0:A.type)),1),e("span",Ot,c(((V=g.value)==null?void 0:V.points)||0)+" point"+c(((($=g.value)==null?void 0:$.points)||0)!==1?"s":""),1),(P=g.value)!=null&&P.time_limit?(s(),n("span",Et,c(g.value.time_limit)+" min limit ",1)):x("",!0),(H=g.value)!=null&&H.is_required?(s(),n("span",Bt," Required ")):x("",!0)]),(J=g.value)!=null&&J.description?(s(),n("p",Qt,c(g.value.description),1)):x("",!0)])]),(G=g.value)!=null&&G.image?(s(),n("div",Tt,[e("div",Vt,[e("img",{src:g.value.image,alt:`Question ${t.value+1} image`,class:"w-full h-auto rounded-lg border border-gray-200 shadow-sm cursor-pointer transition-transform hover:scale-105",onClick:T,onError:F,loading:"lazy"},null,40,Ut),h[2]||(h[2]=e("p",{class:"text-xs text-gray-500 text-center mt-2"}," Click image to view full size ",-1))])])):x("",!0),g.value?(s(),n("div",Nt,[M(g.value.type)?(s(),ce(me(M(g.value.type)),{key:0,question:g.value,answer:m.value[t.value],onUpdate:se,class:"mt-4"},null,40,["question","answer"])):(s(),n("div",Ft,[e("div",Wt,[h[3]||(h[3]=e("svg",{class:"h-5 w-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[e("p",Yt,' Question type "'+c(g.value.type)+'" is not supported yet. ',1),e("p",Rt," Available types: "+c(Object.keys(w).join(", ")),1)])])]))])):(s(),n("div",Dt,h[4]||(h[4]=[e("div",{class:"flex items-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e("span",{class:"ml-3 text-gray-600"},"Loading question...")],-1)])))]),e("div",Pt,[e("button",{onClick:a,disabled:t.value===0,class:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-2 rounded-md transition-colors flex items-center"},h[5]||(h[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),L(" Previous ")]),8,Ht),e("div",Jt,[(s(!0),n(j,null,I(o.questions,(X,z)=>(s(),n("button",{key:X.id,onClick:fs=>C(z),class:U(["w-3 h-3 rounded-full transition-colors",z===t.value?"bg-blue-600":m.value[z]!==null&&m.value[z]!==void 0&&m.value[z]!==""?"bg-green-500":"bg-gray-300"]),title:`Question ${z+1}${m.value[z]!==null&&m.value[z]!==void 0&&m.value[z]!==""?" (Answered)":""}`},null,10,Gt))),128))]),e("div",Kt,[t.value<o.questions.length-1?(s(),n("button",{key:0,onClick:Q,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors flex items-center"},h[6]||(h[6]=[L(" Next Question "),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):t.value===o.questions.length-1?(s(),n("button",{key:1,onClick:Y,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md transition-colors flex items-center",disabled:l.value},h[7]||(h[7]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),L(" Submit Quiz ")]),8,Xt)):x("",!0)])])]),f.value?(s(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:B},[e("div",Zt,[e("img",{src:(K=g.value)==null?void 0:K.image,alt:`Question ${t.value+1} image - Full size`,class:"max-w-full max-h-full object-contain rounded-lg",onClick:h[0]||(h[0]=fe(()=>{},["stop"]))},null,8,es),e("button",{onClick:B,class:"absolute top-4 right-4 bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-opacity-75 transition-opacity"},h[8]||(h[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",ts," Question "+c(t.value+1)+" Image ",1)])])):x("",!0),u.value?(s(),n("div",ss,[e("div",ns,[e("div",os,[h[11]||(h[11]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})])],-1)),h[12]||(h[12]=e("h3",{class:"text-lg font-medium text-gray-900"},"Submit Quiz",-1)),e("div",is,[h[9]||(h[9]=e("p",{class:"text-sm text-gray-500 mb-4"}," Are you sure you want to submit your quiz? This action cannot be undone. ",-1)),q.value>0?(s(),n("div",ls,[e("p",as," ⚠️ You have "+c(q.value)+" unanswered question(s). ",1)])):x("",!0),e("div",rs,[e("p",null,"• Answered: "+c(o.questions.length-q.value)+" / "+c(o.questions.length),1),o.timeLimit?(s(),n("p",us,"• Time remaining: "+c(y.value),1)):x("",!0)])]),e("div",ds,[e("button",{onClick:h[1]||(h[1]=X=>u.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded transition-colors"}," Cancel "),e("button",{onClick:R,disabled:l.value,class:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-4 py-2 rounded transition-colors flex items-center"},[l.value?(s(),n("svg",ms,h[10]||(h[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):x("",!0),L(" "+c(l.value?"Submitting...":"Submit Quiz"),1)],8,cs)])])])])):x("",!0)],64)}}};export{hs as default};
