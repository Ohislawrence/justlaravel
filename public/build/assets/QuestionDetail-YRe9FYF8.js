import{d as N,l as a,c as b,o as l,w as f,a as t,e as u,f as y,t as o,n as w,b as g,m as P,z as V,F as q,h as k,u as C,S,g as A}from"./app-BYM1Msdw.js";import{A as L}from"./AppLayout-AFbEt38E.js";import{_ as $}from"./Pagination-BQS00_Gs.js";import{D as H}from"./DoughnutChart-DIytLX6A.js";import{B as J}from"./BarChart-DBa3IsG3.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chart-DUfl3Dpl.js";const G={class:"flex justify-between items-center"},K={class:"font-semibold text-xl text-gray-800 leading-tight"},W={class:"flex space-x-2"},X={class:"py-6"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},tt={class:"p-6 bg-white border-b border-gray-200"},et={class:"flex flex-col md:flex-row md:justify-between md:items-start gap-4"},st={class:"flex-1"},ot={class:"prose max-w-none"},it={class:"whitespace-pre-wrap"},nt={key:0,class:"text-gray-600 mt-2"},at={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},rt={class:"font-medium"},lt={class:"font-medium"},dt={class:"font-medium"},ut={class:"md:w-64"},ct={class:"p-4 bg-blue-50 rounded-lg"},mt={class:"space-y-3"},pt={class:"text-xl font-bold"},xt={class:"text-xl font-bold"},ft={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},gt={class:"bg-white p-6 rounded-lg shadow"},vt={key:0,class:"bg-white p-6 rounded-lg shadow"},yt={class:"bg-white p-6 rounded-lg shadow"},ht={class:"space-y-4"},_t={class:"font-medium"},bt={class:"font-medium"},wt={class:"font-medium"},qt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},kt={class:"p-6 bg-white border-b border-gray-200"},Ct={class:"flex justify-between items-center mb-4"},St={class:"flex space-x-2"},At={class:"overflow-x-auto"},zt={class:"min-w-full divide-y divide-gray-200"},Ot={class:"bg-white divide-y divide-gray-200"},Bt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"flex items-center"},Tt={class:"flex-shrink-0 h-10 w-10"},Et=["src"],Ft={class:"ml-4"},Mt={class:"text-sm font-medium text-gray-900"},Rt={class:"text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Qt={key:0},It={key:1},Nt={key:2},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap"},$t={__name:"QuestionDetail",props:{quiz:{type:Object,required:!0},question:{type:Object,required:!0},responses:{type:Object,required:!0}},setup(i){const d=i,m=N("all"),c=a(()=>d.responses.total),p=a(()=>d.responses.data.filter(s=>s.is_correct).length),v=a(()=>Math.round(p.value/c.value*100)),z=a(()=>c.value===0?0:d.responses.data.reduce((s,e)=>s+e.points_earned,0)/c.value),h=a(()=>v.value>=80?"Easy":v.value>=50?"Medium":"Hard"),O=a(()=>{switch(h.value){case"Easy":return"text-green-600";case"Medium":return"text-yellow-600";case"Hard":return"text-red-600";default:return""}}),B=a(()=>c.value===0?0:d.responses.data.reduce((s,e)=>s+(e.time_spent||0),0)/c.value),D=a(()=>{const s=d.responses.data.filter(e=>e.is_correct);return s.length?Math.min(...s.map(e=>e.time_spent||0)):0}),T=a(()=>{const s=d.responses.data.filter(e=>e.is_correct);return s.length?Math.max(...s.map(e=>e.time_spent||0)):0}),E=a(()=>({labels:["Correct","Incorrect"],datasets:[{data:[p.value,c.value-p.value],backgroundColor:["#10B981","#EF4444"],hoverOffset:4}]})),F=a(()=>{if(question.type!=="multiple_choice")return null;const s={};return question.options.forEach((e,r)=>{s[r]=0}),d.responses.data.forEach(e=>{const r=question.options.findIndex(n=>n===e.answer||n.text===e.answer);r>=0&&s[r]++}),{labels:question.options.map(e=>e.text||e),datasets:[{label:"Times Selected",data:Object.values(s),backgroundColor:question.options.map((e,r)=>question.correct_answers.includes(r)?"#10B981":"#3B82F6")}]}}),M=a(()=>m.value==="all"?d.responses.data:d.responses.data.filter(s=>m.value==="correct"?s.is_correct:!s.is_correct)),x=s=>{if(!s)return"N/A";const e=Math.floor(s/60),r=s%60;return`${e}m ${r}s`},R=s=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[s]||s,j=s=>typeof s=="string"?s:s.text||s.value||JSON.stringify(s),_={responsive:!0,maintainAspectRatio:!1};return(s,e)=>(l(),b(L,{title:`Question Analysis - ${i.question.question}`},{header:f(()=>[t("div",G,[t("h2",K," Question Analysis: "+o(i.quiz.title),1),t("div",W,[g(C(S),{href:s.route("examiner.quizzes.analysis.index",{quiz:i.quiz.id}),class:"btn btn-sm btn-outline"},{default:f(()=>e[1]||(e[1]=[A(" Back to Quiz Analysis ")])),_:1,__:[1]},8,["href"]),g(C(S),{href:s.route("examiner.quizzes.questions.edit",{quiz:i.quiz.id,question:i.question.id}),class:"btn btn-sm btn-primary"},{default:f(()=>e[2]||(e[2]=[A(" Edit Question ")])),_:1,__:[2]},8,["href"])])])]),default:f(()=>{var r;return[t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[e[6]||(e[6]=t("h3",{class:"text-lg font-medium mb-2"},"Question Content",-1)),t("div",ot,[t("p",it,o(i.question.question),1),i.question.description?(l(),u("p",nt,o(i.question.description),1)):y("",!0)]),t("div",at,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500"},"Type",-1)),t("p",rt,o(R(i.question.type)),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-500"},"Points",-1)),t("p",lt,o(i.question.points),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500"},"Correct Answers",-1)),t("p",dt,o(((r=i.question.correct_answers)==null?void 0:r.length)||0),1)])])]),t("div",ut,[t("div",ct,[e[10]||(e[10]=t("h4",{class:"font-medium text-blue-800 mb-2"},"Performance Summary",-1)),t("div",mt,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-blue-700"},"Correct Responses",-1)),t("p",pt,o(p.value)+" / "+o(c.value)+" ("+o(v.value)+"%) ",1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-blue-700"},"Average Points Earned",-1)),t("p",xt,o(z.value.toFixed(1))+" / "+o(i.question.points),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-blue-700"},"Difficulty",-1)),t("p",{class:w(["text-xl font-bold",O.value])},o(h.value),3)])])])])])])]),t("div",ft,[t("div",gt,[e[11]||(e[11]=t("h3",{class:"text-lg font-medium mb-4"},"Response Distribution",-1)),g(H,{data:E.value,options:_},null,8,["data"])]),i.question.type==="multiple_choice"?(l(),u("div",vt,[e[12]||(e[12]=t("h3",{class:"text-lg font-medium mb-4"},"Option Selection",-1)),g(J,{data:F.value,options:_},null,8,["data"])])):y("",!0),t("div",yt,[e[16]||(e[16]=t("h3",{class:"text-lg font-medium mb-4"},"Time Spent",-1)),t("div",ht,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-500"},"Average",-1)),t("p",_t,o(x(B.value)),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-500"},"Fastest Correct",-1)),t("p",bt,o(x(D.value)),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Slowest Correct",-1)),t("p",wt,o(x(T.value)),1)])])])]),t("div",qt,[t("div",kt,[t("div",Ct,[e[18]||(e[18]=t("h3",{class:"text-lg font-medium"},"Student Responses",-1)),t("div",St,[P(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>m.value=n),class:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},e[17]||(e[17]=[t("option",{value:"all"},"All Responses",-1),t("option",{value:"correct"},"Correct Only",-1),t("option",{value:"incorrect"},"Incorrect Only",-1)]),512),[[V,m.value]])])]),t("div",At,[t("table",zt,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Student "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Response "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Points "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Time Spent "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ")])],-1)),t("tbody",Ot,[(l(!0),u(q,null,k(M.value,n=>(l(),u("tr",{key:n.id},[t("td",Bt,[t("div",Dt,[t("div",Tt,[t("img",{class:"h-10 w-10 rounded-full",src:n.attempt.user.avatar_url||"/images/default-avatar.png",alt:""},null,8,Et)]),t("div",Ft,[t("div",Mt,o(n.attempt.user.name),1),t("div",Rt,o(n.attempt.user.email),1)])])]),t("td",jt,[i.question.type==="multiple_choice"?(l(),u("div",Qt,o(j(n.answer)),1)):i.question.type==="fill_in_blank"?(l(),u("div",It,[(l(!0),u(q,null,k(Array.isArray(n.answer)?n.answer:[n.answer],(Q,I)=>(l(),u("span",{key:I,class:"mr-2"},o(Q),1))),128))])):(l(),u("div",Nt,o(n.answer),1))]),t("td",Pt,o(n.points_earned)+" / "+o(i.question.points),1),t("td",Vt,o(x(n.time_spent)),1),t("td",Lt,[t("span",{class:w(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",n.is_correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(n.is_correct?"Correct":"Incorrect"),3)])]))),128))])])]),i.responses.last_page>1?(l(),b($,{key:0,links:i.responses.links,class:"mt-4"},null,8,["links"])):y("",!0)])])])])]}),_:1},8,["title"]))}},Yt=U($t,[["__scopeId","data-v-fb0d786e"]]);export{Yt as default};
