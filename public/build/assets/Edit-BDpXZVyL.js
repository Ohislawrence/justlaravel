import{f as y,x as A,i as w,c as D,o as d,w as m,a as e,b as r,d as c,h as p,k as l,t as u,g as R,j as s,F as H,l as S,n as z,S as U,W as T}from"./app-kQpkt3Sc.js";import{A as I}from"./AppLayout-BYZkZj5l.js";import{_ as f}from"./InputError-C_fJ27Qq.js";import{_ as b}from"./InputLabel-BjJlasTh.js";import{_ as O}from"./TextInput-od1qMv9T.js";import{_ as P}from"./Textarea-D9IFMUpV.js";import{_ as q}from"./Checkbox-tdsXQ9zc.js";import{R as F}from"./RichTextEditor-DeUwknnd.js";import{_ as N}from"./Modal-Z3SQPRgF.js";import{_ as W}from"./ConfirmationModal-CcX7Ntw8.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const J={class:"flex justify-between items-center"},K={class:"font-semibold text-xl text-gray-800 leading-tight"},Q={class:"py-6"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={key:0,class:"mb-4"},Z={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg flex items-center"},ee={key:1,class:"mb-4"},te={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg flex items-center"},oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},se={class:"p-6 bg-white border-b border-gray-200"},re={class:"grid grid-cols-1 gap-6"},ne={class:"space-y-6"},ie={class:"flex items-center"},ae={class:"space-y-6"},le={key:0,class:"mb-4"},de=["src"],ce={key:1,class:"mt-4"},me=["src"],ue={class:"space-y-6"},ge={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},pe={class:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm"},fe={class:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-2"},be={class:"text-gray-600"},ve={class:"mt-4 p-4 bg-gray-100 rounded-lg border border-gray-200"},xe=["innerHTML"],he={class:"flex justify-between pt-6"},we=["disabled"],ke={class:"space-x-2"},ye=["disabled"],_e=["disabled"],Ce={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ze={key:1,class:"flex items-center"},Te={key:2},Me={class:"p-6"},Ve={class:"text-lg font-medium text-gray-900 mb-4"},Be=["innerHTML"],je={class:"mt-6 flex justify-end"},$e={__name:"Edit",props:{template:{type:Object,required:!0},organization:Object},setup(k){const a=k;y(()=>{var n;return(n=a.organization)!=null&&n.logo?`/storage/${a.organization.logo}`:"/images/default-organization-logo.png"}),y(()=>{var n;return(n=a.organization)!=null&&n.certificate_seal?`/storage/${a.organization.certificate_seal}`:"/images/default-seal.png"});const M={"{{user.name}}":"Full name of the certificate recipient","{{user.email}}":"Email of the recipient","{{quiz.title}}":"Title of the quiz","{{quiz.description}}":"Description of the quiz","{{certificate.number}}":"Certificate serial number","{{certificate.issued_at}}":"Issue date (formatted)","{{certificate.expires_at}}":"Expiry date (formatted)","{{score}}":"Percentage score achieved","{{date}}":"Current date (formatted)","{{organization.name}}":"Organization name","{{organization.logo}}":"Organization logo URL","{{organization.seal}}":"Organization seal/stamp URL"},o=A({name:a.template.name,description:a.template.description,content:a.template.content,background_image:null,is_default:a.template.is_default}),_=y(()=>{var n;return(n=a.template.settings)!=null&&n.background_image?`/storage/${a.template.settings.background_image}`:null}),g=w(null),v=w(!1),C=w(""),x=w(!1),V=n=>{const t=n.target.files[0];if(t){o.background_image=t;const i=new FileReader;i.onload=h=>{g.value=h.target.result},i.readAsDataURL(t)}},B=()=>{o.background_image="REMOVE",g.value=null},j=()=>{C.value=o.content,v.value=!0},$=()=>{o.put(route("examiner.certificate-templates.update",a.template.id),{preserveScroll:!0,onSuccess:()=>{o.background_image!=="REMOVE"&&(o.background_image=null,g.value=null)}})},L=()=>{x.value=!0},E=()=>{T.delete(route("examiner.certificate-templates.destroy",a.template.id),{preserveScroll:!0,onSuccess:()=>{T.visit(route("examiner.certificate-templates.index"))}})};return(n,t)=>(d(),D(I,{title:`Edit Certificate Template: ${k.template.name}`},{header:m(()=>[e("div",J,[e("h2",K," Edit Certificate Template: "+u(k.template.name),1),r(s(U),{href:n.route("examiner.certificate-templates.index"),class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors duration-150"},{default:m(()=>t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),l(" Back to Templates ")])),_:1,__:[8]},8,["href"])])]),default:m(()=>[e("div",Q,[e("div",X,[n.$page.props.flash.success?(d(),c("div",Y,[e("div",Z,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),l(" "+u(n.$page.props.flash.success),1)])])):p("",!0),n.$page.props.flash.error?(d(),c("div",ee,[e("div",te,[t[10]||(t[10]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),l(" "+u(n.$page.props.flash.error),1)])])):p("",!0),e("div",oe,[e("div",se,[e("form",{onSubmit:R($,["prevent"])},[e("div",re,[e("div",ne,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium"},"Template Information",-1)),e("div",null,[r(b,{for:"name",value:"Template Name *"}),r(O,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":t[0]||(t[0]=i=>s(o).name=i),type:"text",class:"mt-1 block w-full focus:ring-green-500 focus:border-green-500 transition-colors duration-200",required:""},null,8,["modelValue"]),r(f,{class:"mt-2",message:s(o).errors.name},null,8,["message"])]),e("div",null,[r(b,{for:"description",value:"Description"}),r(P,{id:"description",modelValue:s(o).description,"onUpdate:modelValue":t[1]||(t[1]=i=>s(o).description=i),class:"mt-1 block w-full focus:ring-green-500 focus:border-green-500 transition-colors duration-200",rows:"3"},null,8,["modelValue"]),r(f,{class:"mt-2",message:s(o).errors.description},null,8,["message"])]),e("div",ie,[r(q,{id:"is_default",checked:s(o).is_default,"onUpdate:checked":t[2]||(t[2]=i=>s(o).is_default=i)},null,8,["checked"]),r(b,{for:"is_default",value:"Set as default template",class:"ml-2"}),r(f,{class:"mt-2",message:s(o).errors.is_default},null,8,["message"])])]),e("div",ae,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium"},"Design",-1)),e("div",null,[r(b,{for:"background_image",value:"Background Image"}),t[15]||(t[15]=e("p",{class:"text-sm text-gray-500 mb-2"}," Recommended size: 3508Ã—2480 pixels (A4 landscape at 300dpi) ",-1)),_.value?(d(),c("div",le,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-700 mb-1"},"Current Background:",-1)),e("img",{src:_.value,class:"max-w-full h-48 object-contain border border-gray-200 rounded-lg shadow-sm",alt:"Current background"},null,8,de),e("button",{type:"button",onClick:B,class:"mt-2 inline-flex items-center text-sm text-red-600 hover:text-red-800 transition-colors duration-150"},t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),l(" Remove Background Image ")]))])):p("",!0),e("input",{id:"background_image",type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition-colors duration-200",accept:"image/jpeg,image/png,image/jpg",onChange:V},null,32),r(f,{class:"mt-2",message:s(o).errors.background_image},null,8,["message"]),g.value?(d(),c("div",ce,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-700 mb-1"},"New Background Preview:",-1)),e("img",{src:g.value,class:"max-w-full h-48 object-contain border border-gray-200 rounded-lg shadow-sm",alt:"Preview"},null,8,me)])):p("",!0)])]),e("div",ue,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium"},"Template Content",-1)),e("div",null,[r(b,{value:"HTML Content *"}),r(F,{modelValue:s(o).content,"onUpdate:modelValue":t[3]||(t[3]=i=>s(o).content=i),class:"mt-1",error:s(o).errors.content},null,8,["modelValue","error"]),r(f,{class:"mt-2",message:s(o).errors.content},null,8,["message"])]),e("div",ge,[t[17]||(t[17]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Available Variables:",-1)),e("div",pe,[(d(),c(H,null,S(M,(i,h)=>e("div",{key:h,class:"flex items-start"},[e("span",fe,u(h),1),e("span",be,u(i),1)])),64))])]),e("div",ve,[t[18]||(t[18]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Landscape Template Preview:",-1)),e("div",{class:"certificate-preview",innerHTML:s(o).content},null,8,xe)])]),e("div",he,[e("button",{type:"button",onClick:j,disabled:s(o).processing||!s(o).content,class:z([{"opacity-50 cursor-not-allowed":s(o).processing||!s(o).content},"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"])},t[20]||(t[20]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),l(" Preview Full Template ")]),10,we),e("div",ke,[e("button",{type:"button",onClick:L,disabled:s(o).processing,class:z([{"opacity-50 cursor-not-allowed":s(o).processing},"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:border-red-900 focus:ring focus:ring-red-300 disabled:opacity-25 transition-colors duration-200"])},t[21]||(t[21]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),l(" Delete Template ")]),10,ye),e("button",{type:"submit",disabled:s(o).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition-colors duration-200"},[s(o).processing?p("",!0):(d(),c("svg",Ce,t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),s(o).processing?(d(),c("span",ze,t[23]||(t[23]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),l(" Updating... ")]))):(d(),c("span",Te,"Update Template"))],8,_e)])])])],32)])])])]),r(N,{show:v.value,onClose:t[5]||(t[5]=i=>v.value=!1),"max-width":"5xl"},{default:m(()=>[e("div",Me,[e("h2",Ve," Template Preview: "+u(s(o).name),1),e("div",{class:"certificate-preview-large",innerHTML:C.value},null,8,Be),e("div",je,[e("button",{onClick:t[4]||(t[4]=i=>v.value=!1),class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Close ")])])]),_:1},8,["show"]),r(W,{show:x.value,onClose:t[7]||(t[7]=i=>x.value=!1)},{title:m(()=>t[24]||(t[24]=[l(" Delete Template ")])),content:m(()=>[l(' Are you sure you want to delete "'+u(s(o).name)+'"? This action cannot be undone. ',1)]),footer:m(()=>[e("button",{onClick:t[6]||(t[6]=i=>x.value=!1),class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),e("button",{onClick:E,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:border-red-900 focus:ring focus:ring-red-300 disabled:opacity-25 transition-colors duration-200 ml-2"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),l(" Delete Template ")]))]),_:1},8,["show"])]),_:1},8,["title"]))}},Fe=G($e,[["__scopeId","data-v-aef023e2"]]);export{Fe as default};
