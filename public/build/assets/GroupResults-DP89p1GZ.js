import{A as C}from"./AppLayout-D8ExmrQZ.js";import{f as w,c as b,o as m,w as f,a as e,b as u,d as k,k as A,t as S,j as D,S as z}from"./app-QoN49EH_.js";import{S as p}from"./SummaryCard-CdFozkC4.js";import{Q as B}from"./QuestionStatsTable-DEbC-A0R.js";import{A as N}from"./AttemptsTable-C-8erVKs.js";import{B as j}from"./BarChart-IK2ku-Vi.js";import{L as M}from"./LineChart-3hLSmLh_.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./CheckCircleIcon-BtP7Z0kL.js";import"./ClockIcon-BmQ-BG-4.js";import"./Pagination-B-rZssAI.js";import"./chart-DUfl3Dpl.js";const $={class:"flex justify-between items-center"},O={class:"font-semibold text-xl text-gray-800 leading-tight"},T={class:"py-6"},V={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},L={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},G={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200"},U={class:"chart-container"},F={key:1,class:"text-gray-500 text-center py-8"},I={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200"},P={class:"chart-container"},Q={key:1,class:"text-gray-500 text-center py-8"},J={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-100"},W={class:"p-6 bg-white border-b border-gray-200"},Z={class:"flex justify-between items-center mb-4"},H=["disabled"],K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},X={class:"p-6 bg-white border-b border-gray-200"},Y={__name:"GroupResults",props:{quiz:{type:Object,required:!0,default:()=>({})},group:{type:Object,required:!0,default:()=>({name:"",members_count:0})},attempts:{type:Object,required:!0,default:()=>({data:[],links:[],meta:{total:0}}),validator:r=>r.data&&Array.isArray(r.data)},questionStats:{type:Array,required:!0,default:()=>[]},averageScore:{type:Number,required:!0,default:0},passRate:{type:Number,required:!0,default:0},totalAttempts:{type:Number,default:0},allAttempts:{type:Array,default:()=>[]}},setup(r){const l=r,h=w(()=>{var a;if(!((a=l.allAttempts)!=null&&a.length))return null;const s=l.allAttempts.map(i=>i.percentage?Math.floor(i.percentage/10)*10:0),t=Array(10).fill(0);return s.forEach(i=>{const o=Math.min(Math.floor(i/10),9);t[o]++}),{labels:["0-10%","10-20%","20-30%","30-40%","40-50%","50-60%","60-70%","70-80%","80-90%","90-100%"],datasets:[{label:"Number of Attempts",data:t,backgroundColor:"#10B981"}]}}),g=w(()=>{var i;if(!((i=l.allAttempts)!=null&&i.length))return null;const s=l.allAttempts.reduce((o,d)=>{if(!d.completed_at)return o;const c=new Date(d.completed_at).toISOString().split("T")[0];return o[c]=(o[c]||0)+1,o},{}),t=Object.keys(s).sort((o,d)=>new Date(o)-new Date(d));return{labels:t.map(o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Attempts Completed",data:t.map(o=>s[o]),borderColor:"#10B981",backgroundColor:"#10B98120",borderWidth:2,tension:.1,fill:!0}]}}),v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(s){return`${s.dataset.label}: ${s.parsed.y}`}}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}},_=()=>{var d;if(!((d=l.attempts.data)!=null&&d.length))return;const s=["Name","Email","Score","Status","Time Spent","Completed At"],t=l.attempts.data.map(n=>{var c,y,x;return[((c=n.user)==null?void 0:c.name)||"Unknown",((y=n.user)==null?void 0:y.email)||"",`${((x=n.percentage)==null?void 0:x.toFixed(1))||0}%`,n.is_passed?"Passed":"Failed",q(n.time_spent),n.completed_at?new Date(n.completed_at).toLocaleString():"N/A"]});let a="data:text/csv;charset=utf-8,"+s.join(",")+`
`+t.map(n=>n.join(",")).join(`
`);const i=encodeURI(a),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",`${l.quiz.title}_${l.group.name}_results.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},q=s=>{if(!s)return"N/A";const t=Math.floor(s/60),a=s%60;return`${t}m ${a}s`};return(s,t)=>(m(),b(C,{title:`Group Results - ${r.group.name}`},{header:f(()=>[e("div",$,[e("h2",O,S(r.quiz.title)+" - "+S(r.group.name)+" Results ",1),u(D(z),{href:s.route("examiner.quizzes.analysis.index",{quiz:r.quiz.id}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:f(()=>t[0]||(t[0]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),A(" Back to Full Results ")])),_:1,__:[0]},8,["href"])])]),default:f(()=>{var a;return[e("div",T,[e("div",V,[e("div",E,[u(p,{title:"Group Members",value:r.group.members_count||0,icon:"users",color:"green"},null,8,["value"]),u(p,{title:"Attempts",value:r.totalAttempts||0,icon:"clipboard-document",color:"green"},null,8,["value"]),u(p,{title:"Average Score",value:`${Math.round(r.averageScore)}%`,icon:"chart-bar",color:"green"},null,8,["value"]),u(p,{title:"Pass Rate",value:`${Math.round(r.passRate)}%`,icon:"check-circle",color:"green"},null,8,["value"])]),e("div",L,[e("div",G,[t[1]||(t[1]=e("h3",{class:"text-lg font-medium mb-4"},"Score Distribution",-1)),e("div",U,[h.value?(m(),b(j,{key:0,data:h.value,options:v},null,8,["data"])):(m(),k("div",F," No score data available "))])]),e("div",I,[t[2]||(t[2]=e("h3",{class:"text-lg font-medium mb-4"},"Completion Over Time",-1)),e("div",P,[g.value?(m(),b(M,{data:g.value,options:v,key:JSON.stringify(g.value)},null,8,["data"])):(m(),k("div",Q," No completion data available "))])])]),e("div",J,[e("div",W,[e("div",Z,[t[4]||(t[4]=e("h3",{class:"text-lg font-medium"},"Member Attempts",-1)),e("button",{onClick:_,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition",disabled:!((a=r.attempts.data)!=null&&a.length)},t[3]||(t[3]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),A(" Export to CSV ")]),8,H)]),u(N,{attempts:r.attempts,"quiz-id":r.quiz.id},null,8,["attempts","quiz-id"])])]),e("div",K,[e("div",X,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium mb-4"},"Question Performance",-1)),u(B,{stats:r.questionStats,quiz:r.quiz},null,8,["stats","quiz"])])])])])]}),_:1},8,["title"]))}},pe=R(Y,[["__scopeId","data-v-6f8f0583"]]);export{pe as default};
