import{d as o,o as n,a as e,x as T,f as c,c as p,w as y,t as l,k as m,h as u,b as d,j as a,g as $,e as z,A as k,S as j,n as V,W as v}from"./app-CbDReEQq.js";import{P}from"./PublicLayout-BZRB2nGU.js";import{_ as A}from"./InputLabel-D1WGklw0.js";import{_ as M}from"./InputError-BVd51EBO.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as L}from"./ClockIcon-D3GhzxEM.js";import{r as B,a as N}from"./CheckCircleIcon-DPFubld_.js";function H(i,s){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}const F={class:"py-12"},G={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},O={class:"px-6 py-5 sm:px-8 sm:py-6 border-b border-gray-200 bg-green-50"},U={class:"text-2xl sm:text-3xl font-bold text-gray-900"},W={class:"mt-2 flex flex-wrap items-center text-sm text-gray-600 gap-x-4 gap-y-1"},J={class:"flex items-center"},K={class:"px-6 py-5 sm:px-8 sm:py-6"},X={class:"mb-8"},Z={class:"text-lg font-semibold text-gray-900 mb-3"},ee={class:"prose max-w-none text-gray-600 bg-gray-50 p-4 rounded-md border border-gray-200"},te=["innerHTML"],se={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},ie={class:"bg-white p-4 rounded-md border border-gray-200 shadow-sm"},ne={class:"text-md font-medium text-gray-900 flex items-center mb-3"},re={class:"space-y-2 text-sm text-gray-600"},oe={class:"flex items-start"},ae={key:0,class:"flex items-start"},le={class:"font-medium"},ue={key:1,class:"flex items-start"},de={class:"font-medium"},me={class:"bg-white p-4 rounded-md border border-gray-200 shadow-sm"},ce={class:"text-md font-medium text-gray-900 flex items-center mb-3"},ge={class:"space-y-2 text-sm text-gray-600"},fe={class:"flex items-start"},xe={class:"font-medium"},be={key:0,class:"flex items-start"},he={class:"font-medium"},pe={class:"flex flex-col items-center"},ve={key:0,class:"text-center mb-6"},we={key:0},_e={key:0},qe={key:1},ye=["disabled"],ze={key:0},ke={key:1},Ae={key:1},Me={key:1,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 w-full max-w-md"},Le={key:2,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 w-full max-w-md"},Be={key:3,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 w-full max-w-md"},Ne={class:"flex"},Qe={class:"ml-3"},Se={class:"text-sm text-yellow-700"},Ce={key:0},De={key:1},Ee={key:4,class:"mb-2"},Re=["disabled"],Te={__name:"QuizLanding",props:{quiz:Object,organisation:String,attemptsRemaining:[Number,null],isAuthenticated:Boolean,isAssigned:Boolean,remainingAttempt:Boolean,meta:Object},setup(i){const s=i,x=g=>new Date(g).toLocaleString(),Q=()=>{v.post(route("examinee.start",s.quiz.id),{},{onSuccess:()=>{}})},r=T({name:"",email:""}),S=()=>{if(s.quiz.require_guest_info){if(s.quiz.guest_info_required==="name"||s.quiz.guest_info_required,s.quiz.guest_info_required==="email"||s.quiz.guest_info_required,r.clearErrors(),(s.quiz.guest_info_required==="name"||s.quiz.guest_info_required==="both")&&!r.name.trim()){r.setError("name","Name is required");return}if(s.quiz.guest_info_required==="email"||s.quiz.guest_info_required==="both"){if(!r.email.trim()){r.setError("email","Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){r.setError("email","Please enter a valid email address");return}}v.post(route("quiz.start.guest",{quiz:s.quiz.id}),{guest_name:r.name,guest_email:r.email})}else v.post(route("quiz.start.guest",{quiz:s.quiz.id}))},C=c(()=>s.quiz.question_pools&&s.quiz.question_pools.length>0),D=c(()=>C.value?s.quiz.question_pools.reduce((g,t)=>{var q;const f=((q=t.pivot)==null?void 0:q.questions_to_show)??t.questions_count;return g+f},0):0),w=c(()=>s.quiz.questions.length+D.value),b=new Date,E=c(()=>s.quiz.starts_at&&new Date(s.quiz.starts_at)>b),R=c(()=>s.quiz.ends_at&&new Date(s.quiz.ends_at)<b),_=c(()=>s.quiz.starts_at&&new Date(s.quiz.starts_at)>b||s.quiz.ends_at&&new Date(s.quiz.ends_at)<b?!1:(s.remainingAttempt,!0)),h=c(()=>s.isAuthenticated&&s.isAssigned&&(s.attemptsRemaining===null||s.attemptsRemaining>0)&&_.value);return(g,t)=>(n(),p(P,{title:`${i.quiz.title}`},{default:y(()=>[e("div",F,[e("div",G,[e("div",I,[e("div",O,[e("h1",U,l(i.quiz.title),1),e("div",W,[e("span",J,[t[2]||(t[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+l(Number(w.value))+" "+l(w.value===1?"question":"questions"),1)])])]),e("div",K,[e("div",X,[e("h2",Z,"From "+l(i.organisation),1),e("div",ee,[e("div",{innerHTML:i.quiz.instructions||"<p class='text-gray-500 italic'>No specific instructions provided.</p>"},null,8,te)])]),i.quiz.quiz_type!=="survey"?(n(),o("div",se,[e("div",ie,[e("h3",ne,[d(a(L),{class:"h-5 w-5 mr-2 text-green-600"}),t[3]||(t[3]=e("span",{class:"font-medium text-green-700"},"Timing",-1))]),e("ul",re,[e("li",oe,[d(a(L),{class:"h-4 w-4 mt-0.5 mr-2 text-gray-400 flex-shrink-0"}),e("span",null,l(i.quiz.time_limit?`${i.quiz.time_limit} minutes`:"No time limit"),1)]),i.quiz.starts_at?(n(),o("li",ae,[d(a(B),{class:"h-4 w-4 mt-0.5 mr-2 text-gray-400 flex-shrink-0"}),e("span",null,[t[4]||(t[4]=m("Available from: ")),e("span",le,l(x(i.quiz.starts_at)),1)])])):u("",!0),i.quiz.ends_at?(n(),o("li",ue,[d(a(B),{class:"h-4 w-4 mt-0.5 mr-2 text-gray-400 flex-shrink-0"}),e("span",null,[t[5]||(t[5]=m("Available until: ")),e("span",de,l(x(i.quiz.ends_at)),1)])])):u("",!0)])]),e("div",me,[e("h3",ce,[d(a(N),{class:"h-5 w-5 mr-2 text-green-600"}),t[6]||(t[6]=e("span",{class:"font-medium text-green-700"},"Grading",-1))]),e("ul",ge,[e("li",fe,[d(a(N),{class:"h-4 w-4 mt-0.5 mr-2 text-gray-400 flex-shrink-0"}),e("span",null,[t[7]||(t[7]=m("Passing score: ")),e("span",xe,l(i.quiz.passing_score?`${i.quiz.passing_score}%`:"Not specified"),1)])]),i.attemptsRemaining!==null?(n(),o("li",be,[d(a(H),{class:"h-4 w-4 mt-0.5 mr-2 text-gray-400 flex-shrink-0"}),e("span",null,[t[8]||(t[8]=m("Attempts remaining: ")),e("span",he,l(i.attemptsRemaining),1)])])):u("",!0)])])])):u("",!0),e("div",pe,[i.isAuthenticated?i.isAssigned?i.attemptsRemaining!==null&&i.attemptsRemaining<=0?(n(),o("div",Le,t[12]||(t[12]=[e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("p",{class:"text-sm text-red-700"},[e("span",{class:"font-medium"},"No Attempts Left."),m(" You have no attempts remaining for this quiz. ")])])],-1)]))):_.value?(n(),o("div",Ee,[e("button",{onClick:Q,disabled:!h.value,class:V({"opacity-50 cursor-not-allowed":!h.value,"inline-flex items-center px-6 py-3 bg-green-600 border border-transparent rounded-md font-semibold text-base text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition ease-in-out duration-150":h.value})},t[15]||(t[15]=[m(" Start Quiz "),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),10,Re)])):(n(),o("div",Be,[e("div",Ne,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Qe,[e("p",Se,[t[13]||(t[13]=e("span",{class:"font-medium"},"Quiz Not Available.",-1)),E.value?(n(),o("span",Ce,"This quiz will be available starting "+l(x(i.quiz.starts_at))+".",1)):u("",!0),R.value?(n(),o("span",De,"This quiz was available until "+l(x(i.quiz.ends_at))+".",1)):u("",!0)])])])])):(n(),o("div",Me,t[11]||(t[11]=[e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("p",{class:"text-sm text-yellow-700"},[e("span",{class:"font-medium"},"Access Denied."),m(" This quiz hasn't been assigned to you. Please contact your instructor for access. ")])])],-1)]))):(n(),o("div",ve,[i.quiz.is_public?(n(),o("div",we,[i.quiz.require_guest_info?(n(),o("form",{key:0,onSubmit:$(S,["prevent"]),class:"w-full max-w-md space-y-4"},[i.quiz.guest_info_required==="name"||i.quiz.guest_info_required==="both"?(n(),o("div",_e,[d(A,{for:"guest_name",value:"Your Name",class:"block text-sm font-medium text-gray-700 mb-1"}),z(e("input",{id:"guest_name","onUpdate:modelValue":t[0]||(t[0]=f=>a(r).name=f),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your name"},null,512),[[k,a(r).name]]),a(r).errors.name?(n(),p(M,{key:0,message:a(r).errors.name,class:"mt-1"},null,8,["message"])):u("",!0)])):u("",!0),i.quiz.guest_info_required==="email"||i.quiz.guest_info_required==="both"?(n(),o("div",qe,[d(A,{for:"guest_email",value:"Your Email",class:"block text-sm font-medium text-gray-700 mb-1"}),z(e("input",{id:"guest_email","onUpdate:modelValue":t[1]||(t[1]=f=>a(r).email=f),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},null,512),[[k,a(r).email]]),a(r).errors.email?(n(),p(M,{key:0,message:a(r).errors.email,class:"mt-1"},null,8,["message"])):u("",!0)])):u("",!0),e("button",{type:"submit",disabled:a(r).processing,class:"inline-flex items-center px-5 py-2.5 bg-green-600 border border-transparent rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition ease-in-out duration-150"},[a(r).processing?(n(),o("span",ze,"Starting...")):(n(),o("span",ke,"Start"))],8,ye)],32)):u("",!0)])):(n(),o("div",Ae,[t[10]||(t[10]=e("p",{class:"text-gray-700 mb-4"},"You need to sign in to access this quiz.",-1)),d(a(j),{href:g.route("login"),class:"inline-flex items-center px-5 py-2.5 bg-green-600 border border-transparent rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition ease-in-out duration-150"},{default:y(()=>t[9]||(t[9]=[m(" Sign In ")])),_:1,__:[9]},8,["href"])]))]))])])])])])]),_:1},8,["title"]))}},Ge=Y(Te,[["__scopeId","data-v-fa6c36ab"]]);export{Ge as default};
