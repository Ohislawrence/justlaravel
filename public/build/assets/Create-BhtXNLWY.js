import{d as k,Q as C,x as D,l as Q,c as $,o as d,w as _,e as m,f as x,a as i,u as t,t as u,j as A,b as l,F as V,h as z,g as b,n as N}from"./app-BYM1Msdw.js";import{A as T}from"./AppLayout-AFbEt38E.js";import{_ as r}from"./InputError-7uXWI0Ax.js";import{_ as o}from"./InputLabel-CQZ4SiqB.js";import{_ as j}from"./PrimaryButton-R068G9lS.js";import{_ as f}from"./TextInput-qokQ35BQ.js";import{_ as P}from"./Textarea-DxdEzXM9.js";import{_ as c}from"./Checkbox-IirE2Kwm.js";import{_ as B,a as q,b as U}from"./RichTextArea-BY8zmCBF.js";import"./multiselect-CWD81P1z.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"font-semibold text-xl text-gray-800 leading-tight"},M={key:0,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},O={class:"bg-green-100 border border-green-400 text-green-2 px-4 py-3 rounded"},R={key:1,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},F={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},G={class:"py-12"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"bg-white shadow-sm sm:rounded-lg"},K={class:"p-6 bg-white border-b border-gray-200"},W={class:"grid grid-cols-1 gap-6"},X={class:"space-y-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z=["value"],ss=["value"],es={class:"space-y-6"},ts={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ls={class:"flex items-center"},as={class:"flex items-center"},is={class:"flex items-center"},os={class:"flex items-center"},rs={class:"flex items-center"},ns={class:"flex items-center"},ds={class:"flex items-center"},ms={class:"space-y-6"},us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cs={class:"space-y-6"},ps={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_s={class:"relative"},fs={key:0,class:"mt-2 text-sm text-gray-600"},gs={class:"relative"},vs={key:0,class:"mt-2 text-sm text-gray-600"},xs={class:"flex items-center justify-end"},bs={__name:"Create",props:{organization:Object,availablePools:Array,quizTypes:Object,industries:Object,availableQuestions:Array,quiz:{type:Object,default:()=>({pools:[]})}},setup(g){const y=g,w=k(null),{flash:v}=C().props,s=D({title:"",description:"",instructions:"",quiz_type:"test",industry:null,is_published:!1,is_public:!1,randomize_questions:!1,randomize_answers:!1,show_correct_answers:!1,show_leaderboard:!1,enable_discussions:!1,max_attempts:null,max_participants:"",time_limit:"",passing_score:"",starts_at:"",ends_at:"",settings:{},pools:y.quiz.pools||[]}),S=Q(()=>s.title&&(!w.value||w.value.getPoolData().every(n=>n.questions.length>0))),I=()=>{const n={...s.data(),max_attempts:s.max_attempts!==null?parseInt(s.max_attempts):null,max_participants:s.max_participants!==null?parseInt(s.max_participants):null,time_limit:s.time_limit!==null?parseInt(s.time_limit):null,passing_score:s.passing_score!==null?parseInt(s.passing_score):null,starts_at:s.starts_at||null,ends_at:s.ends_at||null};s.transform(()=>n).post(route("examiner.quizzes.store",y.organization.id),{onSuccess:()=>{s.reset()},onError:e=>{console.error("Validation errors:",e)}})};k([]);const h=n=>{if(!n)return"";try{const e=new Date(n);if(isNaN(e.getTime()))return n;const a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return e.toLocaleString("en-US",a)}catch(e){return console.error("Error formatting date:",e),n}};return(n,e)=>(d(),$(T,{title:"Create New Quiz"},{header:_(()=>[i("h2",L," Create New Quiz for "+u(g.organization.name),1)]),default:_(()=>[t(v).success?(d(),m("div",M,[i("div",O,u(t(v).success),1)])):x("",!0),t(v).error?(d(),m("div",R,[i("div",F,u(t(v).error),1)])):x("",!0),i("div",G,[i("div",H,[i("div",J,[i("div",K,[i("form",{onSubmit:A(I,["prevent"])},[i("div",W,[i("div",X,[e[20]||(e[20]=i("h3",{class:"text-lg font-medium"},"Basic Information",-1)),i("div",null,[l(o,{for:"title",value:"Quiz Title *"}),l(f,{id:"title",modelValue:t(s).title,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).title=a),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.title},null,8,["message"])]),i("div",null,[l(o,{for:"description",value:"Description"}),l(P,{id:"description",modelValue:t(s).description,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).description=a),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.description},null,8,["message"])]),i("div",null,[l(o,{for:"instructions",value:"Instructions"}),l(B,{id:"instructions",modelValue:t(s).instructions,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).instructions=a),label:"Instructions",error:t(s).errors.instructions},null,8,["modelValue","error"])]),i("div",Y,[i("div",null,[l(o,{for:"quiz_type",value:"Quiz Type *"}),l(q,{id:"quiz_type",modelValue:t(s).quiz_type,"onUpdate:modelValue":e[3]||(e[3]=a=>t(s).quiz_type=a),class:"mt-1 block w-full",required:""},{default:_(()=>[(d(!0),m(V,null,z(g.quizTypes,(a,p)=>(d(),m("option",{key:p,value:p},u(a),9,Z))),128))]),_:1},8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.quiz_type},null,8,["message"])]),i("div",null,[l(o,{for:"industry",value:"Industry"}),l(q,{id:"industry",modelValue:t(s).industry,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).industry=a),class:"mt-1 block w-full"},{default:_(()=>[e[19]||(e[19]=i("option",{value:null},"Select Industry",-1)),(d(!0),m(V,null,z(g.industries,(a,p)=>(d(),m("option",{key:p,value:p},u(a),9,ss))),128))]),_:1,__:[19]},8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.industry},null,8,["message"])])])]),i("div",es,[e[21]||(e[21]=i("h3",{class:"text-lg font-medium"},"Quiz Settings",-1)),i("div",ts,[i("div",ls,[l(c,{id:"is_published",checked:t(s).is_published,"onUpdate:checked":e[5]||(e[5]=a=>t(s).is_published=a)},null,8,["checked"]),l(o,{for:"is_published",value:"Publish Immediately",class:"ml-2"})]),i("div",as,[l(c,{id:"is_public",checked:t(s).is_public,"onUpdate:checked":e[6]||(e[6]=a=>t(s).is_public=a)},null,8,["checked"]),l(o,{for:"is_public",value:"Make Public",class:"ml-2"})]),i("div",is,[l(c,{id:"randomize_questions",checked:t(s).randomize_questions,"onUpdate:checked":e[7]||(e[7]=a=>t(s).randomize_questions=a)},null,8,["checked"]),l(o,{for:"randomize_questions",value:"Randomize Questions",class:"ml-2"})]),i("div",os,[l(c,{id:"randomize_answers",checked:t(s).randomize_answers,"onUpdate:checked":e[8]||(e[8]=a=>t(s).randomize_answers=a)},null,8,["checked"]),l(o,{for:"randomize_answers",value:"Randomize Answers",class:"ml-2"})]),i("div",rs,[l(c,{id:"show_correct_answers",checked:t(s).show_correct_answers,"onUpdate:checked":e[9]||(e[9]=a=>t(s).show_correct_answers=a)},null,8,["checked"]),l(o,{for:"show_correct_answers",value:"Show Correct Answers",class:"ml-2"})]),i("div",ns,[l(c,{id:"show_leaderboard",checked:t(s).show_leaderboard,"onUpdate:checked":e[10]||(e[10]=a=>t(s).show_leaderboard=a)},null,8,["checked"]),l(o,{for:"show_leaderboard",value:"Show Leaderboard",class:"ml-2"})]),i("div",ds,[l(c,{id:"enable_discussions",checked:t(s).enable_discussions,"onUpdate:checked":e[11]||(e[11]=a=>t(s).enable_discussions=a)},null,8,["checked"]),l(o,{for:"enable_discussions",value:"Enable Discussions",class:"ml-2"})])])]),i("div",ms,[e[22]||(e[22]=i("h3",{class:"text-lg font-medium"},"Access Restrictions",-1)),i("div",us,[i("div",null,[l(o,{for:"max_attempts",value:"Max Attempts (0 for unlimited)"}),l(f,{id:"max_attempts",modelValue:t(s).max_attempts,"onUpdate:modelValue":e[12]||(e[12]=a=>t(s).max_attempts=a),type:"number",min:"0",class:"mt-1 block w-full",onInput:e[13]||(e[13]=a=>t(s).max_attempts=a.target.value===""?null:parseInt(a.target.value))},null,8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.max_attempts},null,8,["message"])]),i("div",null,[l(o,{for:"max_participants",value:"Max Participants (0 for unlimited)"}),l(f,{id:"max_participants",modelValue:t(s).max_participants,"onUpdate:modelValue":e[14]||(e[14]=a=>t(s).max_participants=a),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.max_participants},null,8,["message"])]),i("div",null,[l(o,{for:"time_limit",value:"Time Limit (minutes)"}),l(f,{id:"time_limit",modelValue:t(s).time_limit,"onUpdate:modelValue":e[15]||(e[15]=a=>t(s).time_limit=a),type:"number",min:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.time_limit},null,8,["message"])]),i("div",null,[l(o,{for:"passing_score",value:"Passing Score (%)"}),l(f,{id:"passing_score",modelValue:t(s).passing_score,"onUpdate:modelValue":e[16]||(e[16]=a=>t(s).passing_score=a),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),l(r,{class:"mt-2",message:t(s).errors.passing_score},null,8,["message"])])])]),i("div",cs,[e[25]||(e[25]=i("h3",{class:"text-lg font-medium"},"Schedule",-1)),i("div",ps,[i("div",_s,[l(o,{for:"starts_at",value:"Start Date & Time"}),l(U,{id:"starts_at",modelValue:t(s).starts_at,"onUpdate:modelValue":e[17]||(e[17]=a=>t(s).starts_at=a),class:"mt-1 block w-full",placeholder:"Select start date and time"},null,8,["modelValue"]),t(s).starts_at?(d(),m("div",fs,[e[23]||(e[23]=i("strong",null,"Selected:",-1)),b(" "+u(h(t(s).starts_at)),1)])):x("",!0),l(r,{class:"mt-2",message:t(s).errors.starts_at},null,8,["message"])]),i("div",gs,[l(o,{for:"ends_at",value:"End Date & Time"}),l(U,{id:"ends_at",modelValue:t(s).ends_at,"onUpdate:modelValue":e[18]||(e[18]=a=>t(s).ends_at=a),class:"mt-1 block w-full",placeholder:"Select end date and time"},null,8,["modelValue"]),t(s).ends_at?(d(),m("div",vs,[e[24]||(e[24]=i("strong",null,"Selected:",-1)),b(" "+u(h(t(s).ends_at)),1)])):x("",!0),l(r,{class:"mt-2",message:t(s).errors.ends_at},null,8,["message"])])])]),i("div",xs,[l(j,{class:N({"opacity-25":t(s).processing}),disabled:t(s).processing||!S.value},{default:_(()=>e[26]||(e[26]=[b(" Create Quiz ")])),_:1,__:[26]},8,["class","disabled"])])])],32)])])])])]),_:1}))}},Ds=E(bs,[["__scopeId","data-v-dbb7a101"]]);export{Ds as default};
