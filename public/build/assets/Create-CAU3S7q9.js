import{i as q,P as A,x as C,f as z,z as U,c as N,o,w as v,d as n,h as c,a,j as s,t as u,g as P,b as l,F as b,l as x,e as E,q as Q,k as S,n as j}from"./app-kQpkt3Sc.js";import{A as R}from"./AppLayout-BYZkZj5l.js";import{_ as d}from"./InputError-C_fJ27Qq.js";import{_ as r}from"./InputLabel-BjJlasTh.js";import{_ as g}from"./TextInput-od1qMv9T.js";import{_ as $}from"./Textarea-D9IFMUpV.js";import{_}from"./Checkbox-tdsXQ9zc.js";import{_ as h}from"./SelectInput-CaiD_syd.js";import{_ as D}from"./DateTimePicker-B8C_aDdR.js";import{R as I}from"./RichtextEditorNormal-68Psplxn.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./format-3b8xIHeq.js";const G={class:"font-semibold text-xl text-gray-800 leading-tight"},O={key:0,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},L={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},F={key:1,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},W={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},Y={class:"py-12"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"bg-white shadow-sm sm:rounded-lg"},K={class:"p-6 bg-white border-b border-gray-200"},X={class:"grid grid-cols-1 gap-6"},Z={class:"space-y-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se=["value"],te=["value"],ie={key:0},ae={class:"space-y-6"},le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},re={class:"flex items-center"},oe={class:"flex items-center"},ne={class:"flex items-center"},de={class:"flex items-center"},ue={class:"flex items-center"},me={class:"flex items-center"},ce={class:"mb-4"},_e={class:"flex items-center"},pe={key:0,class:"space-y-2 pt-4 mt-1"},fe={class:"flex items-center"},ge={key:0,class:"ml-6 space-y-3"},ye={class:"space-y-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},be={class:"space-y-6"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke={class:"relative"},he={class:"relative"},we={class:"space-y-6"},Ve=["value"],qe={key:0,class:"mt-3 p-3 bg-green-50 rounded"},ze={class:"font-medium"},Ue={class:"mt-2"},Se={key:0},De={key:1},Ie={class:"space-y-6"},Te={class:"card mt-4"},Me={class:"card-body"},Ae={class:"form-check form-switch mb-3"},Ce={key:0,class:"mt-3"},Ne={class:"mb-3"},Pe=["value"],Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qe={class:"flex items-center justify-end"},je=["disabled"],Re={__name:"Create",props:{organization:Object,availablePools:Array,gradingSystems:Array,quizTypes:Object,industries:Object,availableQuestions:Array,quiz:{type:Object,default:()=>({pools:[]})},certificateTemplates:{type:Array,required:!0},initialData:{type:Object,default:()=>({enable_certificates:!1,certificate_template_id:null,certificate_pass_percentage:70,certificate_expiry_days:null})}},setup(y){const p=y,V=q(null),{flash:k}=A().props,e=C({title:"",description:"",instructions:"",quiz_type:"",grading_system_id:null,industry:null,is_published:!1,is_public:!1,is_proctored:!1,randomize_questions:!1,randomize_answers:!1,show_correct_answers:!1,show_leaderboard:!1,enable_discussions:!1,require_guest_info:!1,guest_info_required:"none",max_attempts:null,max_participants:"",time_limit:"",passing_score:"",starts_at:"",ends_at:"",settings:{},pools:p.quiz.pools||[],survey_thank_you_message:"",enable_certificates:p.initialData.enable_certificates,certificate_template_id:p.initialData.certificate_template_id,certificate_pass_percentage:p.initialData.certificate_pass_percentage,certificate_expiry_days:p.initialData.certificate_expiry_days}),w=z(()=>e.grading_system_id?p.gradingSystems.find(m=>m.id==e.grading_system_id):null),T=z(()=>e.title&&(!V.value||V.value.getPoolData().every(m=>m.questions.length>0))),M=()=>{const m={...e.data(),max_attempts:e.max_attempts!==null?parseInt(e.max_attempts):null,max_participants:e.max_participants!==null?parseInt(e.max_participants):null,time_limit:e.time_limit!==null?parseInt(e.time_limit):null,passing_score:e.passing_score!==null?parseInt(e.passing_score):null,starts_at:e.starts_at?e.starts_at:null,ends_at:e.ends_at?e.ends_at:null,enable_certificates:e.enable_certificates,certificate_template_id:e.certificate_template_id,certificate_pass_percentage:e.certificate_pass_percentage!==null?parseInt(e.certificate_pass_percentage):70,certificate_expiry_days:e.certificate_expiry_days!==null?parseInt(e.certificate_expiry_days):null,grading_system_id:e.grading_system_id!==null?parseInt(e.grading_system_id):null};e.transform(()=>m).post(route("examiner.quizzes.store",p.organization.id),{onSuccess:()=>{e.reset()},onError:t=>{console.error("Validation errors:",t)}})};return q([]),U(()=>e.is_public,m=>{m||(e.require_guest_info=!1,e.guest_info_required="none")}),U(()=>e.require_guest_info,m=>{m||(e.guest_info_required="none")}),(m,t)=>(o(),N(R,{title:"Create New Quiz"},{header:v(()=>[a("h2",G," Create New Quiz for "+u(y.organization.name),1)]),default:v(()=>[s(k).success?(o(),n("div",O,[a("div",L,u(s(k).success),1)])):c("",!0),s(k).error?(o(),n("div",F,[a("div",W,u(s(k).error),1)])):c("",!0),a("div",Y,[a("div",H,[a("div",J,[a("div",K,[a("form",{onSubmit:P(M,["prevent"])},[a("div",X,[a("div",Z,[t[30]||(t[30]=a("h3",{class:"text-lg font-medium"},"Basic Information",-1)),a("div",null,[l(r,{for:"title",value:"Quiz Title *"}),l(g,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":t[0]||(t[0]=i=>s(e).title=i),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),a("div",null,[l(r,{for:"description",value:"Description"}),l(I,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":t[1]||(t[1]=i=>s(e).description=i),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.description},null,8,["message"])]),a("div",null,[l(r,{for:"instructions",value:"Instructions"}),l(I,{id:"instructions",modelValue:s(e).instructions,"onUpdate:modelValue":t[2]||(t[2]=i=>s(e).instructions=i),label:"Instructions",error:s(e).errors.instructions},null,8,["modelValue","error"])]),a("div",ee,[a("div",null,[l(r,{for:"quiz_type",value:"Quiz Type *"}),l(h,{id:"quiz_type",modelValue:s(e).quiz_type,"onUpdate:modelValue":t[3]||(t[3]=i=>s(e).quiz_type=i),class:"mt-1 block w-full",required:""},{default:v(()=>[(o(!0),n(b,null,x(y.quizTypes,(i,f)=>(o(),n("option",{key:f,value:f},u(i),9,se))),128))]),_:1},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.quiz_type},null,8,["message"])]),a("div",null,[l(r,{for:"industry",value:"Industry"}),l(h,{id:"industry",modelValue:s(e).industry,"onUpdate:modelValue":t[4]||(t[4]=i=>s(e).industry=i),class:"mt-1 block w-full"},{default:v(()=>[t[29]||(t[29]=a("option",{value:null},"Select Industry",-1)),(o(!0),n(b,null,x(y.industries,(i,f)=>(o(),n("option",{key:f,value:f},u(i),9,te))),128))]),_:1,__:[29]},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.industry},null,8,["message"])]),s(e).quiz_type==="survey"?(o(),n("div",ie,[l(r,{for:"survey_thank_you_message",value:"Survey Thank You Message"}),l($,{id:"survey_thank_you_message",modelValue:s(e).survey_thank_you_message,"onUpdate:modelValue":t[5]||(t[5]=i=>s(e).survey_thank_you_message=i),class:"mt-1 block w-full",rows:"3",placeholder:"Thank you for completing our survey!"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.survey_thank_you_message},null,8,["message"])])):c("",!0)])]),a("div",ae,[t[31]||(t[31]=a("h3",{class:"text-lg font-medium"},"Quiz Settings",-1)),a("div",le,[a("div",re,[l(_,{id:"is_published",checked:s(e).is_published,"onUpdate:checked":t[6]||(t[6]=i=>s(e).is_published=i)},null,8,["checked"]),l(r,{for:"is_published",value:"Publish Immediately",class:"ml-2"})]),a("div",oe,[l(_,{id:"is_proctored",checked:s(e).is_proctored,"onUpdate:checked":t[7]||(t[7]=i=>s(e).is_proctored=i)},null,8,["checked"]),l(r,{for:"is_proctored",value:"Use Proctor",class:"ml-2"})]),a("div",ne,[l(_,{id:"randomize_questions",checked:s(e).randomize_questions,"onUpdate:checked":t[8]||(t[8]=i=>s(e).randomize_questions=i)},null,8,["checked"]),l(r,{for:"randomize_questions",value:"Randomize Questions",class:"ml-2"})]),a("div",de,[l(_,{id:"randomize_answers",checked:s(e).randomize_answers,"onUpdate:checked":t[9]||(t[9]=i=>s(e).randomize_answers=i)},null,8,["checked"]),l(r,{for:"randomize_answers",value:"Randomize Answers",class:"ml-2"})]),a("div",ue,[l(_,{id:"show_correct_answers",checked:s(e).show_correct_answers,"onUpdate:checked":t[10]||(t[10]=i=>s(e).show_correct_answers=i)},null,8,["checked"]),l(r,{for:"show_correct_answers",value:"Show Correct Answers",class:"ml-2"})]),a("div",me,[l(_,{id:"show_leaderboard",checked:s(e).show_leaderboard,"onUpdate:checked":t[11]||(t[11]=i=>s(e).show_leaderboard=i)},null,8,["checked"]),l(r,{for:"show_leaderboard",value:"Show Leaderboard",class:"ml-2"})])])]),t[40]||(t[40]=a("h3",{class:"text-lg font-medium"},"Public Access Settings",-1)),a("div",ce,[a("div",_e,[l(_,{id:"is_public",checked:s(e).is_public,"onUpdate:checked":t[12]||(t[12]=i=>s(e).is_public=i)},null,8,["checked"]),l(r,{for:"is_public",value:"Make this quiz public (allow guests without accounts)",class:"ml-2"})]),l(d,{message:s(e).errors.is_public,class:"mt-2"},null,8,["message"])]),s(e).is_public?(o(),n("div",pe,[a("div",fe,[l(_,{id:"require_guest_info",checked:s(e).require_guest_info,"onUpdate:checked":t[13]||(t[13]=i=>s(e).require_guest_info=i)},null,8,["checked"]),l(r,{for:"require_guest_info",value:"Require guest information",class:"ml-2"})]),l(d,{message:s(e).errors.require_guest_info,class:"mt-2"},null,8,["message"]),s(e).require_guest_info?(o(),n("div",ge,[a("div",null,[l(r,{for:"guest_info_required",value:"What information should guests provide?"}),E(a("select",{id:"guest_info_required","onUpdate:modelValue":t[14]||(t[14]=i=>s(e).guest_info_required=i),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},t[32]||(t[32]=[a("option",{value:"none"},"No information required",-1),a("option",{value:"name"},"Name only",-1),a("option",{value:"email"},"Email only",-1),a("option",{value:"both"},"Name and Email",-1)]),512),[[Q,s(e).guest_info_required]]),l(d,{message:s(e).errors.guest_info_required,class:"mt-2"},null,8,["message"]),t[33]||(t[33]=a("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-3"},[a("p",{class:"text-sm text-blue-800"},[a("strong",null,"Note:"),S(" Guests will be asked to provide this information before starting the quiz. ")])],-1))])])):c("",!0)])):c("",!0),a("div",ye,[t[34]||(t[34]=a("h3",{class:"text-lg font-medium"},"Access Restrictions",-1)),a("div",ve,[a("div",null,[l(r,{for:"max_attempts",value:"Max Attempts (0 for unlimited)"}),l(g,{id:"max_attempts",modelValue:s(e).max_attempts,"onUpdate:modelValue":t[15]||(t[15]=i=>s(e).max_attempts=i),type:"number",min:"0",class:"mt-1 block w-full",onInput:t[16]||(t[16]=i=>s(e).max_attempts=i.target.value===""?null:parseInt(i.target.value))},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.max_attempts},null,8,["message"])]),a("div",null,[l(r,{for:"max_participants",value:"Max Participants (0 for unlimited)"}),l(g,{id:"max_participants",modelValue:s(e).max_participants,"onUpdate:modelValue":t[17]||(t[17]=i=>s(e).max_participants=i),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.max_participants},null,8,["message"])]),a("div",null,[l(r,{for:"time_limit",value:"Time Limit (minutes)"}),l(g,{id:"time_limit",modelValue:s(e).time_limit,"onUpdate:modelValue":t[18]||(t[18]=i=>s(e).time_limit=i),type:"number",min:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.time_limit},null,8,["message"])]),a("div",null,[l(r,{for:"passing_score",value:"Passing Score (%)"}),l(g,{id:"passing_score",modelValue:s(e).passing_score,"onUpdate:modelValue":t[19]||(t[19]=i=>s(e).passing_score=i),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.passing_score},null,8,["message"])])])]),a("div",be,[t[35]||(t[35]=a("h3",{class:"text-lg font-medium"},"Schedule",-1)),a("div",xe,[a("div",ke,[l(r,{for:"starts_at",value:"Start Date & Time"}),l(D,{id:"starts_at",modelValue:s(e).starts_at,"onUpdate:modelValue":[t[20]||(t[20]=i=>s(e).starts_at=i),t[21]||(t[21]=i=>s(e).starts_at=i)],class:"mt-1 block w-full","display-format":"MMM d, yyyy h:mm a","model-value":s(e).starts_at,label:"Start Date & Time"},null,8,["modelValue","model-value"]),l(d,{class:"mt-2",message:s(e).errors.starts_at},null,8,["message"])]),a("div",he,[l(r,{for:"ends_at",value:"End Date & Time"}),l(D,{id:"ends_at",modelValue:s(e).ends_at,"onUpdate:modelValue":[t[22]||(t[22]=i=>s(e).ends_at=i),t[23]||(t[23]=i=>s(e).ends_at=i)],class:"mt-1 block w-full","display-format":"MMM d, yyyy h:mm a","model-value":s(e).ends_at,label:"End Date & Time"},null,8,["modelValue","model-value"]),l(d,{class:"mt-2",message:s(e).errors.ends_at},null,8,["message"])])])]),a("div",we,[t[37]||(t[37]=a("h3",{class:"text-lg font-medium"},"Grading System",-1)),a("div",null,[l(r,{for:"grading_system_id",value:"Select Grading System"}),l(h,{id:"grading_system_id",modelValue:s(e).grading_system_id,"onUpdate:modelValue":t[24]||(t[24]=i=>s(e).grading_system_id=i),class:"mt-1 block w-full"},{default:v(()=>[t[36]||(t[36]=a("option",{value:null},"Default (Pass/Fail)",-1)),(o(!0),n(b,null,x(y.gradingSystems,i=>(o(),n("option",{key:i.id,value:i.id},u(i.name)+" ("+u(i.type)+") ",9,Ve))),128))]),_:1,__:[36]},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.grading_system_id},null,8,["message"]),w.value?(o(),n("div",qe,[a("h4",ze,u(w.value.name)+" Grade Ranges:",1),a("div",Ue,[(o(!0),n(b,null,x(w.value.grade_ranges,(i,f)=>(o(),n("div",{key:f,class:"text-sm"},[S(u(i.min)+"% - "+u(i.max)+"%: "+u(i.grade)+" ",1),i.points?(o(),n("span",Se,"("+u(i.points)+" points)",1)):c("",!0),i.interpretation?(o(),n("span",De,"- "+u(i.interpretation),1)):c("",!0)]))),128))])])):c("",!0)])]),a("div",Ie,[t[39]||(t[39]=a("h3",{class:"text-lg font-medium"},"Certificate Settings",-1)),a("div",Te,[a("div",Me,[a("div",Ae,[l(_,{id:"enable_certificates",checked:s(e).enable_certificates,"onUpdate:checked":t[25]||(t[25]=i=>s(e).enable_certificates=i)},null,8,["checked"]),l(r,{for:"enable_certificates",value:"Enable certificates for this quiz",class:"ml-2"}),l(d,{class:"mt-2",message:s(e).errors.enable_certificates},null,8,["message"])]),s(e).enable_certificates?(o(),n("div",Ce,[a("div",Ne,[l(r,{for:"certificate_template_id",value:"Certificate Template"}),l(h,{id:"certificate_template_id",modelValue:s(e).certificate_template_id,"onUpdate:modelValue":t[26]||(t[26]=i=>s(e).certificate_template_id=i),class:"mt-1 block w-full"},{default:v(()=>[t[38]||(t[38]=a("option",{value:null},"Use Default Template",-1)),(o(!0),n(b,null,x(y.certificateTemplates,i=>(o(),n("option",{key:i.id,value:i.id},u(i.name),9,Pe))),128))]),_:1,__:[38]},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.certificate_template_id},null,8,["message"])]),a("div",Ee,[a("div",null,[l(r,{for:"certificate_pass_percentage",value:"Passing Percentage"}),l(g,{id:"certificate_pass_percentage",modelValue:s(e).certificate_pass_percentage,"onUpdate:modelValue":t[27]||(t[27]=i=>s(e).certificate_pass_percentage=i),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.certificate_pass_percentage},null,8,["message"])]),a("div",null,[l(r,{for:"certificate_expiry_days",value:"Expiry Days (leave blank for no expiry)"}),l(g,{id:"certificate_expiry_days",modelValue:s(e).certificate_expiry_days,"onUpdate:modelValue":t[28]||(t[28]=i=>s(e).certificate_expiry_days=i),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.certificate_expiry_days},null,8,["message"])])])])):c("",!0)])])]),a("div",Qe,[a("button",{type:"submit",class:j(["inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",{"opacity-25":s(e).processing}]),disabled:s(e).processing||!T.value}," Create Quiz ",10,je)])])],32)])])])])]),_:1}))}},es=B(Re,[["__scopeId","data-v-fe233d9b"]]);export{es as default};
