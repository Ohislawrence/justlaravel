import{i as N,f as i,c as w,o as l,w as x,a as e,d as c,h,t as o,n as _,b as f,e as P,q as $,F as k,l as q,j as C,S,k as A}from"./app-BL-VfoCG.js";import{A as L}from"./AppLayout-CMm9B8wa.js";import{_ as V}from"./Pagination-BF7d3j7M.js";import{D as H}from"./DoughnutChart-MHIdNB_o.js";import{B as J}from"./BarChart-0cWkvQwP.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./chart-DUfl3Dpl.js";const G={class:"flex justify-between items-center"},K={class:"font-semibold text-xl text-gray-800 leading-tight"},W={class:"flex space-x-2"},X={class:"py-6"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-100"},ee={class:"p-6 bg-white border-b border-gray-200"},te={class:"flex flex-col md:flex-row md:justify-between md:items-start gap-4"},se={class:"flex-1"},oe={class:"prose max-w-none"},re={class:"whitespace-pre-wrap"},ne={key:0,class:"text-gray-600 mt-2"},ie={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},ae={class:"font-medium"},le={class:"font-medium"},de={class:"font-medium"},ce={class:"md:w-64"},ue={class:"p-4 bg-green-50 rounded-lg border border-green-200"},me={class:"space-y-3"},pe={class:"text-xl font-bold"},ge={class:"text-xl font-bold"},xe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},fe={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200"},ve={key:0,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200"},he={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200"},ye={class:"space-y-4"},be={class:"font-medium"},we={class:"font-medium"},_e={class:"font-medium"},ke={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},qe={class:"p-6 bg-white border-b border-gray-200"},Ce={class:"flex justify-between items-center mb-4"},Se={class:"flex space-x-2"},Ae={class:"overflow-x-auto"},ze={class:"min-w-full divide-y divide-gray-200"},Be={class:"bg-white divide-y divide-gray-200"},Oe={class:"px-6 py-4 whitespace-nowrap"},Me={class:"flex items-center"},je={class:"flex-shrink-0 h-10 w-10"},De=["src"],Te={class:"ml-4"},Ee={class:"text-sm font-medium text-gray-900"},Fe={class:"text-sm text-gray-500"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Qe={key:0},Ie={key:1},Ne={key:2},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap"},Ve={__name:"QuestionDetail",props:{quiz:{type:Object,required:!0},question:{type:Object,required:!0},responses:{type:Object,required:!0}},setup(r){const d=r,m=N("all"),u=i(()=>d.responses.total),p=i(()=>d.responses.data.filter(s=>s.is_correct).length),v=i(()=>Math.round(p.value/u.value*100)),z=i(()=>u.value===0?0:d.responses.data.reduce((s,t)=>s+t.points_earned,0)/u.value),y=i(()=>v.value>=80?"Easy":v.value>=50?"Medium":"Hard"),B=i(()=>{switch(y.value){case"Easy":return"text-green-600";case"Medium":return"text-yellow-600";case"Hard":return"text-red-600";default:return""}}),O=i(()=>u.value===0?0:d.responses.data.reduce((s,t)=>s+(t.time_spent||0),0)/u.value),M=i(()=>{const s=d.responses.data.filter(t=>t.is_correct);return s.length?Math.min(...s.map(t=>t.time_spent||0)):0}),j=i(()=>{const s=d.responses.data.filter(t=>t.is_correct);return s.length?Math.max(...s.map(t=>t.time_spent||0)):0}),D=i(()=>({labels:["Correct","Incorrect"],datasets:[{data:[p.value,u.value-p.value],backgroundColor:["#10B981","#EF4444"],hoverOffset:4}]})),T=i(()=>{if(question.type!=="multiple_choice")return null;const s={};return question.options.forEach((t,a)=>{s[a]=0}),d.responses.data.forEach(t=>{const a=question.options.findIndex(n=>n===t.answer||n.text===t.answer);a>=0&&s[a]++}),{labels:question.options.map(t=>t.text||t),datasets:[{label:"Times Selected",data:Object.values(s),backgroundColor:question.options.map((t,a)=>question.correct_answers.includes(a)?"#10B981":"#3B82F6")}]}}),E=i(()=>m.value==="all"?d.responses.data:d.responses.data.filter(s=>m.value==="correct"?s.is_correct:!s.is_correct)),g=s=>{if(!s)return"N/A";const t=Math.floor(s/60),a=s%60;return`${t}m ${a}s`},F=s=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[s]||s,R=s=>typeof s=="string"?s:s.text||s.value||JSON.stringify(s),b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(s){return`${s.dataset.label}: ${s.parsed}`}}}}};return(s,t)=>(l(),w(L,{title:`Question Analysis - ${r.question.question}`},{header:x(()=>[e("div",G,[e("h2",K," Question Analysis: "+o(r.quiz.title),1),e("div",W,[f(C(S),{href:s.route("examiner.quizzes.analysis.index",{quiz:r.quiz.id}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:x(()=>t[1]||(t[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),A(" Back to Quiz Analysis ")])),_:1,__:[1]},8,["href"]),f(C(S),{href:s.route("examiner.quizzes.questions.edit",{quiz:r.quiz.id,question:r.question.id}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:x(()=>t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),A(" Edit Question ")])),_:1,__:[2]},8,["href"])])])]),default:x(()=>{var a;return[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium mb-2"},"Question Content",-1)),e("div",oe,[e("p",re,o(r.question.question),1),r.question.description?(l(),c("p",ne,o(r.question.description),1)):h("",!0)]),e("div",ie,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"Type",-1)),e("p",ae,o(F(r.question.type)),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"Points",-1)),e("p",le,o(r.question.points),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"Correct Answers",-1)),e("p",de,o(((a=r.question.correct_answers)==null?void 0:a.length)||0),1)])])]),e("div",ce,[e("div",ue,[t[10]||(t[10]=e("h4",{class:"font-medium text-green-800 mb-2"},"Performance Summary",-1)),e("div",me,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-green-700"},"Correct Responses",-1)),e("p",pe,o(p.value)+" / "+o(u.value)+" ("+o(v.value)+"%) ",1)]),e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm text-green-700"},"Average Points Earned",-1)),e("p",ge,o(z.value.toFixed(1))+" / "+o(r.question.points),1)]),e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm text-green-700"},"Difficulty",-1)),e("p",{class:_(["text-xl font-bold",B.value])},o(y.value),3)])])])])])])]),e("div",xe,[e("div",fe,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium mb-4"},"Response Distribution",-1)),f(H,{data:D.value,options:b},null,8,["data"])]),r.question.type==="multiple_choice"?(l(),c("div",ve,[t[12]||(t[12]=e("h3",{class:"text-lg font-medium mb-4"},"Option Selection",-1)),f(J,{data:T.value,options:b},null,8,["data"])])):h("",!0),e("div",he,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium mb-4"},"Time Spent",-1)),e("div",ye,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-500"},"Average",-1)),e("p",be,o(g(O.value)),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-500"},"Fastest Correct",-1)),e("p",we,o(g(M.value)),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-500"},"Slowest Correct",-1)),e("p",_e,o(g(j.value)),1)])])])]),e("div",ke,[e("div",qe,[e("div",Ce,[t[18]||(t[18]=e("h3",{class:"text-lg font-medium"},"Student Responses",-1)),e("div",Se,[P(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>m.value=n),class:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md transition-colors duration-200"},t[17]||(t[17]=[e("option",{value:"all"},"All Responses",-1),e("option",{value:"correct"},"Correct Only",-1),e("option",{value:"incorrect"},"Incorrect Only",-1)]),512),[[$,m.value]])])]),e("div",Ae,[e("table",ze,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Student "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Response "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Points "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Time Spent "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ")])],-1)),e("tbody",Be,[(l(!0),c(k,null,q(E.value,n=>(l(),c("tr",{key:n.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",Oe,[e("div",Me,[e("div",je,[e("img",{class:"h-10 w-10 rounded-full",src:n.attempt.user.avatar_url||"/images/default-avatar.png",alt:""},null,8,De)]),e("div",Te,[e("div",Ee,o(n.attempt.user.name),1),e("div",Fe,o(n.attempt.user.email),1)])])]),e("td",Re,[r.question.type==="multiple_choice"?(l(),c("div",Qe,o(R(n.answer)),1)):r.question.type==="fill_in_blank"?(l(),c("div",Ie,[(l(!0),c(k,null,q(Array.isArray(n.answer)?n.answer:[n.answer],(Q,I)=>(l(),c("span",{key:I,class:"mr-2"},o(Q),1))),128))])):(l(),c("div",Ne,o(n.answer),1))]),e("td",Pe,o(n.points_earned)+" / "+o(r.question.points),1),e("td",$e,o(g(n.time_spent)),1),e("td",Le,[e("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",n.is_correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(n.is_correct?"Correct":"Incorrect"),3)])]))),128))])])]),r.responses.last_page>1?(l(),w(V,{key:0,links:r.responses.links,class:"mt-4"},null,8,["links"])):h("",!0)])])])])]}),_:1},8,["title"]))}},Ze=U(Ve,[["__scopeId","data-v-924e6093"]]);export{Ze as default};
