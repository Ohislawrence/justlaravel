import{x as G,i as x,f as j,E as L,z as R,c,o as n,w,a as s,d as u,h as a,b as d,j as o,S as E,k as P,g as A,e as f,F as O,l as D,t as _,q as W,A as q,Q as J,a0 as p,W as V}from"./app-D4wzVpQR.js";import{A as H}from"./AppLayout-BjxEpScM.js";import{_ as K,a as X,b as Y,c as Z,d as ee,e as te,f as se}from"./OrderingEditor-Bxh2Upii.js";import{_ as m}from"./InputError-CnjA91OL.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const ie={class:"font-semibold text-xl text-gray-800 leading-tight"},le={class:"py-6"},ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},ae={class:"p-6 bg-white border-b border-gray-200"},ue={key:0,class:"mb-6"},de={key:1,class:"mb-6"},me={class:"grid grid-cols-1 gap-6"},ge=["value"],ce={class:"mt-1"},pe={key:0,class:"mb-4"},fe={class:"relative inline-block"},be=["src"],xe={class:"text-sm text-gray-500 mt-2"},ve={class:"text-xs text-gray-500 mt-1"},ye={class:"inline-flex items-center"},ke={key:7},we={key:8},_e={key:9},qe={class:"flex justify-end pt-4"},he=["disabled"],Ve={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ze={key:1},Ce={key:2},Ue={__name:"Edit",props:{quiz:Object||null,questionTypes:Object,pool:Object||null,question:{type:Object,required:!0}},setup(v){var U,I,M;const i=v,e=G({is_pool:((U=i.pool)==null?void 0:U.id)||null,type:i.question.type||"multiple_choice",question:i.question.question||"",description:i.question.description||"",image:null,points:i.question.points||1,time_limit:i.question.time_limit||null,is_required:i.question.is_required||!1,options:i.question.options||[""],correct_answers:i.question.correct_answers||[],settings:{rubric:((I=i.question.settings)==null?void 0:I.rubric)||[],distractors:((M=i.question.settings)==null?void 0:M.distractors)||[],...i.question.settings}}),g=x(0),b=x(i.question.image||null),y=x(!1),z=x(i.question.image||null);j(()=>!0);const C=j(()=>!!z.value);function Q(r){const t=r.target.files[0];if(t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)"),r.target.value="";return}const k=5*1024*1024;if(t.size>k){alert("Image size must be less than 5MB"),r.target.value="";return}e.image=t;const B=new FileReader;B.onload=F=>{b.value=F.target.result},B.readAsDataURL(t),y.value=!1}}function T(){e.image=null,b.value=null,y.value=!0;const r=h.value;r&&(r.value="")}function S(){e.image=null,b.value=z.value,y.value=!1;const r=h.value;r&&(r.value="")}function $(){y.value&&(e.remove_image=!0),e.is_pool===null?e.put(route("examiner.quizzes.questions.update",{quiz:i.quiz.id,question:i.question.id}),{preserveScroll:!0,onSuccess:()=>{V.visit(route("examiner.quizzes.questions.index",i.quiz.id))},onError:r=>{console.log("Validation errors:",r)}}):e.put(route("examiner.pools.questions.update",{pool:i.pool.id,question:i.question.id}))}function N(){e.is_pool===null?V.visit(route("examiner.quizzes.questions.index",i.quiz.id)):V.visit(route("examiner.question-pools.manage-questions",i.pool.id))}L(()=>{i.question.settings&&(e.settings={rubric:i.question.settings.rubric||[],distractors:i.question.settings.distractors||[],...i.question.settings})}),R(()=>e.type,(r,t)=>{r!==t&&g.value++});const h=x(null);return(r,t)=>(n(),c(H,{title:"Edit Question"},{header:w(()=>[s("h2",ie," Edit Question for "+_(v.quiz.title),1)]),default:w(()=>[s("div",le,[s("div",ne,[s("div",re,[s("div",ae,[i.pool===null?(n(),u("div",ue,[d(o(E),{href:r.route("examiner.quizzes.questions.index",v.quiz.id),class:"inline-flex items-center text-green-600 hover:text-green-800 text-sm font-medium transition-colors duration-200"},{default:w(()=>t[13]||(t[13]=[s("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),P(" ← Back to Questions ")])),_:1,__:[13]},8,["href"])])):a("",!0),i.pool.lenght>0?(n(),u("div",de,[d(o(E),{href:r.route("examiner.question-pools.manage-questions",i.pool.id),class:"inline-flex items-center text-green-600 hover:text-green-800 text-sm font-medium transition-colors duration-200"},{default:w(()=>t[14]||(t[14]=[s("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),P(" ← Back to Pool ")])),_:1,__:[14]},8,["href"])])):a("",!0),s("form",{onSubmit:A($,["prevent"])},[s("div",me,[s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),f(s("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).type=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},[(n(!0),u(O,null,D(v.questionTypes,(l,k)=>(n(),u("option",{key:k,value:k},_(l),9,ge))),128))],512),[[W,o(e).type]]),d(m,{message:o(e).errors.type,class:"mt-2"},null,8,["message"])]),s("div",null,[t[16]||(t[16]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),f(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).question=l),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[q,o(e).question]]),d(m,{message:o(e).errors.question,class:"mt-2"},null,8,["message"])]),s("div",null,[t[17]||(t[17]=s("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),f(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).description=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[q,o(e).description]]),d(m,{message:o(e).errors.description,class:"mt-2"},null,8,["message"])]),s("div",null,[t[19]||(t[19]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),s("div",ce,[b.value?(n(),u("div",pe,[s("div",fe,[s("img",{src:b.value,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300 shadow-sm"},null,8,be),s("button",{type:"button",onClick:T,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200"},t[18]||(t[18]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),s("p",xe,_(o(e).image?"New image preview":"Current image"),1),C.value&&o(e).image?(n(),u("button",{key:0,type:"button",onClick:S,class:"mt-2 text-xs text-green-600 hover:text-green-800 transition-colors duration-200"}," Reset to original image ")):a("",!0)])):a("",!0),s("input",{ref_key:"imageInput",ref:h,type:"file",accept:"image/*",onChange:Q,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition-colors duration-200"},null,544),s("p",ve," Supported formats: JPEG, PNG, GIF, WebP. Maximum size: 5MB. "+_(C.value?"Leave empty to keep current image.":""),1)]),d(m,{message:o(e).errors.image,class:"mt-2"},null,8,["message"])]),s("div",null,[t[20]||(t[20]=s("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),f(s("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).points=l),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[q,o(e).points]]),d(m,{message:o(e).errors.points,class:"mt-2"},null,8,["message"])]),s("div",null,[t[21]||(t[21]=s("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),f(s("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).time_limit=l),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[q,o(e).time_limit]]),d(m,{message:o(e).errors.time_limit,class:"mt-2"},null,8,["message"])]),s("div",null,[s("label",ye,[f(s("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o(e).is_required=l),type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[J,o(e).is_required]]),t[22]||(t[22]=s("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),d(m,{message:o(e).errors.is_required,class:"mt-2"},null,8,["message"])]),o(e).type==="multiple_choice"?(n(),c(K,{modelValue:o(e),"onUpdate:modelValue":t[6]||(t[6]=l=>p(e)?e.value=l:null),key:"multiple_choice-"+g.value},null,8,["modelValue"])):a("",!0),o(e).type==="true_false"?(n(),c(X,{modelValue:o(e),"onUpdate:modelValue":t[7]||(t[7]=l=>p(e)?e.value=l:null),key:"true_false-"+g.value},null,8,["modelValue"])):a("",!0),o(e).type==="short_answer"?(n(),c(Y,{modelValue:o(e),"onUpdate:modelValue":t[8]||(t[8]=l=>p(e)?e.value=l:null),key:"short_answer-"+g.value},null,8,["modelValue"])):a("",!0),o(e).type==="essay"?(n(),c(Z,{modelValue:o(e),"onUpdate:modelValue":t[9]||(t[9]=l=>p(e)?e.value=l:null),key:"essay-"+g.value},null,8,["modelValue"])):a("",!0),o(e).type==="fill_in_blank"?(n(),c(ee,{modelValue:o(e),"onUpdate:modelValue":t[10]||(t[10]=l=>p(e)?e.value=l:null),key:"fill_in_blank-"+g.value},null,8,["modelValue"])):a("",!0),o(e).type==="matching"?(n(),c(te,{modelValue:o(e),"onUpdate:modelValue":t[11]||(t[11]=l=>p(e)?e.value=l:null),key:"matching-"+g.value},null,8,["modelValue"])):a("",!0),o(e).type==="ordering"?(n(),c(se,{modelValue:o(e),"onUpdate:modelValue":t[12]||(t[12]=l=>p(e)?e.value=l:null),key:"ordering-"+g.value},null,8,["modelValue"])):a("",!0),o(e).errors.options?(n(),u("div",ke,[d(m,{message:o(e).errors.options,class:"mt-2"},null,8,["message"])])):a("",!0),o(e).errors.correct_answers?(n(),u("div",we,[d(m,{message:o(e).errors.correct_answers,class:"mt-2"},null,8,["message"])])):a("",!0),o(e).errors.settings?(n(),u("div",_e,[d(m,{message:o(e).errors.settings,class:"mt-2"},null,8,["message"])])):a("",!0),s("div",qe,[s("button",{type:"button",onClick:N,class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),s("button",{type:"submit",disabled:o(e).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition-colors duration-200 flex items-center"},[o(e).processing?(n(),u("svg",Ve,t[23]||(t[23]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):a("",!0),o(e).processing?(n(),u("span",ze,"Updating...")):(n(),u("span",Ce,"Update Question"))],8,he)])])],32)])])])])]),_:1}))}},Qe=oe(Ue,[["__scopeId","data-v-aa5fa018"]]);export{Qe as default};
