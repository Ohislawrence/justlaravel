import{A as j}from"./AppLayout-AFbEt38E.js";import{Q as D,l as c,d as x,e as n,o as s,a as e,f as y,t as l,F as w,h as S,m as q,z,j as B,n as g,W as M,c as f,w as k,g as E}from"./app-BYM1Msdw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-6"},N={class:"flex justify-between items-start"},O={class:"text-2xl font-bold"},T={key:0,class:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"},V={class:"mt-4"},A={class:"text-center"},Q={class:"text-4xl font-bold"},W={key:0,class:"text-center text-sm text-gray-500 mt-1"},I={class:"mt-6"},R={class:"space-y-2"},U={class:"ml-2"},Y={class:"mt-4"},G={key:0,class:"text-center"},H={key:1,class:"text-center"},J={class:"text-4xl font-bold"},K={class:"mt-8"},X={value:"monthly"},Z={key:0,value:"quarterly"},ee={key:1,value:"yearly"},te=["action"],se=["value"],ne=["value"],le=["value"],ae=["disabled"],oe={key:0},re={key:1},ie={__name:"PlanCard",props:{plan:Object,currentSubscription:Object},setup(o){const m=D(),u=c(()=>m.props.csrf_token),i=x(!1),t=o,d=x("monthly"),p=c(()=>t.plan.monthly_price.toLocaleString()),C=c(()=>t.plan.quarterly_price.toLocaleString()),h=c(()=>t.plan.yearly_price.toLocaleString()),P=c(()=>{if(!t.plan.yearly_price)return 0;const a=t.plan.monthly_price*12;return Math.round((a-t.plan.yearly_price)/a*100)}),_=c(()=>{var a;return((a=t.currentSubscription)==null?void 0:a.plan_id)===t.plan.id}),L=()=>{var a;i.value||((a=t.currentSubscription)==null?void 0:a.plan_id)===t.plan.id||(i.value=!0,M.post(route("examiner.subscribe"),{plan_id:t.plan.id,billing_cycle:d.value},{onFinish:()=>{i.value=!1}}))};c(()=>t.plan.monthly_price===0&&t.plan.quarterly_price===0&&t.plan.yearly_price===0);const $=a=>{i.value=!0,a.target.submit()};return(a,r)=>(s(),n("div",{class:g(["bg-white rounded-lg shadow-md overflow-hidden border",{"border-blue-500 ring-2 ring-blue-200":_.value}])},[e("div",F,[e("div",N,[e("h3",O,l(o.plan.name),1),_.value?(s(),n("span",T," Current Plan ")):y("",!0)]),e("div",V,[e("div",A,[e("span",Q,"₦"+l(p.value),1),r[1]||(r[1]=e("span",{class:"text-gray-600"},"/month",-1))]),o.plan.yearly_price?(s(),n("div",W," or ₦"+l(h.value)+" billed yearly ("+l(P.value)+"% off) ",1)):y("",!0)]),e("div",I,[e("ul",R,[(s(!0),n(w,null,S(o.plan.features,(v,b)=>(s(),n("li",{key:b,class:"flex items-start"},[r[2]||(r[2]=e("svg",{class:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",U,l(b)+": "+l(v),1)]))),128))])]),e("div",Y,[o.plan.is_free?(s(),n("div",G,r[3]||(r[3]=[e("span",{class:"text-4xl font-bold"},"FREE",-1)]))):(s(),n("div",H,[e("span",J,"₦"+l(p.value),1),r[4]||(r[4]=e("span",{class:"text-gray-600"},"/month",-1))]))]),e("div",K,[q(e("select",{"onUpdate:modelValue":r[0]||(r[0]=v=>d.value=v),class:"w-full border rounded-md p-2 mb-4"},[e("option",X,"Monthly (₦"+l(p.value)+")",1),o.plan.quarterly_price?(s(),n("option",Z,"Quarterly (₦"+l(C.value)+")",1)):y("",!0),o.plan.yearly_price?(s(),n("option",ee,"Yearly (₦"+l(h.value)+")",1)):y("",!0)],512),[[z,d.value]]),e("form",{action:a.route("examiner.subscribe"),method:"POST",onSubmit:B($,["prevent"])},[e("input",{type:"hidden",name:"_token",value:u.value},null,8,se),e("input",{type:"hidden",name:"plan_id",value:o.plan.id},null,8,ne),e("input",{type:"hidden",name:"billing_cycle",value:d.value},null,8,le),e("button",{onClick:L,class:g(["w-full py-2 px-4 rounded font-medium",{"bg-blue-600 hover:bg-blue-700 text-white":!_.value,"bg-gray-200 text-gray-600 cursor-not-allowed":_.value}]),disabled:_.value||i.value},[i.value?(s(),n("span",oe,"Processing...")):(s(),n("span",re,l(_.value?"Current Plan":"Subscribe Now"),1))],10,ae)],40,te)])])],2))}},ce={class:"flex justify-between items-center"},ue={key:0,class:"text-sm text-green-600"},de={key:0},pe={key:1},_e={class:"py-12"},ye={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},me={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},xe={__name:"Index",props:{plans:Array,organization:Object},setup(o){const m=o,u=c(()=>m.organization.active_subscription||m.organization.current_subscription),i=t=>new Date(t).toLocaleDateString();return(t,d)=>(s(),f(j,{title:"Subscription Plans"},{header:k(()=>[e("div",ce,[d[0]||(d[0]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Choose a Subscription Plan ",-1)),u.value?(s(),n("div",ue,[E(" Current Plan: "+l(u.value.plan.name)+" ",1),u.value.plan.slug!=="free-tier"?(s(),n("span",de," (Expires "+l(i(u.value.ends_at))+") ",1)):(s(),n("span",pe,"(Limited)"))])):y("",!0)])]),default:k(()=>[e("div",_e,[e("div",ye,[e("div",me,[(s(!0),n(w,null,S(o.plans,p=>(s(),f(ie,{key:p.id,plan:p,"current-subscription":u.value},null,8,["plan","current-subscription"]))),128))])])])]),_:1}))}};export{xe as default};
