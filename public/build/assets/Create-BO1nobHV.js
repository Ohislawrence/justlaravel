import{i as g,x as Z,f as ee,z as se,c as a,o as i,w as E,a as t,b as m,g as te,h as n,e as c,j as o,d as f,F as oe,l as le,t as b,q as re,A as k,Q as ie,a0 as p,k as ne,W as ae}from"./app-Ba3QO07z.js";import{A as ue}from"./AppLayout-4TPH_oq1.js";import{_ as de,a as me,b as ge,c as pe,d as ce,e as fe,f as be}from"./OrderingEditor-CU4mF_2d.js";import{_ as u}from"./InputError-Cqul_9-c.js";import{F as ye}from"./FeatureLimitModal-C1N-f4qJ.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const ve={class:"font-semibold text-xl text-gray-800 leading-tight"},we={class:"py-6"},ke={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_e={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},qe={class:"p-6 bg-white border-b border-gray-200"},Ve={class:"grid grid-cols-1 gap-6"},he=["value"],Ce={class:"mt-1"},ze={key:0,class:"mb-4"},Ue={class:"relative inline-block"},Me=["src"],Qe={class:"text-sm text-gray-500 mt-2"},Ie={class:"inline-flex items-center"},je={class:"flex justify-end pt-4"},Be=["disabled"],Ne={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Te={key:1,class:"flex items-center"},Fe={key:2},Le={__name:"Create",props:{quiz:Object,questionTypes:Object,question:Object,pool:Object,currentQuestions:{type:Number,default:10},questionLimit:{type:Number,default:10}},setup(_){var h,C,z,U,M,Q,I,j,B,N,T,F,L,$,A,P,R,S;const r=_,O=g(null),d=g(0),e=Z({is_pool:((h=r.pool)==null?void 0:h.id)||null,type:((C=r.question)==null?void 0:C.type)||"multiple_choice",question:((z=r.question)==null?void 0:z.question)||"",description:((U=r.question)==null?void 0:U.description)||"",image:null,points:((M=r.question)==null?void 0:M.points)||1,time_limit:((Q=r.question)==null?void 0:Q.time_limit)||null,is_required:((I=r.question)==null?void 0:I.is_required)||!1,options:((j=r.question)==null?void 0:j.options)||[""],correct_answers:((B=r.question)==null?void 0:B.correct_answers)||[],settings:{randomize:((T=(N=r.question)==null?void 0:N.settings)==null?void 0:T.randomize)||!1,multiple_selection:((L=(F=r.question)==null?void 0:F.settings)==null?void 0:L.multiple_selection)||!1,rubric:((A=($=r.question)==null?void 0:$.settings)==null?void 0:A.rubric)||[],distractors:((R=(P=r.question)==null?void 0:P.settings)==null?void 0:R.distractors)||[]}}),V=g(!1),G=g(""),W=g(""),x=g(((S=r.question)==null?void 0:S.image)||null),q=g(!1),y=ee(()=>!!r.question);se(()=>e.type,(v,s)=>{v!==s&&(e.options=[""],e.correct_answers=[],e.settings={randomize:!1,multiple_selection:!1,rubric:[],distractors:[]},d.value++)});function H(v){const s=v.target.files[0];if(!s)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(s.type)){alert("Invalid image type.");return}const w=5*1024*1024;if(s.size>w){alert("Image size must be less than 5MB");return}e.image=s;const D=new FileReader;D.onload=Y=>{x.value=Y.target.result},D.readAsDataURL(s),q.value=!1}function J(){e.image=null,x.value=null,q.value=!0}function K(){q.value&&y.value&&(e.remove_image=!0),e.is_pool===null?e.post(route("examiner.quizzes.questions.store",r.quiz.id)):e.post(route("examiner.pools.questions.store",r.pool.id))}function X(){ae.visit(route("examiner.quizzes.questions.index",r.quiz.id))}return(v,s)=>(i(),a(ue,{title:y.value?"Edit Question":"Add Question"},{header:E(()=>[t("h2",ve," Create Question for "+b(r.pool?r.pool.name:_.quiz.title)+" "+b(r.pool?"Question pool":"Exam"),1)]),default:E(()=>[t("div",we,[t("div",ke,[t("div",_e,[t("div",qe,[t("form",{onSubmit:te(K,["prevent"])},[t("div",Ve,[t("div",null,[s[14]||(s[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),c(t("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>o(e).type=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},[(i(!0),f(oe,null,le(_.questionTypes,(l,w)=>(i(),f("option",{key:w,value:w},b(l),9,he))),128))],512),[[re,o(e).type]]),m(u,{message:o(e).errors.type,class:"mt-2"},null,8,["message"])]),t("div",null,[s[15]||(s[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),c(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>o(e).question=l),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[k,o(e).question]]),m(u,{message:o(e).errors.question,class:"mt-2"},null,8,["message"])]),t("div",null,[s[16]||(s[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),c(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=l=>o(e).description=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[k,o(e).description]]),m(u,{message:o(e).errors.description,class:"mt-2"},null,8,["message"])]),t("div",null,[s[19]||(s[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),t("div",Ce,[x.value?(i(),f("div",ze,[t("div",Ue,[t("img",{src:x.value,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300 shadow-sm"},null,8,Me),t("button",{type:"button",onClick:J,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200"},s[17]||(s[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("p",Qe,b(y.value&&!o(e).image?"Current image":"Preview"),1)])):n("",!0),t("input",{ref_key:"imageInput",ref:O,type:"file",accept:"image/*",onChange:H,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition-colors duration-200"},null,544),s[18]||(s[18]=t("p",{class:"text-xs text-gray-500 mt-1"}," Supported formats: JPEG, PNG, GIF, WebP. Max size: 5MB. ",-1))]),m(u,{message:o(e).errors.image,class:"mt-2"},null,8,["message"])]),t("div",null,[s[20]||(s[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),c(t("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>o(e).points=l),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[k,o(e).points]]),m(u,{message:o(e).errors.points,class:"mt-2"},null,8,["message"])]),t("div",null,[s[21]||(s[21]=t("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),c(t("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o(e).time_limit=l),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[k,o(e).time_limit]]),m(u,{message:o(e).errors.time_limit,class:"mt-2"},null,8,["message"])]),t("div",null,[t("label",Ie,[c(t("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>o(e).is_required=l),type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[ie,o(e).is_required]]),s[22]||(s[22]=t("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),m(u,{message:o(e).errors.is_required,class:"mt-2"},null,8,["message"])]),o(e).type==="multiple_choice"?(i(),a(de,{modelValue:o(e),"onUpdate:modelValue":s[6]||(s[6]=l=>p(e)?e.value=l:null),key:"multiple_choice-"+d.value},null,8,["modelValue"])):n("",!0),o(e).type==="true_false"?(i(),a(me,{modelValue:o(e),"onUpdate:modelValue":s[7]||(s[7]=l=>p(e)?e.value=l:null),key:"true_false-"+d.value},null,8,["modelValue"])):n("",!0),o(e).type==="short_answer"?(i(),a(ge,{modelValue:o(e),"onUpdate:modelValue":s[8]||(s[8]=l=>p(e)?e.value=l:null),key:"short_answer-"+d.value},null,8,["modelValue"])):n("",!0),o(e).type==="essay"?(i(),a(pe,{modelValue:o(e),"onUpdate:modelValue":s[9]||(s[9]=l=>p(e)?e.value=l:null),key:"essay-"+d.value},null,8,["modelValue"])):n("",!0),o(e).type==="fill_in_blank"?(i(),a(ce,{modelValue:o(e),"onUpdate:modelValue":s[10]||(s[10]=l=>p(e)?e.value=l:null),key:"fill_in_blank-"+d.value},null,8,["modelValue"])):n("",!0),o(e).type==="matching"?(i(),a(fe,{modelValue:o(e),"onUpdate:modelValue":s[11]||(s[11]=l=>p(e)?e.value=l:null),key:"matching-"+d.value},null,8,["modelValue"])):n("",!0),o(e).type==="ordering"?(i(),a(be,{modelValue:o(e),"onUpdate:modelValue":s[12]||(s[12]=l=>p(e)?e.value=l:null),key:"ordering-"+d.value},null,8,["modelValue"])):n("",!0),o(e).errors.options?(i(),a(u,{key:7,message:o(e).errors.options,class:"mt-2"},null,8,["message"])):n("",!0),o(e).errors.correct_answers?(i(),a(u,{key:8,message:o(e).errors.correct_answers,class:"mt-2"},null,8,["message"])):n("",!0),o(e).errors.settings?(i(),a(u,{key:9,message:o(e).errors.settings,class:"mt-2"},null,8,["message"])):n("",!0),t("div",je,[t("button",{type:"button",onClick:X,class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),t("button",{type:"submit",disabled:o(e).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 disabled:opacity-25 transition-colors duration-200 flex items-center"},[o(e).processing?n("",!0):(i(),f("svg",Ne,s[23]||(s[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),o(e).processing?(i(),f("span",Te,[s[24]||(s[24]=t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),ne(" "+b(y.value?"Updating...":"Creating..."),1)])):(i(),f("span",Fe,b(y.value?"Update":"Create")+" Question",1))],8,Be)])])],32)])])])]),m(ye,{modelValue:V.value,"onUpdate:modelValue":s[13]||(s[13]=l=>V.value=l),featureName:G.value,message:W.value},null,8,["modelValue","featureName","message"])]),_:1},8,["title"]))}},Oe=xe(Le,[["__scopeId","data-v-5a7a9b7c"]]);export{Oe as default};
