import{A as D}from"./AppLayout-1-5X1ZUR.js";import{O as j,i as f,f as o,d as l,o as s,a as e,h as y,t as a,F as C,l as S,k as g,e as z,y as M,n as x,W as F,c as w,w as k}from"./app-CFKp1s14.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const O={class:"p-6"},V={class:"flex justify-between items-start"},A={class:"text-2xl font-bold"},E={key:0,class:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full self-center"},I={class:"mt-6"},N={class:"text-center"},T={key:0},W={key:1},H={class:"text-4xl font-bold"},Q={class:"text-gray-600"},R={key:0,class:"text-center text-sm text-gray-500 mt-2"},U={class:"mt-6"},Y={class:"space-y-2"},G={class:"ml-2 text-gray-700"},J={class:"font-medium"},K={class:"mt-8 space-y-4"},X={key:0,class:"mt-4"},Z=["disabled"],ee={value:"monthly"},te={key:0,value:"quarterly"},se={key:1,value:"yearly"},ne=["disabled"],le={key:0},ae={key:1},re={__name:"PlanCard",props:{plan:{type:Object,required:!0},currentSubscription:{type:Object,default:null}},setup(r){j();const i=f(!1),t=r,c=f("monthly"),_=o(()=>t.plan.monthly_price?t.plan.monthly_price.toLocaleString():"0"),v=o(()=>t.plan.quarterly_price?t.plan.quarterly_price.toLocaleString():"0"),p=o(()=>t.plan.yearly_price?t.plan.yearly_price.toLocaleString():"0"),q=o(()=>{if(!t.plan.yearly_price||t.plan.monthly_price<=0)return 0;const d=t.plan.monthly_price*12,n=(d-t.plan.yearly_price)/d*100;return Math.round(n)}),u=o(()=>{var d;return((d=t.currentSubscription)==null?void 0:d.plan_id)===t.plan.id}),m=o(()=>t.plan.monthly_price==0&&t.plan.quarterly_price==0&&t.plan.yearly_price==0),B=o(()=>{switch(c.value){case"quarterly":return"quarter";case"yearly":return"year";default:return"month"}}),L=o(()=>[t.plan.monthly_price,t.plan.quarterly_price,t.plan.yearly_price].filter(n=>n!=null&&n>0).length>1),$=()=>{i.value||u.value||(i.value=!0,F.post(route("examiner.subscribe"),{plan_id:t.plan.id,billing_cycle:c.value},{onFinish:()=>{i.value=!1}}))};return(d,n)=>(s(),l("div",{class:x(["bg-white rounded-lg shadow-md overflow-hidden border",{"border-blue-500 ring-2 ring-blue-200":u.value}])},[e("div",O,[e("div",V,[e("h3",A,a(r.plan.name),1),u.value?(s(),l("span",E," Current Plan ")):y("",!0)]),e("div",I,[e("div",N,[m.value?(s(),l("div",T,n[1]||(n[1]=[e("span",{class:"text-4xl font-bold"},"FREE",-1)]))):(s(),l("div",W,[e("span",H," ₦"+a(c.value==="yearly"?p.value:c.value==="quarterly"?v.value:_.value),1),e("span",Q,"/"+a(B.value),1)]))]),r.plan.yearly_price&&!m.value?(s(),l("div",R," Billed yearly: ₦"+a(p.value)+" (Save "+a(q.value)+"%) ",1)):y("",!0)]),e("div",U,[e("ul",Y,[(s(!0),l(C,null,S(r.plan.features,(h,b)=>(s(),l("li",{key:b,class:"flex items-start"},[n[2]||(n[2]=e("svg",{class:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",G,[e("span",J,a(b),1),g(": "+a(h),1)])]))),128))])]),e("div",K,[!m.value&&L.value?(s(),l("div",X,[n[3]||(n[3]=e("label",{for:"billing-cycle",class:"block text-sm font-medium text-gray-700 mb-1"},"Billing Cycle",-1)),z(e("select",{id:"billing-cycle","onUpdate:modelValue":n[0]||(n[0]=h=>c.value=h),disabled:u.value,class:"w-full border border-gray-300 rounded-md p-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[e("option",ee,"Monthly (₦"+a(_.value)+")",1),r.plan.quarterly_price?(s(),l("option",te," Quarterly (₦"+a(v.value)+") ",1)):y("",!0),r.plan.yearly_price?(s(),l("option",se," Yearly (₦"+a(p.value)+") ",1)):y("",!0)],8,Z),[[M,c.value]])])):y("",!0),e("button",{onClick:$,class:x(["w-full py-3 px-4 rounded-md font-medium transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",{"bg-blue-600 hover:bg-blue-700 text-white":!u.value,"bg-gray-200 text-gray-600 cursor-not-allowed":u.value}]),disabled:u.value||i.value},[i.value?(s(),l("span",le,n[4]||(n[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 inline text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Processing... ")]))):(s(),l("span",ae,a(u.value?"Current Plan":"Subscribe Now"),1))],10,ne)])])],2))}},oe=P(re,[["__scopeId","data-v-444344bf"]]),ie={class:"flex justify-between items-center"},ce={key:0,class:"text-sm text-green-600"},ue={key:0},de={key:1},pe={class:"py-12"},ye={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_e={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ve={__name:"Index",props:{plans:Array,organization:Object},setup(r){const i=r,t=o(()=>i.organization.active_subscription||i.organization.current_subscription),c=_=>new Date(_).toLocaleDateString();return(_,v)=>(s(),w(D,{title:"Subscription Plans"},{header:k(()=>[e("div",ie,[v[0]||(v[0]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Choose a Subscription Plan ",-1)),t.value?(s(),l("div",ce,[g(" Current Plan: "+a(t.value.plan.name)+" ",1),t.value.plan.slug!=="free-tier"?(s(),l("span",ue," (Expires "+a(c(t.value.ends_at))+") ",1)):(s(),l("span",de,"(Limited)"))])):y("",!0)])]),default:k(()=>[e("div",pe,[e("div",ye,[e("div",_e,[(s(!0),l(C,null,S(r.plans,p=>(s(),w(oe,{key:p.id,plan:p,"current-subscription":t.value},null,8,["plan","current-subscription"]))),128))])])])]),_:1}))}},fe=P(ve,[["__scopeId","data-v-0ddbfd04"]]);export{fe as default};
