import{A as $}from"./AppLayout-DUw_ZWTf.js";import{K as D,i as f,f as o,d as n,o as s,a as e,h as y,t as a,F as C,l as S,k as g,e as j,s as z,n as x,W as M,c as w,w as k}from"./app-Do1sSIaC.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const V={class:"p-6"},A={class:"flex justify-between items-start"},E={class:"text-2xl font-bold"},N={key:0,class:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full self-center"},O={class:"mt-6"},I={class:"text-center"},T={key:0},W={key:1},H={class:"text-4xl font-bold"},K={class:"text-gray-600"},Q={key:0,class:"text-center text-sm text-gray-500 mt-2"},R={class:"mt-6"},U={class:"space-y-2"},Y={class:"ml-2 text-gray-700"},G={class:"font-medium"},J={class:"mt-8 space-y-4"},X={key:0,class:"mt-4"},Z=["disabled"],ee={value:"monthly"},te={key:0,value:"quarterly"},se={key:1,value:"yearly"},le=["disabled"],ne={key:0},ae={key:1},re={__name:"PlanCard",props:{plan:{type:Object,required:!0},currentSubscription:{type:Object,default:null}},setup(r){D();const i=f(!1),t=r,c=f("monthly"),_=o(()=>t.plan.monthly_price?t.plan.monthly_price.toLocaleString():"0"),m=o(()=>t.plan.quarterly_price?t.plan.quarterly_price.toLocaleString():"0"),p=o(()=>t.plan.yearly_price?t.plan.yearly_price.toLocaleString():"0"),P=o(()=>{if(!t.plan.yearly_price||t.plan.monthly_price<=0)return 0;const d=t.plan.monthly_price*12,l=(d-t.plan.yearly_price)/d*100;return Math.round(l)}),u=o(()=>{var d;return((d=t.currentSubscription)==null?void 0:d.plan_id)===t.plan.id}),v=o(()=>t.plan.monthly_price==0&&t.plan.quarterly_price==0&&t.plan.yearly_price==0),q=o(()=>{switch(c.value){case"quarterly":return"quarter";case"yearly":return"year";default:return"month"}}),B=o(()=>[t.plan.monthly_price,t.plan.quarterly_price,t.plan.yearly_price].filter(l=>l!=null&&l>0).length>1),L=()=>{i.value||u.value||(i.value=!0,M.post(route("examiner.subscribe"),{plan_id:t.plan.id,billing_cycle:c.value},{onFinish:()=>{i.value=!1}}))};return(d,l)=>(s(),n("div",{class:x(["bg-white rounded-lg shadow-md overflow-hidden border",{"border-blue-500 ring-2 ring-blue-200":u.value}])},[e("div",V,[e("div",A,[e("h3",E,a(r.plan.name),1),u.value?(s(),n("span",N," Current Plan ")):y("",!0)]),e("div",O,[e("div",I,[v.value?(s(),n("div",T,l[1]||(l[1]=[e("span",{class:"text-4xl font-bold"},"FREE",-1)]))):(s(),n("div",W,[e("span",H," ₦"+a(c.value==="yearly"?p.value:c.value==="quarterly"?m.value:_.value),1),e("span",K,"/"+a(q.value),1)]))]),r.plan.yearly_price&&!v.value?(s(),n("div",Q," Billed yearly: ₦"+a(p.value)+" (Save "+a(P.value)+"%) ",1)):y("",!0)]),e("div",R,[e("ul",U,[(s(!0),n(C,null,S(r.plan.features,(h,b)=>(s(),n("li",{key:b,class:"flex items-start"},[l[2]||(l[2]=e("svg",{class:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",Y,[e("span",G,a(b),1),g(": "+a(h),1)])]))),128))])]),e("div",J,[!v.value&&B.value?(s(),n("div",X,[l[3]||(l[3]=e("label",{for:"billing-cycle",class:"block text-sm font-medium text-gray-700 mb-1"},"Billing Cycle",-1)),j(e("select",{id:"billing-cycle","onUpdate:modelValue":l[0]||(l[0]=h=>c.value=h),disabled:u.value,class:"w-full border border-gray-300 rounded-md p-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[e("option",ee,"Monthly (₦"+a(_.value)+")",1),r.plan.quarterly_price?(s(),n("option",te," Quarterly (₦"+a(m.value)+") ",1)):y("",!0),r.plan.yearly_price?(s(),n("option",se," Yearly (₦"+a(p.value)+") ",1)):y("",!0)],8,Z),[[z,c.value]])])):y("",!0),e("button",{onClick:L,class:x(["w-full py-3 px-4 rounded-md font-medium transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",{"bg-blue-600 hover:bg-blue-700 text-white":!u.value,"bg-gray-200 text-gray-600 cursor-not-allowed":u.value}]),disabled:u.value||i.value},[i.value?(s(),n("span",ne,l[4]||(l[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 inline text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Processing... ")]))):(s(),n("span",ae,a(u.value?"Current Plan":"Subscribe Now"),1))],10,le)])])],2))}},oe=F(re,[["__scopeId","data-v-444344bf"]]),ie={class:"flex justify-between items-center"},ce={key:0,class:"text-sm text-green-600"},ue={key:0},de={key:1},pe={class:"py-12"},ye={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_e={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},be={__name:"Index",props:{plans:Array,organization:Object},setup(r){const i=r,t=o(()=>i.organization.active_subscription||i.organization.current_subscription),c=_=>new Date(_).toLocaleDateString();return(_,m)=>(s(),w($,{title:"Subscription Plans"},{header:k(()=>[e("div",ie,[m[0]||(m[0]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Choose a Subscription Plan ",-1)),t.value?(s(),n("div",ce,[g(" Current Plan: "+a(t.value.plan.name)+" ",1),t.value.plan.slug!=="free-tier"?(s(),n("span",ue," (Expires "+a(c(t.value.ends_at))+") ",1)):(s(),n("span",de,"(Limited)"))])):y("",!0)])]),default:k(()=>[e("div",pe,[e("div",ye,[e("div",_e,[(s(!0),n(C,null,S(r.plans,p=>(s(),w(oe,{key:p.id,plan:p,"current-subscription":t.value},null,8,["plan","current-subscription"]))),128))])])])]),_:1}))}};export{be as default};
