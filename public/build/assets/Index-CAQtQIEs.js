import{A as q}from"./AppLayout-CMm9B8wa.js";import{f as b,d,o as l,a as t,h as j,t as s,F as w,l as A,n as z,G as R,i as D,c as N,j as C,S as O,w as T,b as S,k as B}from"./app-BL-VfoCG.js";import{S as F}from"./SummaryCard-C7vLjVsW.js";import{Q as P}from"./QuestionStatsTable-C6jo39h8.js";import{A as E}from"./AttemptsTable-CKpjcfWg.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./CheckCircleIcon-vXkcosNs.js";import"./ClockIcon-CaQmSymB.js";import"./Pagination-BF7d3j7M.js";const I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},H={class:"p-6"},V={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},U={class:"text-center p-4 bg-green-50 rounded-lg"},G={class:"text-2xl font-bold text-green-600"},Z={class:"text-center p-4 bg-blue-50 rounded-lg"},J={class:"text-2xl font-bold text-blue-600"},K={class:"text-center p-4 bg-purple-50 rounded-lg"},W={class:"text-2xl font-bold text-purple-600"},X={class:"text-center p-4 bg-orange-50 rounded-lg"},Y={class:"text-2xl font-bold text-orange-600"},tt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},et={class:"text-center p-3 bg-gray-50 rounded-lg"},st={class:"text-lg font-bold text-gray-700"},ot={class:"text-center p-3 bg-gray-50 rounded-lg"},nt={class:"text-lg font-bold text-gray-700"},rt={class:"text-center p-3 bg-gray-50 rounded-lg"},at={class:"text-lg font-bold text-gray-700"},lt={__name:"SurveySummary",props:{quiz:Object,analysis:Object,attempts:Object,questionStats:Array},setup(i){const u=i,y=b(()=>{var v,c,a;const e=u.analysis.total_attempts||0,n=((a=(c=(v=u.attempts)==null?void 0:v.data)==null?void 0:c.filter(r=>r.completed_at))==null?void 0:a.length)||0;return e>0?Math.round(n/e*100):0}),p=b(()=>{var c;const e=((c=u.attempts)==null?void 0:c.data)||[];if(e.length===0)return"0m";const n=e.reduce((a,r)=>a+(r.time_spent||0),0);return`${Math.round(n/e.length/60)}m`}),h=b(()=>{var v;const e=((v=u.attempts)==null?void 0:v.data)||[],n=new Set;return e.forEach(c=>{c.user_id?n.add(`user_${c.user_id}`):c.guest_email?n.add(`guest_${c.guest_email}`):c.guest_id&&n.add(`guest_${c.guest_id}`)}),n.size}),x=b(()=>{var e;return((e=u.questionStats)==null?void 0:e.length)||0}),m=b(()=>{var v;const e=u.analysis.total_attempts||0,n=((v=u.questionStats)==null?void 0:v.length)||1;return Math.round(e/n)}),o=b(()=>{var c,a;const n=(((c=u.questionStats)==null?void 0:c.length)||0)*(u.analysis.total_attempts||0);if(n===0)return 0;const v=((a=u.questionStats)==null?void 0:a.reduce((r,_)=>r+(_.total_responses||0),0))||0;return Math.round(v/n*100)});return(e,n)=>(l(),d("div",I,[t("div",H,[n[7]||(n[7]=t("h3",{class:"text-lg font-medium mb-4"},"Survey Overview",-1)),t("div",V,[t("div",U,[t("div",G,s(i.analysis.total_attempts||0),1),n[0]||(n[0]=t("div",{class:"text-sm text-green-800"},"Total Responses",-1))]),t("div",Z,[t("div",J,s(y.value)+"%",1),n[1]||(n[1]=t("div",{class:"text-sm text-blue-800"},"Completion Rate",-1))]),t("div",K,[t("div",W,s(p.value),1),n[2]||(n[2]=t("div",{class:"text-sm text-purple-800"},"Avg. Time",-1))]),t("div",X,[t("div",Y,s(h.value),1),n[3]||(n[3]=t("div",{class:"text-sm text-orange-800"},"Unique Respondents",-1))])]),i.quiz.quiz_type==="survey"?(l(),d("div",tt,[t("div",et,[t("div",st,s(x.value),1),n[4]||(n[4]=t("div",{class:"text-xs text-gray-600"},"Total Questions",-1))]),t("div",ot,[t("div",nt,s(m.value),1),n[5]||(n[5]=t("div",{class:"text-xs text-gray-600"},"Avg. Responses per Q",-1))]),t("div",rt,[t("div",at,s(o.value)+"%",1),n[6]||(n[6]=t("div",{class:"text-xs text-gray-600"},"Overall Response Rate",-1))])])):j("",!0)])]))}},it={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},dt={class:"p-6"},ct={class:"space-y-6"},ut={class:"flex justify-between items-start mb-3"},gt={class:"font-medium text-gray-900"},mt={class:"flex items-center space-x-2 mt-1"},xt={class:"text-xs px-2 py-1 bg-gray-100 rounded-full"},pt={class:"text-xs text-gray-500"},yt={key:0,class:"text-xs text-gray-500"},_t={class:"text-right"},vt={key:0,class:"space-y-3"},ht={class:"space-y-2"},ft={class:"flex items-center flex-1"},bt={class:"text-sm text-gray-700"},wt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},$t={class:"flex items-center space-x-2 w-48"},St={class:"flex-1 bg-gray-200 rounded-full h-2"},At={class:"text-xs text-gray-600 w-12"},kt={class:"text-xs text-gray-500 w-8 text-right"},zt={class:"pt-2 border-t border-gray-100"},Mt={class:"flex justify-between text-xs text-gray-500"},jt={key:1,class:"space-y-3"},Rt={key:0,class:"bg-yellow-50 p-3 rounded border border-yellow-200"},Tt={key:1,class:"space-y-2"},Ct={class:"flex items-center flex-1"},Ot={class:"text-sm text-gray-700 font-medium"},Qt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},Bt={class:"flex items-center space-x-2 w-48"},Ft={class:"flex-1 bg-gray-200 rounded-full h-2"},Nt={class:"text-xs text-gray-600 w-12"},qt={class:"text-xs text-gray-500 w-8 text-right"},Dt={key:2,class:"pt-2 border-t border-gray-100"},Pt={class:"flex justify-between text-xs text-gray-500"},Et={key:2,class:"space-y-3"},Lt={class:"text-sm text-gray-600 mb-2"},It={class:"bg-gray-50 p-3 rounded"},Ht={class:"space-y-2 text-xs"},Vt={class:"flex justify-between"},Ut={class:"font-medium"},Gt={class:"flex justify-between"},Zt={class:"font-medium"},Jt={key:3,class:"space-y-3"},Kt={class:"text-sm text-gray-600 mb-2"},Wt={class:"bg-gray-50 p-3 rounded"},Xt={class:"space-y-2 text-xs"},Yt={class:"flex justify-between"},te={class:"font-medium"},ee={class:"flex justify-between"},se={class:"font-medium"},oe={class:"flex justify-between"},ne={class:"font-medium"},re={key:4,class:"space-y-3"},ae={class:"text-sm text-gray-600 mb-2"},le={class:"bg-gray-50 p-3 rounded"},ie={class:"space-y-2 text-xs"},de={class:"flex justify-between"},ce={class:"font-medium"},ue={class:"flex justify-between"},ge={class:"font-medium"},me={key:5,class:"space-y-3"},xe={class:"text-sm text-gray-600"},pe={class:"bg-gray-50 p-3 rounded"},ye={key:0,class:"space-y-2"},_e={class:"flex-1"},ve={class:"flex items-center space-x-2 w-32"},he={class:"flex-1 bg-gray-200 rounded-full h-1.5"},fe={class:"text-gray-600 w-8"},be={class:"text-gray-500 w-8 text-right"},we={key:1,class:"text-xs text-gray-500"},$e={key:6,class:"space-y-3"},Se={class:"text-sm text-gray-600"},Ae={class:"bg-gray-50 p-3 rounded"},ke={class:"space-y-2 text-xs"},ze={class:"flex justify-between"},Me={class:"font-medium"},je={class:"flex justify-between"},Re={class:"font-medium"},Te={key:7,class:"bg-yellow-50 p-3 rounded"},Ce={class:"text-sm text-yellow-700"},Oe={class:"grid grid-cols-3 gap-2 mt-3 text-xs"},Qe={class:"text-center p-2 bg-blue-50 rounded"},Be={class:"font-medium text-blue-700"},Fe={class:"text-center p-2 bg-green-50 rounded"},Ne={class:"font-medium text-green-700"},qe={class:"text-center p-2 bg-purple-50 rounded"},De={class:"font-medium text-purple-700"},Pe={__name:"SurveyBreakdown",props:{quiz:Object,attempts:Object,questionStats:Array},setup(i){const u=m=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[m]||m,y=m=>({Easy:"text-green-600",Medium:"text-yellow-600",Hard:"text-red-600","N/A":"text-gray-600"})[m]||"text-gray-600",p=m=>{var o;if(m.options_stats&&Array.isArray(m.options_stats))return m.options_stats;if(m.type==="true_false"){const e=((o=m.correct_answers)==null?void 0:o[0])??m.correct_answer??(m.correct_answers?m.correct_answers[0]:null);return console.log("True/False question data:",{question:m,correctAnswer:e,options_stats:m.options_stats}),[{option:"True",value:"true",count:0,is_correct:e==="true"||e===!0||e===1},{option:"False",value:"false",count:0,is_correct:e==="false"||e===!1||e===0}]}return[]},h=(m,o)=>{const e=m.total_responses||0;if(e===0)return 0;const n=o.count||0;return Math.round(n/e*100)},x=m=>{const o=m.total_responses||0,e=m.correct_responses||0;return o>0?Math.round(e/o*100):0};return(m,o)=>(l(),d("div",it,[t("div",dt,[o[23]||(o[23]=t("h3",{class:"text-lg font-medium mb-4"},"Survey Response Breakdown",-1)),t("div",ct,[(l(!0),d(w,null,A(i.questionStats,e=>(l(),d("div",{key:e.id,class:"border-b pb-4 last:border-b-0"},[t("div",ut,[t("div",null,[t("h4",gt,s(e.question||"Question"),1),t("div",mt,[t("span",xt,s(u(e.type)),1),t("span",pt,s(e.total_responses||0)+" responses",1),e.points?(l(),d("span",yt,s(e.points)+" points",1)):j("",!0)])]),t("div",_t,[t("span",{class:z(["text-sm font-medium",y(e.difficulty)])},s(e.difficulty||"N/A"),3),o[0]||(o[0]=t("div",{class:"text-xs text-gray-500"},"Difficulty",-1))])]),e.type==="multiple_choice"?(l(),d("div",vt,[t("div",ht,[(l(!0),d(w,null,A(p(e),(n,v)=>(l(),d("div",{key:v,class:"flex items-center justify-between"},[t("div",ft,[t("span",bt,s(n.option),1),n.is_correct?(l(),d("span",wt,s(n.percentage),1)):j("",!0)]),t("div",$t,[t("div",St,[t("div",{class:z(["h-2 rounded-full transition-all duration-500",n.is_correct?"bg-green-500":"bg-blue-500"]),style:R({width:`${h(e,n)}%`})},null,6)]),t("span",At,s(h(e,n))+"%",1),t("span",kt,"("+s(n.count)+")",1)])]))),128))]),t("div",zt,[t("div",Mt,[o[1]||(o[1]=t("span",null,"Correct answers are highlighted in green",-1)),t("span",null,s(x(e))+"% answered correctly",1)])])])):e.type==="true_false"?(l(),d("div",jt,[p(e).length?(l(),d("div",Tt,[(l(!0),d(w,null,A(p(e),(n,v)=>(l(),d("div",{key:v,class:"flex items-center justify-between"},[t("div",Ct,[t("span",Ot,s(n.option),1),n.is_correct?(l(),d("span",Qt,"âœ“ Correct Answer")):j("",!0)]),t("div",Bt,[t("div",Ft,[t("div",{class:z(["h-2 rounded-full transition-all duration-500",n.is_correct?"bg-green-500":"bg-red-400"]),style:R({width:`${h(e,n)}%`})},null,6)]),t("span",Nt,s(h(e,n))+"%",1),t("span",qt,"("+s(n.count)+")",1)])]))),128))])):(l(),d("div",Rt,o[2]||(o[2]=[t("p",{class:"text-sm text-yellow-700"},"No response data available for this True/False question",-1)]))),p(e).length?(l(),d("div",Dt,[t("div",Pt,[o[3]||(o[3]=t("span",null,"Correct answer is highlighted in green",-1)),t("span",null,s(x(e))+"% answered correctly",1)])])):j("",!0)])):e.type==="fill_in_blank"?(l(),d("div",Et,[t("div",Lt,s(e.total_responses||0)+" responses collected ",1),t("div",It,[o[6]||(o[6]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Response Summary:",-1)),t("div",Ht,[t("div",Vt,[o[4]||(o[4]=t("span",null,"Average time spent:",-1)),t("span",Ut,s(Math.round(e.average_time||0))+" seconds",1)]),t("div",Gt,[o[5]||(o[5]=t("span",null,"Average points earned:",-1)),t("span",Zt,s(Math.round(e.average_points||0))+" / "+s(e.points),1)])]),o[7]||(o[7]=t("p",{class:"text-xs text-gray-500 mt-3"}," For detailed text responses, view individual attempts ",-1))])])):e.type==="short_answer"?(l(),d("div",Jt,[t("div",Kt,s(e.total_responses||0)+" responses collected ",1),t("div",Wt,[o[11]||(o[11]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Response Summary:",-1)),t("div",Xt,[t("div",Yt,[o[8]||(o[8]=t("span",null,"Average time spent:",-1)),t("span",te,s(Math.round(e.average_time||0))+" seconds",1)]),t("div",ee,[o[9]||(o[9]=t("span",null,"Average points earned:",-1)),t("span",se,s(Math.round(e.average_points||0))+" / "+s(e.points),1)]),t("div",oe,[o[10]||(o[10]=t("span",null,"Correct responses:",-1)),t("span",ne,s(e.correct_responses||0)+" ("+s(x(e))+"%)",1)])])])])):e.type==="essay"?(l(),d("div",re,[t("div",ae,s(e.total_responses||0)+" responses collected ",1),t("div",le,[o[14]||(o[14]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Response Summary:",-1)),t("div",ie,[t("div",de,[o[12]||(o[12]=t("span",null,"Average time spent:",-1)),t("span",ce,s(Math.round(e.average_time||0))+" seconds",1)]),t("div",ue,[o[13]||(o[13]=t("span",null,"Average points earned:",-1)),t("span",ge,s(Math.round(e.average_points||0))+" / "+s(e.points),1)])]),o[15]||(o[15]=t("p",{class:"text-xs text-gray-500 mt-3"}," For detailed essay responses, view individual attempts ",-1))])])):e.type==="matching"?(l(),d("div",me,[t("div",xe,s(e.total_responses||0)+" matching attempts ",1),t("div",pe,[o[16]||(o[16]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Match Distribution:",-1)),e.options_stats&&e.options_stats.length>0?(l(),d("div",ye,[(l(!0),d(w,null,A(e.options_stats,(n,v)=>(l(),d("div",{key:v,class:"flex items-center justify-between text-xs"},[t("span",_e,s(n.option),1),t("div",ve,[t("div",he,[t("div",{class:z(["h-1.5 rounded-full",n.is_correct?"bg-green-500":"bg-blue-500"]),style:R({width:`${h(e,n)}%`})},null,6)]),t("span",fe,s(h(e,n))+"%",1),t("span",be,"("+s(n.count)+")",1)])]))),128))])):(l(),d("div",we," No matching data available "))])])):e.type==="ordering"?(l(),d("div",$e,[t("div",Se,s(e.total_responses||0)+" ordering attempts ",1),t("div",Ae,[o[19]||(o[19]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Ordering Statistics:",-1)),t("div",ke,[t("div",ze,[o[17]||(o[17]=t("span",null,"Correct orders:",-1)),t("span",Me,s(e.correct_responses||0)+" ("+s(x(e))+"%)",1)]),t("div",je,[o[18]||(o[18]=t("span",null,"Average time spent:",-1)),t("span",Re,s(Math.round(e.average_time||0))+" seconds",1)])])])])):(l(),d("div",Te,[t("div",Ce," Response analysis not available for "+s(u(e.type))+" questions ",1)])),t("div",Oe,[t("div",Qe,[t("div",Be,s(e.total_responses||0),1),o[20]||(o[20]=t("div",{class:"text-blue-600"},"Responses",-1))]),t("div",Fe,[t("div",Ne,s(e.correct_responses||0),1),o[21]||(o[21]=t("div",{class:"text-green-600"},"Correct",-1))]),t("div",qe,[t("div",De,s(Math.round(e.average_time||0))+"s",1),o[22]||(o[22]=t("div",{class:"text-purple-600"},"Avg Time",-1))])])]))),128))])])]))}},Ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},Le={class:"p-6"},Ie={class:"mb-8"},He={class:"flex flex-col lg:flex-row items-center justify-between"},Ve={class:"lg:w-1/3 flex justify-center"},Ue={class:"relative w-48 h-48"},Ge={viewBox:"0 0 100 100",class:"w-full h-full"},Ze=["d","fill","onMouseenter"],Je={class:"absolute inset-0 flex items-center justify-center"},Ke={class:"text-center"},We={class:"text-lg font-bold"},Xe={class:"lg:w-2/3 mt-4 lg:mt-0"},Ye={class:"space-y-2"},ts={class:"flex items-center"},es={class:"text-sm font-medium"},ss={class:"text-right"},os={class:"text-sm font-bold"},ns={class:"text-xs text-gray-500"},rs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},as={class:"border rounded-lg p-4"},ls={class:"h-48 flex items-center justify-center"},is={class:"w-full max-w-xs"},ds={class:"text-sm text-gray-600"},cs={class:"flex items-center space-x-2"},us={class:"w-32 bg-gray-200 rounded-full h-3"},gs={class:"text-xs text-gray-600 w-8"},ms={class:"border rounded-lg p-4"},xs={class:"h-48 overflow-y-auto"},ps={class:"flex-1 truncate mr-2"},ys={class:"text-sm text-gray-700 truncate"},_s={class:"text-xs text-gray-500"},vs={class:"flex items-center space-x-2 w-32"},hs={class:"flex-1 bg-gray-200 rounded-full h-2"},fs={class:"text-xs text-gray-600 w-8"},bs={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},ws={class:"text-center p-4 border rounded-lg"},$s={class:"text-2xl font-bold text-green-600"},Ss={class:"text-center p-4 border rounded-lg"},As={class:"text-2xl font-bold text-blue-600"},ks={class:"text-center p-4 border rounded-lg"},zs={class:"text-2xl font-bold text-purple-600"},Ms={__name:"SurveyCharts",props:{quiz:Object,attempts:Object,questionStats:Array},setup(i){const u=i,y=D(null),p=b(()=>{var c;return((c=u.questionStats)==null?void 0:c.length)||0}),h=b(()=>{const c=u.questionStats||[],a={};c.forEach(f=>{const $=f.type||"unknown";a[$]=(a[$]||0)+1});const r=["#10B981","#3B82F6","#8B5CF6","#F59E0B","#EF4444","#6B7280"];let _=c.length,g=0;return Object.entries(a).map(([f,$],k)=>{const M=$/_*100,Q={type:f.replace(/_/g," ").toUpperCase(),count:$,percentage:Math.round(M),startAngle:g,endAngle:g+M,color:r[k%r.length]};return g+=M,Q})}),x=b(()=>{const c=u.questionStats||[],a={Easy:{count:0,color:"bg-green-500"},Medium:{count:0,color:"bg-yellow-500"},Hard:{count:0,color:"bg-red-500"},"N/A":{count:0,color:"bg-gray-500"}};c.forEach(_=>{const g=_.difficulty||"N/A";a[g]&&a[g].count++});const r=c.length;return Object.entries(a).map(([_,g])=>({name:_,count:g.count,percentage:r>0?g.count/r*100:0,color:g.color}))}),m=b(()=>{var r,_;const c=u.questionStats||[],a=((_=(r=u.attempts)==null?void 0:r.data)==null?void 0:_.length)||0;return c.map(g=>{var k,M;const f=g.total_responses||0,$=a>0?f/a*100:0;return{id:g.id,text:((k=g.question)==null?void 0:k.substring(0,30))+(((M=g.question)==null?void 0:M.length)>30?"...":""),type:g.type,responses:f,responseRate:Math.round($)}}).sort((g,f)=>f.responseRate-g.responseRate)}),o=b(()=>{const c=u.questionStats||[];if(c.length===0)return"0s";const a=c.reduce((_,g)=>_+(g.average_time||0),0),r=Math.round(a/c.length);return r<60?`${r}s`:`${Math.round(r/60)}m`}),e=b(()=>{var _;const c=((_=u.attempts)==null?void 0:_.data)||[];if(c.length===0)return"0m";const a=c.reduce((g,f)=>g+(f.time_spent||0),0),r=Math.round(a/60);return r<60?`${r}m`:`${Math.round(r/60)}h`}),n=b(()=>{const c=u.questionStats||[];if(c.length===0)return 0;const a=c.reduce((r,_)=>{var $,k;const g=_.total_responses||0,f=((k=($=u.attempts)==null?void 0:$.data)==null?void 0:k.length)||1;return r+g/f*100},0);return Math.round(a/c.length)}),v=c=>{const a=c.startAngle/100*360,r=c.endAngle/100*360,_=(a-90)*Math.PI/180,g=(r-90)*Math.PI/180,f=50+35*Math.cos(_),$=50+35*Math.sin(_),k=50+35*Math.cos(g),M=50+35*Math.sin(g),Q=r-a>180?1:0;return`M50,50 L${f},${$} A35,35 0 ${Q},1 ${k},${M} Z`};return(c,a)=>(l(),d("div",Ee,[t("div",Le,[a[9]||(a[9]=t("h3",{class:"text-lg font-medium mb-4"},"Survey Analytics",-1)),t("div",Ie,[a[3]||(a[3]=t("h4",{class:"font-medium mb-3 text-center"},"Question Types Distribution",-1)),t("div",He,[t("div",Ve,[t("div",Ue,[(l(),d("svg",Ge,[(l(!0),d(w,null,A(h.value,(r,_)=>(l(),d("path",{key:r.type,d:v(r),fill:r.color,class:"transition-all duration-300 hover:opacity-80 cursor-pointer",onMouseenter:g=>y.value=r.type,onMouseleave:a[0]||(a[0]=g=>y.value=null)},null,40,Ze))),128)),a[1]||(a[1]=t("circle",{cx:"50",cy:"50",r:"30",fill:"white"},null,-1))])),t("div",Je,[t("div",Ke,[t("div",We,s(p.value),1),a[2]||(a[2]=t("div",{class:"text-xs text-gray-600"},"Total Questions",-1))])])])]),t("div",Xe,[t("div",Ye,[(l(!0),d(w,null,A(h.value,r=>(l(),d("div",{key:r.type,class:z(["flex items-center justify-between p-2 rounded hover:bg-gray-50 transition-colors",{"bg-gray-50":y.value===r.type}])},[t("div",ts,[t("div",{class:"w-3 h-3 rounded-full mr-2",style:R({backgroundColor:r.color})},null,4),t("span",es,s(r.type),1)]),t("div",ss,[t("div",os,s(r.count),1),t("div",ns,s(r.percentage)+"%",1)])],2))),128))])])])]),t("div",rs,[t("div",as,[a[4]||(a[4]=t("h4",{class:"font-medium mb-3 text-center"},"Question Difficulty",-1)),t("div",ls,[t("div",is,[(l(!0),d(w,null,A(x.value,r=>(l(),d("div",{key:r.name,class:"flex items-center justify-between mb-2"},[t("span",ds,s(r.name),1),t("div",cs,[t("div",us,[t("div",{class:z(["h-3 rounded-full transition-all duration-500",r.color]),style:R({width:`${r.percentage}%`})},null,6)]),t("span",gs,s(r.count),1)])]))),128))])])]),t("div",ms,[a[5]||(a[5]=t("h4",{class:"font-medium mb-3 text-center"},"Response Rates",-1)),t("div",xs,[(l(!0),d(w,null,A(m.value,r=>(l(),d("div",{key:r.id,class:"flex items-center justify-between mb-3"},[t("div",ps,[t("div",ys,s(r.text),1),t("div",_s,s(r.type),1)]),t("div",vs,[t("div",hs,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:R({width:`${r.responseRate}%`})},null,4)]),t("span",fs,s(r.responseRate)+"%",1)])]))),128))])])]),t("div",bs,[t("div",ws,[t("div",$s,s(o.value),1),a[6]||(a[6]=t("div",{class:"text-sm text-gray-600"},"Avg. Time per Question",-1))]),t("div",Ss,[t("div",As,s(e.value),1),a[7]||(a[7]=t("div",{class:"text-sm text-gray-600"},"Total Survey Time",-1))]),t("div",ks,[t("div",zs,s(n.value)+"%",1),a[8]||(a[8]=t("div",{class:"text-sm text-gray-600"},"Average Completion",-1))])])])]))}},js={class:"overflow-x-auto"},Rs={class:"min-w-full divide-y divide-gray-200"},Ts={class:"bg-white divide-y divide-gray-200"},Cs={class:"px-6 py-4 whitespace-nowrap"},Os={class:"text-sm font-medium text-gray-900"},Qs={class:"text-sm text-gray-500"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ns={key:0,class:"px-6 py-4 border-t border-gray-200"},qs={class:"flex justify-between items-center"},Ds={class:"text-sm text-gray-700"},Ps={class:"flex space-x-1"},Es={__name:"SurveyResponsesTable",props:{quiz:Object,attempts:Object},setup(i){const u=p=>p?new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Incomplete",y=p=>{if(!p)return"N/A";const h=Math.floor(p/60),x=p%60;return`${h}m ${x}s`};return(p,h)=>(l(),d("div",js,[t("table",Rs,[h[1]||(h[1]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Respondent "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Completion Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Time Spent "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",Ts,[(l(!0),d(w,null,A(i.attempts.data,x=>{var m,o;return l(),d("tr",{key:x.id},[t("td",Cs,[t("div",Os,s(((m=x.user)==null?void 0:m.name)||x.guest_name||"Anonymous"),1),t("div",Qs,s(((o=x.user)==null?void 0:o.email)||x.guest_email||"No email"),1)]),t("td",Bs,s(u(x.completed_at)),1),t("td",Fs,s(y(x.time_spent)),1),h[0]||(h[0]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"}," Action ",-1))])}),128))])]),i.attempts.links&&i.attempts.links.length>3?(l(),d("div",Ns,[t("div",qs,[t("div",Ds," Showing "+s(i.attempts.from)+" to "+s(i.attempts.to)+" of "+s(i.attempts.total)+" results ",1),t("div",Ps,[(l(!0),d(w,null,A(i.attempts.links,x=>(l(),N(C(O),{key:x.label,href:x.url||"#",class:z(["px-3 py-1 rounded-md text-sm",{"bg-green-100 text-green-700":x.active,"text-gray-500 hover:text-gray-700":!x.active&&x.url,"text-gray-300 cursor-not-allowed":!x.url}]),innerHTML:x.label},null,8,["href","class","innerHTML"]))),128))])])])):j("",!0)]))}},Ls={class:"flex justify-between items-center"},Is={class:"font-semibold text-xl text-gray-800 leading-tight"},Hs={class:"flex space-x-2"},Vs={class:"py-6"},Us={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Gs={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-100"},Zs={class:"p-6 bg-white border-b border-gray-200"},Js={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ks={class:"mb-6"},Ws={class:"flex flex-wrap gap-2"},Xs={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-100"},Ys={class:"p-6 bg-white border-b border-gray-200"},to={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},eo={class:"p-6 bg-white border-b border-gray-200"},so={__name:"Index",props:{quiz:Object,analysis:Array,groups:Array,questionStats:Array,averageScore:Number,passRate:Number,attempts:Object,attempt:Object,questionpools:Object},setup(i){return(u,y)=>(l(),N(q,{title:`Results: ${i.quiz.title}`},{header:T(()=>[t("div",Ls,[t("h2",Is,s(i.quiz.quiz_type==="survey"?"Survey Results":"Results Analysis")+": "+s(i.quiz.title),1),t("div",Hs,[S(C(O),{href:u.route("examiner.quizzes.show",i.quiz.id),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:T(()=>[y[0]||(y[0]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),B(" Back to "+s(i.quiz.quiz_type==="survey"?"Survey":"Quiz"),1)]),_:1,__:[0]},8,["href"])])])]),default:T(()=>[t("div",Vs,[t("div",Us,[i.quiz.quiz_type==="survey"?(l(),d(w,{key:0},[S(lt,{quiz:i.quiz,analysis:i.analysis,questionStats:i.questionStats,attempts:i.attempts,class:"mb-6"},null,8,["quiz","analysis","questionStats","attempts"]),S(Pe,{quiz:i.quiz,attempts:i.attempts,questionStats:i.questionStats,class:"mb-6"},null,8,["quiz","attempts","questionStats"]),S(Ms,{quiz:i.quiz,attempts:i.attempts,questionStats:i.questionStats,class:"mb-6"},null,8,["quiz","attempts","questionStats"]),t("div",Gs,[t("div",Zs,[y[1]||(y[1]=t("h3",{class:"text-lg font-medium mb-4"},"Individual Responses",-1)),S(Es,{quiz:i.quiz,attempts:i.attempts},null,8,["quiz","attempts"])])])],64)):(l(),d(w,{key:1},[t("div",Js,[S(F,{title:"Total Attempts",value:i.analysis.total_attempts,icon:"users",color:"green"},null,8,["value"]),S(F,{title:"Average Score",value:`${Math.round(i.analysis.average_score)}%`,icon:"chart-bar",color:"green"},null,8,["value"]),S(F,{title:"Pass Rate",value:`${Math.round(i.analysis.pass_rate)}%`,icon:"check-circle",color:"green"},null,8,["value"])]),t("div",Ks,[y[3]||(y[3]=t("h3",{class:"text-lg font-medium mb-2"},"Filter by Group",-1)),t("div",Ws,[S(C(O),{href:u.route("examiner.quizzes.analysis.index",i.quiz.id),class:z(["px-4 py-2 rounded-full text-sm transition-all duration-200 hover:shadow-md",{"bg-green-100 text-green-800 border border-green-200":!u.$page.url.includes("group"),"bg-gray-100 text-gray-800 border border-gray-200":u.$page.url.includes("group")}])},{default:T(()=>y[2]||(y[2]=[B(" All Participants ")])),_:1,__:[2]},8,["href","class"]),(l(!0),d(w,null,A(i.groups,p=>(l(),N(C(O),{key:p.id,href:u.route("examiner.quizzes.analysis.group",{quiz:i.quiz.id,group:p.id}),class:z(["px-4 py-2 rounded-full text-sm transition-all duration-200 hover:shadow-md",{"bg-green-100 text-green-800 border border-green-200":u.$page.url.includes(`group=${p.id}`),"bg-gray-100 text-gray-800 border border-gray-200":!u.$page.url.includes(`group=${p.id}`)}])},{default:T(()=>[B(s(p.name)+" ("+s(p.members_count)+") ",1)]),_:2},1032,["href","class"]))),128))])]),t("div",Xs,[t("div",Ys,[y[4]||(y[4]=t("h3",{class:"text-lg font-medium mb-4"},"Attempts",-1)),S(E,{quiz:i.quiz,attempts:i.attempts,grouped:!0,"quiz-id":i.quiz.id},null,8,["quiz","attempts","quiz-id"])])]),t("div",to,[t("div",eo,[y[5]||(y[5]=t("h3",{class:"text-lg font-medium mb-4"},"Question Performance",-1)),S(P,{attempts:i.attempt,quiz:i.quiz},null,8,["attempts","quiz"])])])],64))])])]),_:1},8,["title"]))}},xo=L(so,[["__scopeId","data-v-3787ff16"]]);export{xo as default};
