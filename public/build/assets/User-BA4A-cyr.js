import{Q as N,d as g,q as S,c as f,o as n,w as c,a as e,b as r,e as a,f as b,g as p,u as _,S as v,F as y,h,t as d,n as $,j,W as x}from"./app-BYM1Msdw.js";import{_ as A,A as E}from"./AppLayout-AFbEt38E.js";import{_ as M}from"./InputLabel-CQZ4SiqB.js";import{_ as U}from"./TextInput-qokQ35BQ.js";import{_ as V}from"./Modal-DnWCrIyE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"container-xxl flex-grow-1 container-p-y"},L={class:"card"},q={class:"card-header d-flex justify-content-between align-items-center"},B={class:"d-flex gap-2"},I={class:"table-responsive text-nowrap"},F={class:"table table-hover"},H={class:"table-border-bottom-0"},O={key:0,class:"badge bg-label-info"},T={key:1,class:"text-muted"},W={class:"badge bg-label-primary"},Q={class:"dropdown"},R={class:"dropdown-menu"},G=["onClick"],J={key:0},K={key:0,class:"card-footer"},P={class:"d-flex justify-content-end"},X={class:"pagination mb-0"},Y={class:"p-6"},Z={class:"mb-4"},ee={class:"flex justify-end gap-2 mt-6"},te=["disabled"],se={key:0},ne={key:1},me={__name:"User",props:{users:Object,designations:Array,organization_id:Object},setup(u){N();const i=g(!1),l=g({name:"",organization_id:null}),w=()=>{i.value=!0},k=()=>{x.post(route("examiner.users.designations.store"),l.value,{preserveScroll:!0,onSuccess:()=>{i.value=!1,l.value.name=""},onError:o=>{console.error("Error creating designation:",o)}})},D=o=>{confirm("Are you sure you want to delete this user?")&&x.delete(route("examiner.user.destroy",o),{preserveScroll:!0})};return(o,t)=>{const C=S("InputError");return n(),f(E,{title:"Users"},{default:c(()=>[e("div",z,[e("div",L,[e("div",q,[t[5]||(t[5]=e("div",null,[e("h5",{class:"mb-0"},"User Management")],-1)),e("div",B,[e("button",{onClick:w,class:"btn btn-primary"},t[3]||(t[3]=[e("i",{class:"bx bx-plus me-1"},null,-1),p(" New Designation ")])),r(_(v),{href:o.route("examiner.user.create"),class:"btn btn-primary"},{default:c(()=>t[4]||(t[4]=[e("i",{class:"bx bx-plus me-1"},null,-1),p(" Add User ")])),_:1,__:[4]},8,["href"])])]),e("div",I,[e("table",F,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Designation"),e("th",null,"Unique ID"),e("th",null,"Created On"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",H,[(n(!0),a(y,null,h(u.users.data,s=>{var m;return n(),a("tr",{key:s.id},[e("td",null,[e("strong",null,d(s.name),1)]),e("td",null,d(s.email),1),e("td",null,[(m=s.organization_member)!=null&&m.designation?(n(),a("span",O,d(s.organization_member.designation.name),1)):(n(),a("span",T,"-"))]),e("td",null,[e("span",W,d(s.organization_member.unique_code||"No ID"),1)]),e("td",null,d(new Date(s.created_at).toLocaleDateString()),1),t[9]||(t[9]=e("td",null,[e("span",{class:"badge bg-label-success me-1"},"Active")],-1)),e("td",null,[e("div",Q,[t[8]||(t[8]=e("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[e("i",{class:"bx bx-dots-vertical-rounded"})],-1)),e("div",R,[r(_(v),{href:o.route("examiner.user.edit",s.id),class:"dropdown-item"},{default:c(()=>t[6]||(t[6]=[e("i",{class:"bx bx-edit-alt me-1"},null,-1),p(" Edit ")])),_:2,__:[6]},1032,["href"]),e("a",{href:"javascript:void(0);",class:"dropdown-item",onClick:ae=>D(s.id)},t[7]||(t[7]=[e("i",{class:"bx bx-trash me-1"},null,-1),p(" Delete ")]),8,G)])])])])}),128)),u.users.data.length===0?(n(),a("tr",J,t[10]||(t[10]=[e("td",{colspan:"7",class:"text-center py-4"},"No users found.",-1)]))):b("",!0)])])]),u.users.links.length>3?(n(),a("div",K,[e("div",P,[e("nav",null,[e("ul",X,[(n(!0),a(y,null,h(u.users.links,(s,m)=>(n(),a("li",{key:m,class:$(["page-item",{active:s.active,disabled:!s.url}])},[r(A,{class:"page-link",href:s.url||"#",innerHTML:s.label},null,8,["href","innerHTML"])],2))),128))])])])])):b("",!0)])]),r(V,{show:i.value,onClose:t[2]||(t[2]=s=>i.value=!1),maxWidth:"md"},{default:c(()=>[e("div",Y,[t[12]||(t[12]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New Designation",-1)),e("form",{onSubmit:j(k,["prevent"])},[e("div",Z,[r(M,{for:"designation",value:"Designation Name"}),r(U,{id:"designation",modelValue:l.value.name,"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.name=s),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",placeholder:"e.g. Senior Developer, HR Manager"},null,8,["modelValue"]),o.$page.props.errors.name?(n(),f(C,{key:0,message:o.$page.props.errors.name,class:"mt-2"},null,8,["message"])):b("",!0)]),e("div",ee,[e("button",{type:"button",onClick:t[1]||(t[1]=s=>i.value=!1),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:l.value.processing},[l.value.processing?(n(),a("span",se,"Creating...")):(n(),a("span",ne,"Create Designation"))],8,te)])],32)])]),_:1},8,["show"])]),_:1})}}};export{me as default};
