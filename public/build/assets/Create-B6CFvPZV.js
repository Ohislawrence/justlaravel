import{A as I}from"./AppLayout-AFbEt38E.js";import{S as C,q as a,c as z,o as n,w as v,a as o,j as M,e as u,f as d,m as g,b as r,F as U,h as F,t as c,z as P,v as x,p as S,x as T}from"./app-BYM1Msdw.js";import{_ as B,a as A,b as j,c as L,d as Q,e as G,f as O}from"./OrderingEditor-CQB1VyoY.js";import{_ as N}from"./InputError-7uXWI0Ax.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={components:{AppLayout:I,Link:C,MultipleChoiceEditor:O,TrueFalseEditor:G,ShortAnswerEditor:Q,EssayEditor:L,FillInTheBlankEditor:j,MatchingEditor:A,OrderingEditor:B,InputError:N},props:{quiz:Object,questionTypes:Object,question:Object},data(){var l,e,f,p,s,i,m,b,y;return{form:T({type:((l=this.question)==null?void 0:l.type)||"multiple_choice",question:((e=this.question)==null?void 0:e.question)||"",description:((f=this.question)==null?void 0:f.description)||"",image:null,points:((p=this.question)==null?void 0:p.points)||1,time_limit:((s=this.question)==null?void 0:s.time_limit)||null,is_required:((i=this.question)==null?void 0:i.is_required)||!1,options:((m=this.question)==null?void 0:m.options)||null,correct_answers:((b=this.question)==null?void 0:b.correct_answers)||[],settings:{rubric:[],distractors:[]}}),imagePreview:((y=this.question)==null?void 0:y.image)||null,removeImage:!1}},computed:{editing(){return!!this.question}},methods:{handleImageChange(l){const e=l.target.files[0];if(e){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)"),l.target.value="";return}const p=5*1024*1024;if(e.size>p){alert("Image size must be less than 5MB"),l.target.value="";return}this.form.image=e;const s=new FileReader;s.onload=i=>{this.imagePreview=i.target.result},s.readAsDataURL(e),this.removeImage=!1}},removeCurrentImage(){this.form.image=null,this.imagePreview=null,this.removeImage=!0;const l=this.$refs.imageInput;l&&(l.value="")},submitForm(){this.removeImage&&this.editing&&(this.form.remove_image=!0),this.editing?this.form.put(route("examiner.quizzes.questions.update",{quiz:this.quiz.id,question:this.question.id}),{preserveScroll:!0,onSuccess:()=>{},onError:l=>{console.log("Validation errors:",l)}}):this.form.post(route("examiner.quizzes.questions.store",this.quiz.id),{preserveScroll:!0,onSuccess:()=>{},onError:l=>{console.log("Validation errors:",l)}})},cancel(){this.$inertia.visit(route("examiner.quizzes.questions.index",this.quiz.id))}}},J={class:"font-semibold text-xl text-gray-800 leading-tight"},W={class:"py-6"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6 bg-white border-b border-gray-200"},Y={class:"grid grid-cols-1 gap-6"},Z=["value"],$={class:"mt-1"},ee={key:0,class:"mb-4"},se={class:"relative inline-block"},oe=["src"],te={class:"text-sm text-gray-500 mt-2"},re={class:"inline-flex items-center"},ie={key:0},le={key:1},ne={key:2},me={key:3},ue={key:4},de={key:5},ae={key:6},fe={key:7},ge={key:8},pe={key:9},ce={class:"flex justify-end"},be=["disabled"];function ye(l,e,f,p,s,i){const m=a("InputError"),b=a("MultipleChoiceEditor"),y=a("TrueFalseEditor"),h=a("ShortAnswerEditor"),w=a("EssayEditor"),k=a("FillInTheBlankEditor"),q=a("MatchingEditor"),E=a("OrderingEditor"),V=a("AppLayout");return n(),z(V,{title:"Add question"},{header:v(()=>[o("h2",J,c(i.editing?"Edit":"Create")+" Question for "+c(f.quiz.title)+" Quiz ",1)]),default:v(()=>[o("div",W,[o("div",H,[o("div",K,[o("div",X,[o("form",{onSubmit:e[16]||(e[16]=M((...t)=>i.submitForm&&i.submitForm(...t),["prevent"]))},[o("div",Y,[o("div",null,[e[17]||(e[17]=o("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),g(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.form.type=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[(n(!0),u(U,null,F(f.questionTypes,(t,_)=>(n(),u("option",{key:_,value:_},c(t),9,Z))),128))],512),[[P,s.form.type]]),r(m,{message:s.form.errors.type,class:"mt-2"},null,8,["message"])]),o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),g(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.form.question=t),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[x,s.form.question]]),r(m,{message:s.form.errors.question,class:"mt-2"},null,8,["message"])]),o("div",null,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),g(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.form.description=t),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[x,s.form.description]]),r(m,{message:s.form.errors.description,class:"mt-2"},null,8,["message"])]),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),o("div",$,[s.imagePreview?(n(),u("div",ee,[o("div",se,[o("img",{src:s.imagePreview,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300"},null,8,oe),o("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>i.removeCurrentImage&&i.removeCurrentImage(...t)),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500"},e[20]||(e[20]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("p",te,c(i.editing&&!s.form.image?"Current image":"Preview"),1)])):d("",!0),o("input",{ref:"imageInput",type:"file",accept:"image/*",onChange:e[4]||(e[4]=(...t)=>i.handleImageChange&&i.handleImageChange(...t)),class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,544),e[21]||(e[21]=o("p",{class:"text-xs text-gray-500 mt-1"}," Supported formats: JPEG, PNG, GIF, WebP. Maximum size: 5MB. ",-1))]),r(m,{message:s.form.errors.image,class:"mt-2"},null,8,["message"])]),o("div",null,[e[23]||(e[23]=o("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),g(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.form.points=t),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[x,s.form.points]]),r(m,{message:s.form.errors.points,class:"mt-2"},null,8,["message"])]),o("div",null,[e[24]||(e[24]=o("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),g(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.form.time_limit=t),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[x,s.form.time_limit]]),r(m,{message:s.form.errors.time_limit,class:"mt-2"},null,8,["message"])]),o("div",null,[o("label",re,[g(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.form.is_required=t),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[S,s.form.is_required]]),e[25]||(e[25]=o("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),r(m,{message:s.form.errors.is_required,class:"mt-2"},null,8,["message"])]),s.form.type==="multiple_choice"?(n(),u("div",ie,[r(b,{modelValue:s.form,"onUpdate:modelValue":e[8]||(e[8]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.type==="true_false"?(n(),u("div",le,[r(y,{modelValue:s.form,"onUpdate:modelValue":e[9]||(e[9]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.type==="short_answer"?(n(),u("div",ne,[r(h,{modelValue:s.form,"onUpdate:modelValue":e[10]||(e[10]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.type==="essay"?(n(),u("div",me,[r(w,{modelValue:s.form,"onUpdate:modelValue":e[11]||(e[11]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.type==="fill_in_the_blank"?(n(),u("div",ue,[r(k,{modelValue:s.form,"onUpdate:modelValue":e[12]||(e[12]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.type==="matching"?(n(),u("div",de,[r(q,{modelValue:s.form,"onUpdate:modelValue":e[13]||(e[13]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.type==="ordering"?(n(),u("div",ae,[r(E,{modelValue:s.form,"onUpdate:modelValue":e[14]||(e[14]=t=>s.form=t)},null,8,["modelValue"])])):d("",!0),s.form.errors.options?(n(),u("div",fe,[r(m,{message:s.form.errors.options,class:"mt-2"},null,8,["message"])])):d("",!0),s.form.errors.correct_answers?(n(),u("div",ge,[r(m,{message:s.form.errors.correct_answers,class:"mt-2"},null,8,["message"])])):d("",!0),s.form.errors.settings?(n(),u("div",pe,[r(m,{message:s.form.errors.settings,class:"mt-2"},null,8,["message"])])):d("",!0),o("div",ce,[o("button",{type:"button",onClick:e[15]||(e[15]=(...t)=>i.cancel&&i.cancel(...t)),class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o("button",{type:"submit",disabled:s.form.processing,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring focus:ring-blue-300 disabled:opacity-25 transition"},c(i.editing?"Update":"Create")+" Question ",9,be)])])],32)])])])])]),_:1})}const ke=D(R,[["render",ye]]);export{ke as default};
