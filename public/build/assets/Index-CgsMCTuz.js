import{A as q}from"./AppLayout-DrgNT64Z.js";import{f as b,d as l,o as i,a as t,h as T,t as s,F as $,l as k,n as M,G as j,i as D,c as F,w as R,b as S,j as O,S as Q,k as N}from"./app-DvBnAnlC.js";import{S as B}from"./SummaryCard-vCzw687C.js";import{Q as P}from"./QuestionStatsTable-DmT06mi1.js";import{A as E}from"./AttemptsTable-CnRzKNv0.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./CheckCircleIcon-EipSNZia.js";import"./ClockIcon-DtRWPsTi.js";import"./Pagination-Dbd3zFI7.js";const L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},V={class:"p-6"},H={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},U={class:"text-center p-4 bg-green-50 rounded-lg"},G={class:"text-2xl font-bold text-green-600"},Z={class:"text-center p-4 bg-blue-50 rounded-lg"},J={class:"text-2xl font-bold text-blue-600"},K={class:"text-center p-4 bg-purple-50 rounded-lg"},W={class:"text-2xl font-bold text-purple-600"},X={class:"text-center p-4 bg-orange-50 rounded-lg"},Y={class:"text-2xl font-bold text-orange-600"},tt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},et={class:"text-center p-3 bg-gray-50 rounded-lg"},st={class:"text-lg font-bold text-gray-700"},ot={class:"text-center p-3 bg-gray-50 rounded-lg"},nt={class:"text-lg font-bold text-gray-700"},rt={class:"text-center p-3 bg-gray-50 rounded-lg"},at={class:"text-lg font-bold text-gray-700"},it={__name:"SurveySummary",props:{quiz:Object,analysis:Object,attempts:Object,questionStats:Array},setup(u){const g=u,p=b(()=>{var y,c,r;const e=g.analysis.total_attempts||0,n=((r=(c=(y=g.attempts)==null?void 0:y.data)==null?void 0:c.filter(a=>a.completed_at))==null?void 0:r.length)||0;return e>0?Math.round(n/e*100):0}),v=b(()=>{var a;const e=((a=g.attempts)==null?void 0:a.data)||[];if(e.length===0)return"0m";const n=e.reduce((x,m)=>x+(Number(m.time_spent)||0),0),y=Math.round(n/e.length),c=Math.floor(y/60),r=y%60;return c===0?`${r}s`:r===0?`${c}m`:`${c}m ${r}s`}),_=b(()=>{var y;const e=((y=g.attempts)==null?void 0:y.data)||[],n=new Set;return e.forEach(c=>{c.user_id?n.add(`user_${c.user_id}`):c.guest_email?n.add(`guest_${c.guest_email}`):c.guest_id&&n.add(`guest_${c.guest_id}`)}),n.size}),h=b(()=>{var e;return((e=g.questionStats)==null?void 0:e.length)||0}),d=b(()=>{var y;const e=g.analysis.total_attempts||0,n=((y=g.questionStats)==null?void 0:y.length)||1;return Math.round(e/n)}),o=b(()=>{var c,r;const n=(((c=g.questionStats)==null?void 0:c.length)||0)*(g.analysis.total_attempts||0);if(n===0)return 0;const y=((r=g.questionStats)==null?void 0:r.reduce((a,x)=>a+(x.total_responses||0),0))||0;return Math.round(y/n*100)});return(e,n)=>(i(),l("div",L,[t("div",V,[n[7]||(n[7]=t("h3",{class:"text-lg font-medium mb-4"},"Survey Overview",-1)),t("div",H,[t("div",U,[t("div",G,s(u.analysis.total_attempts||0),1),n[0]||(n[0]=t("div",{class:"text-sm text-green-800"},"Total Responses",-1))]),t("div",Z,[t("div",J,s(p.value)+"%",1),n[1]||(n[1]=t("div",{class:"text-sm text-blue-800"},"Completion Rate",-1))]),t("div",K,[t("div",W,s(v.value),1),n[2]||(n[2]=t("div",{class:"text-sm text-purple-800"},"Avg. Time",-1))]),t("div",X,[t("div",Y,s(_.value),1),n[3]||(n[3]=t("div",{class:"text-sm text-orange-800"},"Unique Respondents",-1))])]),u.quiz.quiz_type==="survey"?(i(),l("div",tt,[t("div",et,[t("div",st,s(h.value),1),n[4]||(n[4]=t("div",{class:"text-xs text-gray-600"},"Total Questions",-1))]),t("div",ot,[t("div",nt,s(d.value),1),n[5]||(n[5]=t("div",{class:"text-xs text-gray-600"},"Avg. Responses per Q",-1))]),t("div",rt,[t("div",at,s(o.value)+"%",1),n[6]||(n[6]=t("div",{class:"text-xs text-gray-600"},"Overall Response Rate",-1))])])):T("",!0)])]))}},lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},dt={class:"p-6"},ct={class:"space-y-6"},ut={class:"flex justify-between items-start mb-3"},gt={class:"font-medium text-gray-900"},mt={class:"flex items-center space-x-2 mt-1"},xt={class:"text-xs px-2 py-1 bg-gray-100 rounded-full"},pt={class:"text-xs text-gray-500"},_t={key:0,class:"text-xs text-gray-500"},yt={class:"text-right"},vt={key:0,class:"space-y-3"},ht={class:"space-y-2"},ft={class:"flex items-center flex-1"},bt={class:"text-sm text-gray-700"},wt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},$t={class:"flex items-center space-x-2 w-48"},St={class:"flex-1 bg-gray-200 rounded-full h-2"},kt={class:"text-xs text-gray-600 w-12"},zt={class:"text-xs text-gray-500 w-8 text-right"},At={class:"pt-2 border-t border-gray-100"},Mt={class:"flex justify-between text-xs text-gray-500"},jt={key:1,class:"space-y-3"},Rt={key:0,class:"bg-yellow-50 p-3 rounded border border-yellow-200"},Tt={key:1,class:"space-y-2"},Ct={class:"flex items-center flex-1"},Ot={class:"text-sm text-gray-700 font-medium"},Qt={key:0,class:"ml-2 text-xs text-green-600 font-medium"},Nt={class:"flex items-center space-x-2 w-48"},Bt={class:"flex-1 bg-gray-200 rounded-full h-2"},Ft={class:"text-xs text-gray-600 w-12"},qt={class:"text-xs text-gray-500 w-8 text-right"},Dt={key:2,class:"pt-2 border-t border-gray-100"},Pt={class:"flex justify-between text-xs text-gray-500"},Et={key:2,class:"space-y-3"},It={class:"text-sm text-gray-600 mb-2"},Lt={class:"bg-gray-50 p-3 rounded"},Vt={class:"space-y-2 text-xs"},Ht={class:"flex justify-between"},Ut={class:"font-medium"},Gt={class:"flex justify-between"},Zt={class:"font-medium"},Jt={key:3,class:"space-y-3"},Kt={class:"text-sm text-gray-600 mb-2"},Wt={class:"bg-gray-50 p-3 rounded"},Xt={class:"space-y-2 text-xs"},Yt={class:"flex justify-between"},te={class:"font-medium"},ee={class:"flex justify-between"},se={class:"font-medium"},oe={class:"flex justify-between"},ne={class:"font-medium"},re={key:4,class:"space-y-3"},ae={class:"text-sm text-gray-600 mb-2"},ie={class:"bg-gray-50 p-3 rounded"},le={class:"space-y-2 text-xs"},de={class:"flex justify-between"},ce={class:"font-medium"},ue={class:"flex justify-between"},ge={class:"font-medium"},me={key:5,class:"space-y-3"},xe={class:"text-sm text-gray-600"},pe={class:"bg-gray-50 p-3 rounded"},_e={key:0,class:"space-y-2"},ye={class:"flex-1"},ve={class:"flex items-center space-x-2 w-32"},he={class:"flex-1 bg-gray-200 rounded-full h-1.5"},fe={class:"text-gray-600 w-8"},be={class:"text-gray-500 w-8 text-right"},we={key:1,class:"text-xs text-gray-500"},$e={key:6,class:"space-y-3"},Se={class:"text-sm text-gray-600"},ke={class:"bg-gray-50 p-3 rounded"},ze={class:"space-y-2 text-xs"},Ae={class:"flex justify-between"},Me={class:"font-medium"},je={class:"flex justify-between"},Re={class:"font-medium"},Te={key:7,class:"bg-yellow-50 p-3 rounded"},Ce={class:"text-sm text-yellow-700"},Oe={class:"grid grid-cols-3 gap-2 mt-3 text-xs"},Qe={class:"text-center p-2 bg-blue-50 rounded"},Ne={class:"font-medium text-blue-700"},Be={class:"text-center p-2 bg-green-50 rounded"},Fe={class:"font-medium text-green-700"},qe={class:"text-center p-2 bg-purple-50 rounded"},De={class:"font-medium text-purple-700"},Pe={__name:"SurveyBreakdown",props:{quiz:Object,attempts:Object,questionStats:Array},setup(u){const g=d=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[d]||d,p=d=>({Easy:"text-green-600",Medium:"text-yellow-600",Hard:"text-red-600","N/A":"text-gray-600"})[d]||"text-gray-600",v=d=>{var o;if(d.options_stats&&Array.isArray(d.options_stats))return d.options_stats;if(d.type==="true_false"){const e=((o=d.correct_answers)==null?void 0:o[0])??d.correct_answer??(d.correct_answers?d.correct_answers[0]:null);return console.log("True/False question data:",{question:d,correctAnswer:e,options_stats:d.options_stats}),[{option:"True",value:"true",count:0,is_correct:e==="true"||e===!0||e===1},{option:"False",value:"false",count:0,is_correct:e==="false"||e===!1||e===0}]}return[]},_=(d,o)=>{const e=d.total_responses||0;if(e===0)return 0;const n=o.count||0;return Math.round(n/e*100)},h=d=>{const o=d.total_responses||0,e=d.correct_responses||0;return o>0?Math.round(e/o*100):0};return(d,o)=>(i(),l("div",lt,[t("div",dt,[o[23]||(o[23]=t("h3",{class:"text-lg font-medium mb-4"},"Survey Response Breakdown",-1)),t("div",ct,[(i(!0),l($,null,k(u.questionStats,e=>(i(),l("div",{key:e.id,class:"border-b pb-4 last:border-b-0"},[t("div",ut,[t("div",null,[t("h4",gt,s(e.question||"Question"),1),t("div",mt,[t("span",xt,s(g(e.type)),1),t("span",pt,s(e.total_responses||0)+" responses",1),e.points?(i(),l("span",_t,s(e.points)+" points",1)):T("",!0)])]),t("div",yt,[t("span",{class:M(["text-sm font-medium",p(e.difficulty)])},s(e.difficulty||"N/A"),3),o[0]||(o[0]=t("div",{class:"text-xs text-gray-500"},"Difficulty",-1))])]),e.type==="multiple_choice"?(i(),l("div",vt,[t("div",ht,[(i(!0),l($,null,k(v(e),(n,y)=>(i(),l("div",{key:y,class:"flex items-center justify-between"},[t("div",ft,[t("span",bt,s(n.option),1),n.is_correct?(i(),l("span",wt,s(n.percentage),1)):T("",!0)]),t("div",$t,[t("div",St,[t("div",{class:M(["h-2 rounded-full transition-all duration-500",n.is_correct?"bg-green-500":"bg-blue-500"]),style:j({width:`${_(e,n)}%`})},null,6)]),t("span",kt,s(_(e,n))+"%",1),t("span",zt,"("+s(n.count)+")",1)])]))),128))]),t("div",At,[t("div",Mt,[o[1]||(o[1]=t("span",null,"Correct answers are highlighted in green",-1)),t("span",null,s(h(e))+"% answered correctly",1)])])])):e.type==="true_false"?(i(),l("div",jt,[v(e).length?(i(),l("div",Tt,[(i(!0),l($,null,k(v(e),(n,y)=>(i(),l("div",{key:y,class:"flex items-center justify-between"},[t("div",Ct,[t("span",Ot,s(n.option),1),n.is_correct?(i(),l("span",Qt,"✓ Correct Answer")):T("",!0)]),t("div",Nt,[t("div",Bt,[t("div",{class:M(["h-2 rounded-full transition-all duration-500",n.is_correct?"bg-green-500":"bg-red-400"]),style:j({width:`${_(e,n)}%`})},null,6)]),t("span",Ft,s(_(e,n))+"%",1),t("span",qt,"("+s(n.count)+")",1)])]))),128))])):(i(),l("div",Rt,o[2]||(o[2]=[t("p",{class:"text-sm text-yellow-700"},"No response data available for this True/False question",-1)]))),v(e).length?(i(),l("div",Dt,[t("div",Pt,[o[3]||(o[3]=t("span",null,"Correct answer is highlighted in green",-1)),t("span",null,s(h(e))+"% answered correctly",1)])])):T("",!0)])):e.type==="fill_in_blank"?(i(),l("div",Et,[t("div",It,s(e.total_responses||0)+" responses collected ",1),t("div",Lt,[o[6]||(o[6]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Response Summary:",-1)),t("div",Vt,[t("div",Ht,[o[4]||(o[4]=t("span",null,"Average time spent:",-1)),t("span",Ut,s(Math.round(e.average_time||0))+" seconds",1)]),t("div",Gt,[o[5]||(o[5]=t("span",null,"Average points earned:",-1)),t("span",Zt,s(Math.round(e.average_points||0))+" / "+s(e.points),1)])]),o[7]||(o[7]=t("p",{class:"text-xs text-gray-500 mt-3"}," For detailed text responses, view individual attempts ",-1))])])):e.type==="short_answer"?(i(),l("div",Jt,[t("div",Kt,s(e.total_responses||0)+" responses collected ",1),t("div",Wt,[o[11]||(o[11]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Response Summary:",-1)),t("div",Xt,[t("div",Yt,[o[8]||(o[8]=t("span",null,"Average time spent:",-1)),t("span",te,s(Math.round(e.average_time||0))+" seconds",1)]),t("div",ee,[o[9]||(o[9]=t("span",null,"Average points earned:",-1)),t("span",se,s(Math.round(e.average_points||0))+" / "+s(e.points),1)]),t("div",oe,[o[10]||(o[10]=t("span",null,"Correct responses:",-1)),t("span",ne,s(e.correct_responses||0)+" ("+s(h(e))+"%)",1)])])])])):e.type==="essay"?(i(),l("div",re,[t("div",ae,s(e.total_responses||0)+" responses collected ",1),t("div",ie,[o[14]||(o[14]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Response Summary:",-1)),t("div",le,[t("div",de,[o[12]||(o[12]=t("span",null,"Average time spent:",-1)),t("span",ce,s(Math.round(e.average_time||0))+" seconds",1)]),t("div",ue,[o[13]||(o[13]=t("span",null,"Average points earned:",-1)),t("span",ge,s(Math.round(e.average_points||0))+" / "+s(e.points),1)])]),o[15]||(o[15]=t("p",{class:"text-xs text-gray-500 mt-3"}," For detailed essay responses, view individual attempts ",-1))])])):e.type==="matching"?(i(),l("div",me,[t("div",xe,s(e.total_responses||0)+" matching attempts ",1),t("div",pe,[o[16]||(o[16]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Match Distribution:",-1)),e.options_stats&&e.options_stats.length>0?(i(),l("div",_e,[(i(!0),l($,null,k(e.options_stats,(n,y)=>(i(),l("div",{key:y,class:"flex items-center justify-between text-xs"},[t("span",ye,s(n.option),1),t("div",ve,[t("div",he,[t("div",{class:M(["h-1.5 rounded-full",n.is_correct?"bg-green-500":"bg-blue-500"]),style:j({width:`${_(e,n)}%`})},null,6)]),t("span",fe,s(_(e,n))+"%",1),t("span",be,"("+s(n.count)+")",1)])]))),128))])):(i(),l("div",we," No matching data available "))])])):e.type==="ordering"?(i(),l("div",$e,[t("div",Se,s(e.total_responses||0)+" ordering attempts ",1),t("div",ke,[o[19]||(o[19]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Ordering Statistics:",-1)),t("div",ze,[t("div",Ae,[o[17]||(o[17]=t("span",null,"Correct orders:",-1)),t("span",Me,s(e.correct_responses||0)+" ("+s(h(e))+"%)",1)]),t("div",je,[o[18]||(o[18]=t("span",null,"Average time spent:",-1)),t("span",Re,s(Math.round(e.average_time||0))+" seconds",1)])])])])):(i(),l("div",Te,[t("div",Ce," Response analysis not available for "+s(g(e.type))+" questions ",1)])),t("div",Oe,[t("div",Qe,[t("div",Ne,s(e.total_responses||0),1),o[20]||(o[20]=t("div",{class:"text-blue-600"},"Responses",-1))]),t("div",Be,[t("div",Fe,s(e.correct_responses||0),1),o[21]||(o[21]=t("div",{class:"text-green-600"},"Correct",-1))]),t("div",qe,[t("div",De,s(Math.round(e.average_time||0))+"s",1),o[22]||(o[22]=t("div",{class:"text-purple-600"},"Avg Time",-1))])])]))),128))])])]))}},Ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},Ie={class:"p-6"},Le={class:"mb-8"},Ve={class:"flex flex-col lg:flex-row items-center justify-between"},He={class:"lg:w-1/3 flex justify-center"},Ue={class:"relative w-48 h-48"},Ge={viewBox:"0 0 100 100",class:"w-full h-full"},Ze=["d","fill","onMouseenter"],Je={class:"absolute inset-0 flex items-center justify-center"},Ke={class:"text-center"},We={class:"text-lg font-bold"},Xe={class:"lg:w-2/3 mt-4 lg:mt-0"},Ye={class:"space-y-2"},ts={class:"flex items-center"},es={class:"text-sm font-medium"},ss={class:"text-right"},os={class:"text-sm font-bold"},ns={class:"text-xs text-gray-500"},rs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},as={class:"border rounded-lg p-4"},is={class:"h-48 flex items-center justify-center"},ls={class:"w-full max-w-xs"},ds={class:"text-sm text-gray-600"},cs={class:"flex items-center space-x-2"},us={class:"w-32 bg-gray-200 rounded-full h-3"},gs={class:"text-xs text-gray-600 w-8"},ms={class:"border rounded-lg p-4"},xs={class:"h-48 overflow-y-auto"},ps={class:"flex-1 truncate mr-2"},_s={class:"text-sm text-gray-700 truncate"},ys={class:"text-xs text-gray-500"},vs={class:"flex items-center space-x-2 w-32"},hs={class:"flex-1 bg-gray-200 rounded-full h-2"},fs={class:"text-xs text-gray-600 w-8"},bs={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},ws={class:"text-center p-4 border rounded-lg"},$s={class:"text-2xl font-bold text-green-600"},Ss={class:"text-center p-4 border rounded-lg"},ks={class:"text-2xl font-bold text-blue-600"},zs={class:"text-center p-4 border rounded-lg"},As={class:"text-2xl font-bold text-purple-600"},Ms={__name:"SurveyCharts",props:{quiz:Object,attempts:Object,questionStats:Array},setup(u){const g=u,p=D(null),v=b(()=>{var c;return((c=g.questionStats)==null?void 0:c.length)||0}),_=b(()=>{const c=g.questionStats||[],r={};c.forEach(f=>{const w=f.type||"unknown";r[w]=(r[w]||0)+1});const a=["#10B981","#3B82F6","#8B5CF6","#F59E0B","#EF4444","#6B7280"];let x=c.length,m=0;return Object.entries(r).map(([f,w],z)=>{const A=w/x*100,C={type:f.replace(/_/g," ").toUpperCase(),count:w,percentage:Math.round(A),startAngle:m,endAngle:m+A,color:a[z%a.length]};return m+=A,C})}),h=b(()=>{const c=g.questionStats||[],r={Easy:{count:0,color:"bg-green-500"},Medium:{count:0,color:"bg-yellow-500"},Hard:{count:0,color:"bg-red-500"},"N/A":{count:0,color:"bg-gray-500"}};c.forEach(x=>{const m=x.difficulty||"N/A";r[m]&&r[m].count++});const a=c.length;return Object.entries(r).map(([x,m])=>({name:x,count:m.count,percentage:a>0?m.count/a*100:0,color:m.color}))}),d=b(()=>{var a,x;const c=g.questionStats||[],r=((x=(a=g.attempts)==null?void 0:a.data)==null?void 0:x.length)||0;return c.map(m=>{var z,A;const f=m.total_responses||0,w=r>0?f/r*100:0;return{id:m.id,text:((z=m.question)==null?void 0:z.substring(0,30))+(((A=m.question)==null?void 0:A.length)>30?"...":""),type:m.type,responses:f,responseRate:Math.round(w)}}).sort((m,f)=>f.responseRate-m.responseRate)}),o=b(()=>{const c=g.questionStats||[];if(c.length===0)return"0s";const r=c.reduce((x,m)=>x+(m.average_time||0),0),a=Math.round(r/c.length);return a<60?`${a}s`:`${Math.round(a/60)}m`}),e=b(()=>{var x;const c=((x=g.attempts)==null?void 0:x.data)||[];if(c.length===0)return"0m";const r=c.reduce((m,f)=>m+(Number(f.time_spent)||0),0),a=r/3600;return a<1?`${Math.round(r/60)}m`:`${Math.round(a*10)/10}h`}),n=b(()=>{const c=g.questionStats||[];if(c.length===0)return 0;const r=c.reduce((a,x)=>{var w,z;const m=x.total_responses||0,f=((z=(w=g.attempts)==null?void 0:w.data)==null?void 0:z.length)||1;return a+m/f*100},0);return Math.round(r/c.length)}),y=c=>{const r=c.startAngle/100*360,a=c.endAngle/100*360,x=(r-90)*Math.PI/180,m=(a-90)*Math.PI/180,f=50+35*Math.cos(x),w=50+35*Math.sin(x),z=50+35*Math.cos(m),A=50+35*Math.sin(m),C=a-r>180?1:0;return`M50,50 L${f},${w} A35,35 0 ${C},1 ${z},${A} Z`};return(c,r)=>(i(),l("div",Ee,[t("div",Ie,[r[9]||(r[9]=t("h3",{class:"text-lg font-medium mb-4"},"Survey Analytics",-1)),t("div",Le,[r[3]||(r[3]=t("h4",{class:"font-medium mb-3 text-center"},"Question Types Distribution",-1)),t("div",Ve,[t("div",He,[t("div",Ue,[(i(),l("svg",Ge,[(i(!0),l($,null,k(_.value,(a,x)=>(i(),l("path",{key:a.type,d:y(a),fill:a.color,class:"transition-all duration-300 hover:opacity-80 cursor-pointer",onMouseenter:m=>p.value=a.type,onMouseleave:r[0]||(r[0]=m=>p.value=null)},null,40,Ze))),128)),r[1]||(r[1]=t("circle",{cx:"50",cy:"50",r:"30",fill:"white"},null,-1))])),t("div",Je,[t("div",Ke,[t("div",We,s(v.value),1),r[2]||(r[2]=t("div",{class:"text-xs text-gray-600"},"Total Questions",-1))])])])]),t("div",Xe,[t("div",Ye,[(i(!0),l($,null,k(_.value,a=>(i(),l("div",{key:a.type,class:M(["flex items-center justify-between p-2 rounded hover:bg-gray-50 transition-colors",{"bg-gray-50":p.value===a.type}])},[t("div",ts,[t("div",{class:"w-3 h-3 rounded-full mr-2",style:j({backgroundColor:a.color})},null,4),t("span",es,s(a.type),1)]),t("div",ss,[t("div",os,s(a.count),1),t("div",ns,s(a.percentage)+"%",1)])],2))),128))])])])]),t("div",rs,[t("div",as,[r[4]||(r[4]=t("h4",{class:"font-medium mb-3 text-center"},"Question Difficulty",-1)),t("div",is,[t("div",ls,[(i(!0),l($,null,k(h.value,a=>(i(),l("div",{key:a.name,class:"flex items-center justify-between mb-2"},[t("span",ds,s(a.name),1),t("div",cs,[t("div",us,[t("div",{class:M(["h-3 rounded-full transition-all duration-500",a.color]),style:j({width:`${a.percentage}%`})},null,6)]),t("span",gs,s(a.count),1)])]))),128))])])]),t("div",ms,[r[5]||(r[5]=t("h4",{class:"font-medium mb-3 text-center"},"Response Rates",-1)),t("div",xs,[(i(!0),l($,null,k(d.value,a=>(i(),l("div",{key:a.id,class:"flex items-center justify-between mb-3"},[t("div",ps,[t("div",_s,s(a.text),1),t("div",ys,s(a.type),1)]),t("div",vs,[t("div",hs,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:j({width:`${a.responseRate}%`})},null,4)]),t("span",fs,s(a.responseRate)+"%",1)])]))),128))])])]),t("div",bs,[t("div",ws,[t("div",$s,s(o.value),1),r[6]||(r[6]=t("div",{class:"text-sm text-gray-600"},"Avg. Time per Question",-1))]),t("div",Ss,[t("div",ks,s(e.value),1),r[7]||(r[7]=t("div",{class:"text-sm text-gray-600"},"Total Survey Time",-1))]),t("div",zs,[t("div",As,s(n.value)+"%",1),r[8]||(r[8]=t("div",{class:"text-sm text-gray-600"},"Average Completion",-1))])])])]))}},js={class:"overflow-x-auto"},Rs={class:"min-w-full divide-y divide-gray-200"},Ts={class:"bg-white divide-y divide-gray-200"},Cs={class:"px-6 py-4 whitespace-nowrap"},Os={class:"text-sm font-medium text-gray-900"},Qs={class:"text-sm text-gray-500"},Ns={class:"px-6 py-4 whitespace-nowrap"},Bs={class:"text-sm text-gray-900"},Fs={class:"flex items-center space-x-1"},qs={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},Ds={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},Ps={class:"text-xs text-gray-500 mt-1"},Es={class:"text-xs text-gray-400"},Is={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ls={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Vs={__name:"SurveyResponsesTable",props:{quiz:Object,attempts:Object},setup(u){const g=_=>({desktop:"🖥️",mobile:"📱",tablet:"📟"})[_]||"💻",p=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Incomplete",v=_=>{if(!_)return"N/A";const h=Math.floor(_/60),d=_%60;return`${h}m ${d}s`};return(_,h)=>(i(),l("div",js,[t("table",Rs,[h[1]||(h[1]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Respondent "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Device & Location "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Completion Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Time Spent "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",Ts,[(i(!0),l($,null,k(u.attempts.data,d=>{var o,e;return i(),l("tr",{key:d.id},[t("td",Cs,[t("div",Os,s(((o=d.user)==null?void 0:o.name)||d.guest_name||"Anonymous"),1),t("div",Qs,s(((e=d.user)==null?void 0:e.email)||d.guest_email||"No email"),1)]),t("td",Ns,[t("div",Bs,[t("div",Fs,[t("span",qs,s(g(d.device_type))+" "+s(d.device_type),1),t("span",Ds,s(d.browser),1)]),t("div",Ps,s(d.city)+", "+s(d.region)+", "+s(d.country),1),t("div",Es,s(d.platform),1)])]),t("td",Is,s(p(d.completed_at)),1),t("td",Ls,s(v(d.time_spent)),1),h[0]||(h[0]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},null,-1))])}),128))])])]))}},Hs={class:"flex justify-between items-center"},Us={class:"font-semibold text-xl text-gray-800 leading-tight"},Gs={class:"flex space-x-2"},Zs={class:"py-6"},Js={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ks={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-100"},Ws={class:"p-6 bg-white border-b border-gray-200"},Xs={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ys={class:"mb-6"},to={class:"flex flex-wrap gap-2"},eo={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-100"},so={class:"p-6 bg-white border-b border-gray-200"},oo={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},no={class:"p-6 bg-white border-b border-gray-200"},ro={__name:"Index",props:{quiz:Object,analysis:Array,groups:Array,questionStats:Array,averageScore:Number,passRate:Number,attempts:Object,attempt:Object,questionpools:Object},setup(u){return(g,p)=>(i(),F(q,{title:`Results: ${u.quiz.title}`},{header:R(()=>[t("div",Hs,[t("h2",Us,s(u.quiz.quiz_type==="survey"?"Survey Results":"Results Analysis")+": "+s(u.quiz.title),1),t("div",Gs,[S(O(Q),{href:g.route("examiner.quizzes.show",u.quiz.id),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:R(()=>[p[0]||(p[0]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),N(" Back to "+s(u.quiz.quiz_type==="survey"?"Survey":"Quiz"),1)]),_:1,__:[0]},8,["href"])])])]),default:R(()=>[t("div",Zs,[t("div",Js,[u.quiz.quiz_type==="survey"?(i(),l($,{key:0},[S(it,{quiz:u.quiz,analysis:u.analysis,questionStats:u.questionStats,attempts:u.attempts,class:"mb-6"},null,8,["quiz","analysis","questionStats","attempts"]),S(Pe,{quiz:u.quiz,attempts:u.attempts,questionStats:u.questionStats,class:"mb-6"},null,8,["quiz","attempts","questionStats"]),S(Ms,{quiz:u.quiz,attempts:u.attempts,questionStats:u.questionStats,class:"mb-6"},null,8,["quiz","attempts","questionStats"]),t("div",Ks,[t("div",Ws,[p[1]||(p[1]=t("h3",{class:"text-lg font-medium mb-4"},"Individual Responses",-1)),S(Vs,{quiz:u.quiz,attempts:u.attempts},null,8,["quiz","attempts"])])])],64)):(i(),l($,{key:1},[t("div",Xs,[S(B,{title:"Total Attempts",value:u.analysis.total_attempts,icon:"users",color:"green"},null,8,["value"]),S(B,{title:"Average Score",value:`${Math.round(u.analysis.average_score)}%`,icon:"chart-bar",color:"green"},null,8,["value"]),S(B,{title:"Pass Rate",value:`${Math.round(u.analysis.pass_rate)}%`,icon:"check-circle",color:"green"},null,8,["value"])]),t("div",Ys,[p[3]||(p[3]=t("h3",{class:"text-lg font-medium mb-2"},"Filter by Group",-1)),t("div",to,[S(O(Q),{href:g.route("examiner.quizzes.analysis.index",u.quiz.id),class:M(["px-4 py-2 rounded-full text-sm transition-all duration-200 hover:shadow-md",{"bg-green-100 text-green-800 border border-green-200":!g.$page.url.includes("group"),"bg-gray-100 text-gray-800 border border-gray-200":g.$page.url.includes("group")}])},{default:R(()=>p[2]||(p[2]=[N(" All Participants ")])),_:1,__:[2]},8,["href","class"]),(i(!0),l($,null,k(u.groups,v=>(i(),F(O(Q),{key:v.id,href:g.route("examiner.quizzes.analysis.group",{quiz:u.quiz.id,group:v.id}),class:M(["px-4 py-2 rounded-full text-sm transition-all duration-200 hover:shadow-md",{"bg-green-100 text-green-800 border border-green-200":g.$page.url.includes(`group=${v.id}`),"bg-gray-100 text-gray-800 border border-gray-200":!g.$page.url.includes(`group=${v.id}`)}])},{default:R(()=>[N(s(v.name)+" ("+s(v.members_count)+") ",1)]),_:2},1032,["href","class"]))),128))])]),t("div",eo,[t("div",so,[p[4]||(p[4]=t("h3",{class:"text-lg font-medium mb-4"},"Attempts",-1)),S(E,{quiz:u.quiz,attempts:u.attempts,grouped:!0,"quiz-id":u.quiz.id},null,8,["quiz","attempts","quiz-id"])])]),t("div",oo,[t("div",no,[p[5]||(p[5]=t("h3",{class:"text-lg font-medium mb-4"},"Question Performance",-1)),S(P,{attempts:u.attempt,quiz:u.quiz},null,8,["attempts","quiz"])])])],64))])])]),_:1},8,["title"]))}},yo=I(ro,[["__scopeId","data-v-3787ff16"]]);export{yo as default};
