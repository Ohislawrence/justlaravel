import{x as z,i as _,f as E,c as F,o as r,w as B,a as t,g as G,d as i,h as a,e as p,b as n,j as o,F as L,l as D,t as f,q as R,A as y,Q as O,a0 as g,k as J}from"./app-BCsY4iWa.js";import{A as W}from"./AppLayout-zf7Q_ny_.js";import{_ as H,a as K,b as X,c as Y,d as Z,e as ee,f as se}from"./OrderingEditor-Dp7S9mGS.js";import{_ as d}from"./InputError-DUub2_ec.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const oe={class:"font-semibold text-xl text-gray-800 leading-tight"},le={class:"py-6"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},ie={class:"p-6 bg-white border-b border-gray-200"},ae={class:"grid grid-cols-1 gap-6"},ue=["value"],de={class:"mt-1"},me={key:0,class:"mb-4"},ge={class:"relative inline-block"},ce=["src"],pe={class:"text-sm text-gray-500 mt-2"},fe={class:"inline-flex items-center"},be={key:0},ve={key:1},ye={key:2},xe={key:3},we={key:4},_e={key:5},ke={key:6},Ve={key:7},he={key:8},qe={key:9},Ce={class:"flex justify-end pt-4"},Ue=["disabled"],Qe={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ie={key:1,class:"flex items-center"},Me={key:2},Pe={__name:"AddNewQuestion",props:{pool:Object,questionTypes:Object,question:Object},setup(x){var V,h,q,C,U,Q,I,M,P;const u=x,e=z({type:((V=u.question)==null?void 0:V.type)||"multiple_choice",question:((h=u.question)==null?void 0:h.question)||"",description:((q=u.question)==null?void 0:q.description)||"",image:null,points:((C=u.question)==null?void 0:C.points)||1,time_limit:((U=u.question)==null?void 0:U.time_limit)||null,is_required:((Q=u.question)==null?void 0:Q.is_required)||!1,options:((I=u.question)==null?void 0:I.options)||null,correct_answers:((M=u.question)==null?void 0:M.correct_answers)||[],settings:{rubric:[],distractors:[]}}),b=_(((P=u.question)==null?void 0:P.image)||null),w=_(!1),c=E(()=>!!u.question);function T(m){const s=m.target.files[0];if(s){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)"),m.target.value="";return}const v=5*1024*1024;if(s.size>v){alert("Image size must be less than 5MB"),m.target.value="";return}e.image=s;const j=new FileReader;j.onload=S=>{b.value=S.target.result},j.readAsDataURL(s),w.value=!1}}function A(){e.image=null,b.value=null,w.value=!0;const m=k.value;m&&(m.value="")}function N(){w.value&&c.value&&(e.remove_image=!0),e.post(route("examiner.pools.questions.store",u.pool.id),{preserveScroll:!0,onSuccess:()=>{},onError:m=>{console.log("Validation errors:",m)}})}function $(){router.visit(route("examiner.pools.questions.create"))}const k=_(null);return(m,s)=>(r(),F(W,{title:c.value?"Edit Question":"Add Question"},{header:B(()=>[t("h2",oe,f(c.value?"Edit":"Create")+" Question for "+f(x.pool.name)+" Pool ",1)]),default:B(()=>[t("div",le,[t("div",re,[t("div",ne,[t("div",ie,[t("form",{onSubmit:G(N,["prevent"])},[t("div",ae,[t("div",null,[s[13]||(s[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),p(t("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>o(e).type=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},[(r(!0),i(L,null,D(x.questionTypes,(l,v)=>(r(),i("option",{key:v,value:v},f(l),9,ue))),128))],512),[[R,o(e).type]]),n(d,{message:o(e).errors.type,class:"mt-2"},null,8,["message"])]),t("div",null,[s[14]||(s[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),p(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>o(e).question=l),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[y,o(e).question]]),n(d,{message:o(e).errors.question,class:"mt-2"},null,8,["message"])]),t("div",null,[s[15]||(s[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),p(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=l=>o(e).description=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[y,o(e).description]]),n(d,{message:o(e).errors.description,class:"mt-2"},null,8,["message"])]),t("div",null,[s[18]||(s[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),t("div",de,[b.value?(r(),i("div",me,[t("div",ge,[t("img",{src:b.value,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300 shadow-sm"},null,8,ce),t("button",{type:"button",onClick:A,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200"},s[16]||(s[16]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("p",pe,f(c.value&&!o(e).image?"Current image":"Preview"),1)])):a("",!0),t("input",{ref_key:"imageInput",ref:k,type:"file",accept:"image/*",onChange:T,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition-colors duration-200"},null,544),s[17]||(s[17]=t("p",{class:"text-xs text-gray-500 mt-1"}," Supported formats: JPEG, PNG, GIF, WebP. Maximum size: 5MB. ",-1))]),n(d,{message:o(e).errors.image,class:"mt-2"},null,8,["message"])]),t("div",null,[s[19]||(s[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),p(t("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>o(e).points=l),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[y,o(e).points]]),n(d,{message:o(e).errors.points,class:"mt-2"},null,8,["message"])]),t("div",null,[s[20]||(s[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),p(t("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o(e).time_limit=l),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[y,o(e).time_limit]]),n(d,{message:o(e).errors.time_limit,class:"mt-2"},null,8,["message"])]),t("div",null,[t("label",fe,[p(t("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>o(e).is_required=l),type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[O,o(e).is_required]]),s[21]||(s[21]=t("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),n(d,{message:o(e).errors.is_required,class:"mt-2"},null,8,["message"])]),o(e).type==="multiple_choice"?(r(),i("div",be,[n(H,{modelValue:o(e),"onUpdate:modelValue":s[6]||(s[6]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).type==="true_false"?(r(),i("div",ve,[n(K,{modelValue:o(e),"onUpdate:modelValue":s[7]||(s[7]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).type==="short_answer"?(r(),i("div",ye,[n(X,{modelValue:o(e),"onUpdate:modelValue":s[8]||(s[8]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).type==="essay"?(r(),i("div",xe,[n(Y,{modelValue:o(e),"onUpdate:modelValue":s[9]||(s[9]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).type==="fill_in_the_blank"?(r(),i("div",we,[n(Z,{modelValue:o(e),"onUpdate:modelValue":s[10]||(s[10]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).type==="matching"?(r(),i("div",_e,[n(ee,{modelValue:o(e),"onUpdate:modelValue":s[11]||(s[11]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).type==="ordering"?(r(),i("div",ke,[n(se,{modelValue:o(e),"onUpdate:modelValue":s[12]||(s[12]=l=>g(e)?e.value=l:null)},null,8,["modelValue"])])):a("",!0),o(e).errors.options?(r(),i("div",Ve,[n(d,{message:o(e).errors.options,class:"mt-2"},null,8,["message"])])):a("",!0),o(e).errors.correct_answers?(r(),i("div",he,[n(d,{message:o(e).errors.correct_answers,class:"mt-2"},null,8,["message"])])):a("",!0),o(e).errors.settings?(r(),i("div",qe,[n(d,{message:o(e).errors.settings,class:"mt-2"},null,8,["message"])])):a("",!0),t("div",Ce,[t("button",{type:"button",onClick:$,class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),t("button",{type:"submit",disabled:o(e).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition-colors duration-200 flex items-center"},[o(e).processing?a("",!0):(r(),i("svg",Qe,s[22]||(s[22]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),o(e).processing?(r(),i("span",Ie,[s[23]||(s[23]=t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),J(" "+f(c.value?"Updating...":"Creating..."),1)])):(r(),i("span",Me,f(c.value?"Update":"Create")+" Question",1))],8,Ue)])])],32)])])])])]),_:1},8,["title"]))}},Se=te(Pe,[["__scopeId","data-v-4040f492"]]);export{Se as default};
