import{l as U,x as k,c as z,o as u,w as g,a as l,j as q,e as p,f as h,b as i,u as s,m as w,z as v,n as y,F as A,h as E,t as b}from"./app-BYM1Msdw.js";import{A as S}from"./AppLayout-AFbEt38E.js";import{_ as d}from"./InputError-7uXWI0Ax.js";import{_ as n}from"./InputLabel-CQZ4SiqB.js";import{_ as M}from"./PrimaryButton-R068G9lS.js";import{_ as c}from"./TextInput-qokQ35BQ.js";import{s as C}from"./multiselect-CWD81P1z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"font-semibold text-xl text-gray-800 leading-tight"},$={class:"py-12"},j={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},D={class:"p-6 bg-white border-b border-gray-200"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T=["disabled"],F={key:0},L={class:"mb-4"},O=["value"],P={class:"flex items-center justify-end mt-6"},R={key:0},H={key:1},ee={__name:"Edit",props:{user:Object,groups:Array,quizzes:Array,roles:Array,designations:Array,organizationMember:Object,initialUserType:String,initialGroups:Array},setup(m){var f,_;const V=U(()=>{var t;return(t=r.user.roles)==null?void 0:t.some(o=>o.name==="admin")}),r=m,e=k({name:r.user.name,email:r.user.email,user_type:r.initialUserType,groups:r.initialGroups,unique_code:((f=r.organizationMember)==null?void 0:f.unique_code)||"",designation_id:((_=r.organizationMember)==null?void 0:_.designation_id)||null,quizzes:(r.user.assigned_quizzes||[]).map(t=>t.id),password:"",password_confirmation:""}),x=()=>{var t;e.put(route("examiner.user.update",{user:r.user.id,organization:(t=r.organizationMember)==null?void 0:t.organization_id}),{onSuccess:()=>e.reset("password","password_confirmation")})};return(t,o)=>(u(),z(S,{title:"Edit User"},{header:g(()=>[l("h2",N," Edit User: "+b(m.user.name),1)]),default:g(()=>[l("div",$,[l("div",j,[l("div",B,[l("div",D,[l("form",{onSubmit:q(x,["prevent"])},[l("div",G,[l("div",null,[i(n,{for:"name",value:"Name"}),i(c,{id:"name",modelValue:s(e).name,"onUpdate:modelValue":o[0]||(o[0]=a=>s(e).name=a),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.name},null,8,["message"])]),l("div",null,[i(n,{for:"email",value:"Email"}),i(c,{id:"email",modelValue:s(e).email,"onUpdate:modelValue":o[1]||(o[1]=a=>s(e).email=a),type:"email",class:"mt-1 block w-full",required:"",readonly:!V.value},null,8,["modelValue","readonly"]),i(d,{class:"mt-2",message:s(e).errors.email},null,8,["message"])]),l("div",null,[i(n,{for:"user_type",value:"User Type"}),w(l("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>s(e).user_type=a),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",disabled:m.user.id===t.$page.props.auth.user.id},o[8]||(o[8]=[l("option",{value:"admin"},"Admin",-1),l("option",{value:"examiner"},"Examiner",-1),l("option",{value:"examinee"},"Examinee",-1)]),8,T),[[v,s(e).user_type]]),i(d,{class:"mt-2",message:s(e).errors.user_type},null,8,["message"])]),s(e).user_type==="examinee"?(u(),p("div",F,[i(n,{for:"unique_code",value:"Unique Code"}),i(c,{id:"unique_code",modelValue:s(e).unique_code,"onUpdate:modelValue":o[3]||(o[3]=a=>s(e).unique_code=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.unique_code},null,8,["message"])])):h("",!0),l("div",null,[i(n,{for:"groups",value:"Groups"}),i(s(C),{modelValue:s(e).groups,"onUpdate:modelValue":o[4]||(o[4]=a=>s(e).groups=a),options:m.groups.map(a=>({value:a.id,label:a.name})),mode:"tags",placeholder:"Select groups"},null,8,["modelValue","options"])]),l("div",L,[i(n,{for:"designation_id",value:"Designation"}),w(l("select",{"onUpdate:modelValue":o[5]||(o[5]=a=>s(e).designation_id=a),class:y(["mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",{"is-invalid":s(e).errors.designation_id}])},[o[9]||(o[9]=l("option",{value:""},"Select Designation",-1)),(u(!0),p(A,null,E(m.designations,a=>(u(),p("option",{value:a.id,key:a.id},b(a.name),9,O))),128))],2),[[v,s(e).designation_id]]),i(d,{class:"mt-2",message:s(e).errors.designation_id},null,8,["message"])]),l("div",null,[i(n,{for:"password",value:"New Password"}),i(c,{id:"password",modelValue:s(e).password,"onUpdate:modelValue":o[6]||(o[6]=a=>s(e).password=a),type:"password",class:"mt-1 block w-full",autocomplete:"new-password"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.password},null,8,["message"])]),l("div",null,[i(n,{for:"password_confirmation",value:"Confirm Password"}),i(c,{id:"password_confirmation",modelValue:s(e).password_confirmation,"onUpdate:modelValue":o[7]||(o[7]=a=>s(e).password_confirmation=a),type:"password",class:"mt-1 block w-full",autocomplete:"new-password"},null,8,["modelValue"]),i(d,{class:"mt-2",message:s(e).errors.password_confirmation},null,8,["message"])])]),l("div",P,[i(M,{class:y({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:g(()=>[s(e).processing?(u(),p("span",R,"Updating...")):(u(),p("span",H,"Update User"))]),_:1},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{ee as default};
