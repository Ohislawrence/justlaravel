import{i as D,P as E,x as Q,f as T,z as I,c as j,o as r,w as y,d as n,h as p,a,j as s,t as u,g as R,b as l,F as b,l as x,e as $,q as B,k as M,n as G}from"./app-BbjuU1ab.js";import{A as O}from"./AppLayout-e8tIIA9R.js";import{_ as d}from"./InputError-DpclkRJ1.js";import{_ as o}from"./InputLabel-Dj8hVTBN.js";import{_ as g}from"./TextInput-C2O-PSK_.js";import{_ as F}from"./Textarea-DwLL00fZ.js";import{_ as c}from"./Checkbox-BYM7WIkl.js";import{_ as q}from"./SelectInput-Bx-EHeBo.js";import{_ as P}from"./DateTimePicker-CxLv29Ad.js";import{R as N}from"./RichtextEditorNormal-CGexPAAq.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./format-3b8xIHeq.js";const W={class:"font-semibold text-xl text-gray-800 leading-tight"},Y={key:0,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},H={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},J={key:1,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},K={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},X={class:"py-12"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ee={class:"bg-white shadow-sm sm:rounded-lg"},se={class:"p-6 bg-white border-b border-gray-200"},te={class:"grid grid-cols-1 gap-6"},ie={class:"space-y-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae=["value"],oe=["value"],re={key:0},ne={class:"space-y-6"},de={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ue={class:"flex items-center"},me={class:"flex items-center"},_e={class:"flex items-center"},ce={class:"flex items-center"},pe={class:"flex items-center"},ge={class:"flex items-center"},fe={class:"flex items-center"},ve={class:"mb-4"},ye={class:"flex items-center"},be={key:0,class:"space-y-2 pt-4 mt-1"},xe={class:"flex items-center"},ke={key:0,class:"ml-6 space-y-3"},qe={class:"space-y-6"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={key:0},Ve={key:1},ze={class:"space-y-6"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={class:"relative"},De={class:"relative"},Te={class:"space-y-6"},Ie=["value"],Me={key:0,class:"mt-3 p-3 bg-green-50 rounded"},Pe={class:"font-medium"},Ne={class:"mt-2"},Ae={key:0},Ce={key:1},Ee={class:"space-y-6"},Qe={class:"card mt-4"},je={class:"card-body"},Re={class:"form-check form-switch mb-3"},$e={key:0,class:"mt-3"},Be={class:"mb-3"},Ge=["value"],Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe={class:"flex items-center justify-end"},Le=["disabled"],We={__name:"Create",props:{organization:Object,availablePools:Array,gradingSystems:Array,quizTypes:Object,industries:Object,availableQuestions:Array,quiz:{type:Object,default:()=>({pools:[]})},certificateTemplates:{type:Array,required:!0},initialData:{type:Object,default:()=>({enable_certificates:!1,certificate_template_id:null,certificate_pass_percentage:70,certificate_expiry_days:null})}},setup(v){var V,z,U,S;const m=v,h=D(null),{flash:k}=E().props,e=Q({title:"",description:"",instructions:"",quiz_type:"",grading_system_id:null,industry:null,is_published:!1,is_public:!1,is_proctored:!1,randomize_questions:!1,randomize_answers:!1,show_correct_answers:!1,show_leaderboard:!1,enable_discussions:!1,require_guest_info:!1,guest_info_required:"none",max_attempts:null,max_participants:"",time_limit:"",passing_score:"",starts_at:"",ends_at:"",settings:{},pools:m.quiz.pools||[],survey_thank_you_message:"",enable_certificates:m.initialData.enable_certificates,certificate_template_id:m.initialData.certificate_template_id,certificate_pass_percentage:m.initialData.certificate_pass_percentage,certificate_expiry_days:m.initialData.certificate_expiry_days,settings:{show_scores:((V=m.quiz.settings)==null?void 0:V.show_scores)||!1,review_questions:((z=m.quiz.settings)==null?void 0:z.review_questions)||!1,per_question_timing:((U=m.quiz.settings)==null?void 0:U.per_question_timing)||!1,default_time_per_question:(S=m.quiz.settings)==null?void 0:S.default_time_per_question}}),w=T(()=>e.grading_system_id?m.gradingSystems.find(_=>_.id==e.grading_system_id):null),A=T(()=>e.title&&(!h.value||h.value.getPoolData().every(_=>_.questions.length>0))),C=()=>{const _={...e.data(),max_attempts:e.max_attempts!==null?parseInt(e.max_attempts):null,max_participants:e.max_participants!==null?parseInt(e.max_participants):null,time_limit:e.time_limit!==null?parseInt(e.time_limit):null,passing_score:e.passing_score!==null?parseInt(e.passing_score):null,starts_at:e.starts_at?e.starts_at:null,ends_at:e.ends_at?e.ends_at:null,enable_certificates:e.enable_certificates,certificate_template_id:e.certificate_template_id,certificate_pass_percentage:e.certificate_pass_percentage!==null?parseInt(e.certificate_pass_percentage):70,certificate_expiry_days:e.certificate_expiry_days!==null?parseInt(e.certificate_expiry_days):null,grading_system_id:e.grading_system_id!==null?parseInt(e.grading_system_id):null};e.transform(()=>_).post(route("examiner.quizzes.store",m.organization.id),{onSuccess:()=>{e.reset()},onError:t=>{console.error("Validation errors:",t)}})};return D([]),I(()=>e.is_public,_=>{_||(e.require_guest_info=!1,e.guest_info_required="none")}),I(()=>e.require_guest_info,_=>{_||(e.guest_info_required="none")}),(_,t)=>(r(),j(O,{title:"Create New Quiz"},{header:y(()=>[a("h2",W," Create New Quiz for "+u(v.organization.name),1)]),default:y(()=>[s(k).success?(r(),n("div",Y,[a("div",H,u(s(k).success),1)])):p("",!0),s(k).error?(r(),n("div",J,[a("div",K,u(s(k).error),1)])):p("",!0),a("div",X,[a("div",Z,[a("div",ee,[a("div",se,[a("form",{onSubmit:R(C,["prevent"])},[a("div",te,[a("div",ie,[t[32]||(t[32]=a("h3",{class:"text-lg font-medium"},"Basic Information",-1)),a("div",null,[l(o,{for:"title",value:"Quiz Title *"}),l(g,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":t[0]||(t[0]=i=>s(e).title=i),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),a("div",null,[l(o,{for:"description",value:"Description"}),l(N,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":t[1]||(t[1]=i=>s(e).description=i),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.description},null,8,["message"])]),a("div",null,[l(o,{for:"instructions",value:"Instructions"}),l(N,{id:"instructions",modelValue:s(e).instructions,"onUpdate:modelValue":t[2]||(t[2]=i=>s(e).instructions=i),label:"Instructions",error:s(e).errors.instructions},null,8,["modelValue","error"])]),a("div",le,[a("div",null,[l(o,{for:"quiz_type",value:"Quiz Type *"}),l(q,{id:"quiz_type",modelValue:s(e).quiz_type,"onUpdate:modelValue":t[3]||(t[3]=i=>s(e).quiz_type=i),class:"mt-1 block w-full",required:""},{default:y(()=>[(r(!0),n(b,null,x(v.quizTypes,(i,f)=>(r(),n("option",{key:f,value:f},u(i),9,ae))),128))]),_:1},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.quiz_type},null,8,["message"])]),a("div",null,[l(o,{for:"industry",value:"Industry"}),l(q,{id:"industry",modelValue:s(e).industry,"onUpdate:modelValue":t[4]||(t[4]=i=>s(e).industry=i),class:"mt-1 block w-full"},{default:y(()=>[t[31]||(t[31]=a("option",{value:null},"Select Industry",-1)),(r(!0),n(b,null,x(v.industries,(i,f)=>(r(),n("option",{key:f,value:f},u(i),9,oe))),128))]),_:1,__:[31]},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.industry},null,8,["message"])]),s(e).quiz_type==="survey"?(r(),n("div",re,[l(o,{for:"survey_thank_you_message",value:"Survey Thank You Message"}),l(F,{id:"survey_thank_you_message",modelValue:s(e).survey_thank_you_message,"onUpdate:modelValue":t[5]||(t[5]=i=>s(e).survey_thank_you_message=i),class:"mt-1 block w-full",rows:"3",placeholder:"Thank you for completing our survey!"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.survey_thank_you_message},null,8,["message"])])):p("",!0)])]),a("div",ne,[t[33]||(t[33]=a("h3",{class:"text-lg font-medium"},"Quiz Settings",-1)),a("div",de,[a("div",ue,[l(c,{id:"is_published",checked:s(e).is_published,"onUpdate:checked":t[6]||(t[6]=i=>s(e).is_published=i)},null,8,["checked"]),l(o,{for:"is_published",value:"Publish Immediately",class:"ml-2"})]),a("div",me,[l(c,{id:"is_proctored",checked:s(e).is_proctored,"onUpdate:checked":t[7]||(t[7]=i=>s(e).is_proctored=i)},null,8,["checked"]),l(o,{for:"is_proctored",value:"Use Proctor",class:"ml-2"})]),a("div",_e,[l(c,{id:"randomize_questions",checked:s(e).randomize_questions,"onUpdate:checked":t[8]||(t[8]=i=>s(e).randomize_questions=i)},null,8,["checked"]),l(o,{for:"randomize_questions",value:"Randomize Questions",class:"ml-2"})]),a("div",ce,[l(c,{id:"randomize_answers",checked:s(e).randomize_answers,"onUpdate:checked":t[9]||(t[9]=i=>s(e).randomize_answers=i)},null,8,["checked"]),l(o,{for:"randomize_answers",value:"Randomize Answers",class:"ml-2"})]),a("div",pe,[l(c,{id:"show_scores",checked:s(e).settings.show_scores,"onUpdate:checked":t[10]||(t[10]=i=>s(e).settings.show_scores=i)},null,8,["checked"]),l(o,{for:"show_scores",value:"Show scores summary when done",class:"ml-2"})]),a("div",ge,[l(c,{id:"review_questions",checked:s(e).settings.review_questions,"onUpdate:checked":t[11]||(t[11]=i=>s(e).settings.review_questions=i)},null,8,["checked"]),l(o,{for:"review_questions",value:"Show questions & answers when done",class:"ml-2"})]),a("div",fe,[l(c,{id:"per_question_timing",checked:s(e).settings.per_question_timing,"onUpdate:checked":t[12]||(t[12]=i=>s(e).settings.per_question_timing=i)},null,8,["checked"]),l(o,{for:"per_question_timing",value:"Timed per question",class:"ml-2"})])])]),t[44]||(t[44]=a("h3",{class:"text-lg font-medium"},"Public Access Settings",-1)),a("div",ve,[a("div",ye,[l(c,{id:"is_public",checked:s(e).is_public,"onUpdate:checked":t[13]||(t[13]=i=>s(e).is_public=i)},null,8,["checked"]),l(o,{for:"is_public",value:"Make this quiz public (allow guests without accounts)",class:"ml-2"})]),l(d,{message:s(e).errors.is_public,class:"mt-2"},null,8,["message"])]),s(e).is_public?(r(),n("div",be,[a("div",xe,[l(c,{id:"require_guest_info",checked:s(e).require_guest_info,"onUpdate:checked":t[14]||(t[14]=i=>s(e).require_guest_info=i)},null,8,["checked"]),l(o,{for:"require_guest_info",value:"Require guest information",class:"ml-2"})]),l(d,{message:s(e).errors.require_guest_info,class:"mt-2"},null,8,["message"]),s(e).require_guest_info?(r(),n("div",ke,[a("div",null,[l(o,{for:"guest_info_required",value:"What information should guests provide?"}),$(a("select",{id:"guest_info_required","onUpdate:modelValue":t[15]||(t[15]=i=>s(e).guest_info_required=i),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},t[34]||(t[34]=[a("option",{value:"none"},"No information required",-1),a("option",{value:"name"},"Name only",-1),a("option",{value:"email"},"Email only",-1),a("option",{value:"both"},"Name and Email",-1)]),512),[[B,s(e).guest_info_required]]),l(d,{message:s(e).errors.guest_info_required,class:"mt-2"},null,8,["message"]),t[35]||(t[35]=a("div",{class:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-3"},[a("p",{class:"text-sm text-blue-800"},[a("strong",null,"Note:"),M(" Guests will be asked to provide this information before starting the quiz. ")])],-1))])])):p("",!0)])):p("",!0),a("div",qe,[t[38]||(t[38]=a("h3",{class:"text-lg font-medium"},"Access Restrictions",-1)),a("div",we,[a("div",null,[l(o,{for:"max_attempts",value:"Max Attempts (0 for unlimited)"}),l(g,{id:"max_attempts",modelValue:s(e).max_attempts,"onUpdate:modelValue":t[16]||(t[16]=i=>s(e).max_attempts=i),type:"number",min:"0",class:"mt-1 block w-full",onInput:t[17]||(t[17]=i=>s(e).max_attempts=i.target.value===""?null:parseInt(i.target.value))},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.max_attempts},null,8,["message"])]),a("div",null,[l(o,{for:"max_participants",value:"Max Participants (0 for unlimited)"}),l(g,{id:"max_participants",modelValue:s(e).max_participants,"onUpdate:modelValue":t[18]||(t[18]=i=>s(e).max_participants=i),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.max_participants},null,8,["message"])]),s(e).settings.per_question_timing?(r(),n("div",he,[l(o,{for:"time_per_question",value:"Default Time per question (seconds)"}),l(g,{modelValue:s(e).settings.default_time_per_question,"onUpdate:modelValue":t[19]||(t[19]=i=>s(e).settings.default_time_per_question=i),type:"number",id:"default_time_per_question",min:"5",max:"300",class:"mt-1 block w-full",placeholder:"60"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors["settings.default_time_per_question"]},null,8,["message"]),t[36]||(t[36]=a("p",{class:"text-xs text-gray-500 mt-1"}," Each question will have a countdown timer. If a question does not have it own time, this will be used. Previous button is disabled. ",-1))])):(r(),n("div",Ve,[l(o,{for:"time_limit",value:"Time Limit (minutes)"}),l(g,{id:"time_limit",modelValue:s(e).time_limit,"onUpdate:modelValue":t[20]||(t[20]=i=>s(e).time_limit=i),type:"number",min:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.time_limit},null,8,["message"]),t[37]||(t[37]=a("p",{class:"text-xs text-gray-500 mt-1"}," Previous button is enabled. ",-1))])),a("div",null,[l(o,{for:"passing_score",value:"Passing Score (%)"}),l(g,{id:"passing_score",modelValue:s(e).passing_score,"onUpdate:modelValue":t[21]||(t[21]=i=>s(e).passing_score=i),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.passing_score},null,8,["message"])])])]),a("div",ze,[t[39]||(t[39]=a("h3",{class:"text-lg font-medium"},"Schedule",-1)),a("div",Ue,[a("div",Se,[l(o,{for:"starts_at",value:"Start Date & Time"}),l(P,{id:"starts_at",modelValue:s(e).starts_at,"onUpdate:modelValue":[t[22]||(t[22]=i=>s(e).starts_at=i),t[23]||(t[23]=i=>s(e).starts_at=i)],class:"mt-1 block w-full","display-format":"MMM d, yyyy h:mm a","model-value":s(e).starts_at,label:"Start Date & Time"},null,8,["modelValue","model-value"]),l(d,{class:"mt-2",message:s(e).errors.starts_at},null,8,["message"])]),a("div",De,[l(o,{for:"ends_at",value:"End Date & Time"}),l(P,{id:"ends_at",modelValue:s(e).ends_at,"onUpdate:modelValue":[t[24]||(t[24]=i=>s(e).ends_at=i),t[25]||(t[25]=i=>s(e).ends_at=i)],class:"mt-1 block w-full","display-format":"MMM d, yyyy h:mm a","model-value":s(e).ends_at,label:"End Date & Time"},null,8,["modelValue","model-value"]),l(d,{class:"mt-2",message:s(e).errors.ends_at},null,8,["message"])])])]),a("div",Te,[t[41]||(t[41]=a("h3",{class:"text-lg font-medium"},"Grading System",-1)),a("div",null,[l(o,{for:"grading_system_id",value:"Select Grading System"}),l(q,{id:"grading_system_id",modelValue:s(e).grading_system_id,"onUpdate:modelValue":t[26]||(t[26]=i=>s(e).grading_system_id=i),class:"mt-1 block w-full"},{default:y(()=>[t[40]||(t[40]=a("option",{value:null},"Default (Pass/Fail)",-1)),(r(!0),n(b,null,x(v.gradingSystems,i=>(r(),n("option",{key:i.id,value:i.id},u(i.name)+" ("+u(i.type)+") ",9,Ie))),128))]),_:1,__:[40]},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.grading_system_id},null,8,["message"]),w.value?(r(),n("div",Me,[a("h4",Pe,u(w.value.name)+" Grade Ranges:",1),a("div",Ne,[(r(!0),n(b,null,x(w.value.grade_ranges,(i,f)=>(r(),n("div",{key:f,class:"text-sm"},[M(u(i.min)+"% - "+u(i.max)+"%: "+u(i.grade)+" ",1),i.points?(r(),n("span",Ae,"("+u(i.points)+" points)",1)):p("",!0),i.interpretation?(r(),n("span",Ce,"- "+u(i.interpretation),1)):p("",!0)]))),128))])])):p("",!0)])]),a("div",Ee,[t[43]||(t[43]=a("h3",{class:"text-lg font-medium"},"Certificate Settings",-1)),a("div",Qe,[a("div",je,[a("div",Re,[l(c,{id:"enable_certificates",checked:s(e).enable_certificates,"onUpdate:checked":t[27]||(t[27]=i=>s(e).enable_certificates=i)},null,8,["checked"]),l(o,{for:"enable_certificates",value:"Enable certificates for this quiz",class:"ml-2"}),l(d,{class:"mt-2",message:s(e).errors.enable_certificates},null,8,["message"])]),s(e).enable_certificates?(r(),n("div",$e,[a("div",Be,[l(o,{for:"certificate_template_id",value:"Certificate Template"}),l(q,{id:"certificate_template_id",modelValue:s(e).certificate_template_id,"onUpdate:modelValue":t[28]||(t[28]=i=>s(e).certificate_template_id=i),class:"mt-1 block w-full"},{default:y(()=>[t[42]||(t[42]=a("option",{value:null},"Use Default Template",-1)),(r(!0),n(b,null,x(v.certificateTemplates,i=>(r(),n("option",{key:i.id,value:i.id},u(i.name),9,Ge))),128))]),_:1,__:[42]},8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.certificate_template_id},null,8,["message"])]),a("div",Oe,[a("div",null,[l(o,{for:"certificate_pass_percentage",value:"Passing Percentage"}),l(g,{id:"certificate_pass_percentage",modelValue:s(e).certificate_pass_percentage,"onUpdate:modelValue":t[29]||(t[29]=i=>s(e).certificate_pass_percentage=i),type:"number",min:"0",max:"100",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.certificate_pass_percentage},null,8,["message"])]),a("div",null,[l(o,{for:"certificate_expiry_days",value:"Expiry Days (leave blank for no expiry)"}),l(g,{id:"certificate_expiry_days",modelValue:s(e).certificate_expiry_days,"onUpdate:modelValue":t[30]||(t[30]=i=>s(e).certificate_expiry_days=i),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:s(e).errors.certificate_expiry_days},null,8,["message"])])])])):p("",!0)])])]),a("div",Fe,[a("button",{type:"submit",class:G(["inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",{"opacity-25":s(e).processing}]),disabled:s(e).processing||!A.value}," Create Quiz ",10,Le)])])],32)])])])])]),_:1}))}},rs=L(We,[["__scopeId","data-v-7507bfcc"]]);export{rs as default};
