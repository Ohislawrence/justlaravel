import{P as S,x as G,i as w,f as A,m as D,c as L,o as i,w as p,d,h as c,a as e,b as n,j as s,t as u,g as P,F as U,l as N,k as g,n as z,W as C}from"./app-BbjuU1ab.js";import{A as T}from"./AppLayout-e8tIIA9R.js";import{_ as y}from"./InputError-DpclkRJ1.js";import{_ as f}from"./InputLabel-Dj8hVTBN.js";import{_ as V}from"./TextInput-C2O-PSK_.js";import{_ as F}from"./Textarea-DwLL00fZ.js";import{_ as q}from"./Checkbox-BYM7WIkl.js";import{_ as E}from"./SelectInput-Bx-EHeBo.js";import{_ as I}from"./ConfirmationModal-C2gQiFQd.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./Modal-BeLRSDTy.js";const W={class:"flex items-center justify-between"},O={class:"font-semibold text-xl text-gray-800 leading-tight"},Q={class:"flex items-center space-x-2"},J={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4"},K={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"},R={class:"block sm:inline"},X={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4"},Y={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"},Z={class:"block sm:inline"},ee={class:"py-8"},te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},se={class:"bg-white shadow overflow-hidden sm:rounded-lg"},oe={class:"px-4 py-5 sm:p-6"},re={class:"space-y-6"},ne={class:"grid grid-cols-1 gap-4"},ie={key:0},le=["value"],ae={key:1},de={class:"mt-1 p-2 bg-gray-50 rounded-md border border-gray-200"},ue={class:"space-y-4"},pe={class:"flex items-center"},ce={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={class:"mt-1 relative rounded-md shadow-sm"},ge={class:"flex items-center"},fe={class:"flex justify-between pt-6 border-t border-gray-200"},ve={class:"flex space-x-3"},xe=["disabled"],be={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ye={key:1,class:"flex items-center"},he={key:2},we={key:0,class:"mt-2 text-red-600"},ke={key:1,class:"mt-2 text-red-600"},_e={class:"flex justify-end space-x-3"},ze=["disabled"],Ce={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ve={key:1,class:"flex items-center"},qe={key:2},je={__name:"Edit",props:{organization:Object,group:Object,parentGroups:Array},setup(l){const a=l,{flash:v}=S().props,o=G({name:a.group.name,description:a.group.description,price:a.group.price,is_active:a.group.is_active,parent_id:a.group.parent_id}),h=w(null),x=w(!!a.group.price),b=w(!1),j=()=>{o.put(route("examiner.quiz-groups.update",{organization:a.organization.id,quiz_group:a.group.id}),{preserveScroll:!0,onSuccess:()=>{}})},B=()=>{C.delete(route("examiner.quiz-groups.destroy",{organization:a.organization.id,quiz_group:a.group.id}),{preserveScroll:!0,onSuccess:()=>{b.value=!1,C.visit(route("examiner.quiz-groups.index",a.organization.id))}})},$=()=>{if(o.price){let m=o.price.toString().replace(/[^0-9.]/g,"");o.price=parseFloat(m).toFixed(2)}},M=()=>{x.value=!x.value,x.value&&h.value?h.value.focus():o.price=null},k=A(()=>a.parentGroups.filter(m=>m.id!==a.group.id&&(!a.group.parent_id||m.id!==a.group.parent_id)));return(m,t)=>{const _=D("Link");return i(),L(T,{title:`Edit ${l.group.name}`},{header:p(()=>[e("div",W,[e("h2",O," Edit Quiz Group: "+u(l.group.name),1),e("div",Q,[n(_,{href:m.route("examiner.quiz-groups.show",{organization:l.organization.id,quiz_group:l.group.id}),class:"text-sm text-gray-600 hover:text-gray-900"},{default:p(()=>t[11]||(t[11]=[g(" Back to Group ")])),_:1,__:[11]},8,["href"])])])]),default:p(()=>[s(v).success?(i(),d("div",J,[e("div",K,[e("span",R,u(s(v).success),1),e("button",{type:"button",onClick:t[0]||(t[0]=r=>s(v).success=null),class:"absolute top-0 bottom-0 right-0 px-4 py-3","aria-label":"Close success message"},t[12]||(t[12]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):c("",!0),s(v).error?(i(),d("div",X,[e("div",Y,[e("span",Z,u(s(v).error),1),e("button",{type:"button",onClick:t[1]||(t[1]=r=>s(v).error=null),class:"absolute top-0 bottom-0 right-0 px-4 py-3","aria-label":"Close error message"},t[13]||(t[13]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):c("",!0),e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[e("form",{onSubmit:P(j,["prevent"])},[e("div",re,[e("div",null,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Basic Information ",-1)),e("div",ne,[e("div",null,[n(f,{for:"name",value:"Group Name *"}),n(V,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":t[2]||(t[2]=r=>s(o).name=r),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),n(y,{class:"mt-2",message:s(o).errors.name},null,8,["message"])]),e("div",null,[n(f,{for:"description",value:"Description"}),n(F,{id:"description",modelValue:s(o).description,"onUpdate:modelValue":t[3]||(t[3]=r=>s(o).description=r),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),n(y,{class:"mt-2",message:s(o).errors.description},null,8,["message"])]),k.value.length>0?(i(),d("div",ie,[n(f,{for:"parent_id",value:"Parent Group"}),n(E,{id:"parent_id",modelValue:s(o).parent_id,"onUpdate:modelValue":t[4]||(t[4]=r=>s(o).parent_id=r),class:"mt-1 block w-full"},{default:p(()=>[t[14]||(t[14]=e("option",{value:null},"No parent group",-1)),(i(!0),d(U,null,N(k.value,r=>(i(),d("option",{key:r.id,value:r.id},u(r.name),9,le))),128))]),_:1,__:[14]},8,["modelValue"]),n(y,{class:"mt-2",message:s(o).errors.parent_id},null,8,["message"])])):l.group.parent?(i(),d("div",ae,[n(f,{value:"Current Parent Group"}),e("div",de,u(l.group.parent.name),1),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500"}," No other parent groups available ",-1))])):c("",!0)])]),e("div",null,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Pricing Options ",-1)),e("div",ue,[e("div",pe,[n(q,{id:"has_price",checked:x.value,"onUpdate:checked":t[5]||(t[5]=r=>x.value=r),onChange:M},null,8,["checked"]),n(f,{for:"has_price",value:"This is a paid group",class:"ml-2"})]),x.value?(i(),d("div",ce,[e("div",null,[n(f,{for:"price",value:"Price (USD)"}),e("div",me,[t[17]||(t[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),n(V,{ref_key:"priceInput",ref:h,id:"price",modelValue:s(o).price,"onUpdate:modelValue":t[6]||(t[6]=r=>s(o).price=r),type:"number",min:"0",step:"0.01",class:"block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",onBlur:$},null,8,["modelValue"]),t[18]||(t[18]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"USD")],-1))]),t[19]||(t[19]=e("p",{class:"mt-1 text-sm text-gray-500"}," Set a price if this group contains premium content ",-1)),n(y,{class:"mt-2",message:s(o).errors.price},null,8,["message"])])])):c("",!0)])]),e("div",null,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Status ",-1)),e("div",ge,[n(q,{id:"is_active",checked:s(o).is_active,"onUpdate:checked":t[7]||(t[7]=r=>s(o).is_active=r)},null,8,["checked"]),n(f,{for:"is_active",value:"Active (visible to users)",class:"ml-2"})]),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"}," Inactive groups won't be visible to students ",-1))]),e("div",fe,[e("button",{type:"button",onClick:t[8]||(t[8]=r=>b.value=!0),class:"inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 flex items-center"},t[23]||(t[23]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Delete Group ")])),e("div",ve,[n(_,{href:m.route("examiner.quiz-groups.show",{organization:l.organization.id,quiz_group:l.group.id}),class:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},{default:p(()=>t[24]||(t[24]=[g(" Cancel ")])),_:1,__:[24]},8,["href"]),e("button",{type:"submit",class:z(["inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200 flex items-center",{"opacity-25 cursor-not-allowed":s(o).processing}]),disabled:s(o).processing},[s(o).processing?c("",!0):(i(),d("svg",be,t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),s(o).processing?(i(),d("span",ye,t[26]||(t[26]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Saving... ")]))):(i(),d("span",he,"Save Changes"))],10,xe)])])])],32)])])])]),n(I,{show:b.value,onClose:t[10]||(t[10]=r=>b.value=!1)},{title:p(()=>t[27]||(t[27]=[g(" Delete Quiz Group ")])),content:p(()=>[t[28]||(t[28]=e("p",{class:"text-gray-700"},[g(" Are you sure you want to delete this quiz group? "),e("span",{class:"font-semibold"},"This action cannot be undone.")],-1)),l.group.quizzes_count>0?(i(),d("p",we," Warning: This group contains "+u(l.group.quizzes_count)+" quiz"+u(l.group.quizzes_count!==1?"zes":"")+". They will be removed from this group but not deleted. ",1)):c("",!0),l.group.children_count>0?(i(),d("p",ke," Warning: This group has "+u(l.group.children_count)+" subgroup"+u(l.group.children_count!==1?"s":"")+". They will become root groups if you proceed. ",1)):c("",!0)]),footer:p(()=>[e("div",_e,[e("button",{type:"button",onClick:t[9]||(t[9]=r=>b.value=!1),class:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),e("button",{type:"button",onClick:B,class:z(["inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 flex items-center",{"opacity-25 cursor-not-allowed":s(o).processing}]),disabled:s(o).processing},[s(o).processing?c("",!0):(i(),d("svg",Ce,t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)]))),s(o).processing?(i(),d("span",Ve,t[30]||(t[30]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Deleting... ")]))):(i(),d("span",qe,"Delete Group"))],10,ze)])]),_:1},8,["show"])]),_:1},8,["title"])}}},Fe=H(je,[["__scopeId","data-v-52c6a984"]]);export{Fe as default};
