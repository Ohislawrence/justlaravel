import{x as E,i as f,f as R,c as u,o as r,w as T,a as l,b as d,g as G,h as n,e as g,j as s,d as V,F as O,l as J,t as c,s as W,A as v,V as X,X as m}from"./app-Do1sSIaC.js";import{A as Y}from"./AppLayout-DUw_ZWTf.js";import{f as H,e as K,d as Z,c as ee,b as te,a as se,_ as le}from"./OrderingEditor-Ym64U-gU.js";import{_ as a}from"./InputError-BalbFUZ-.js";import{F as oe}from"./FeatureLimitModal-DgxIgkN8.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={class:"font-semibold text-xl text-gray-800 leading-tight"},re={class:"py-6"},ue={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ae={class:"p-6 bg-white border-b border-gray-200"},de={class:"grid grid-cols-1 gap-6"},me=["value"],pe={class:"mt-1"},ge={key:0,class:"mb-4"},be={class:"relative inline-block"},fe=["src"],ce={class:"text-sm text-gray-500 mt-2"},ye={class:"inline-flex items-center"},xe={class:"flex justify-end"},ve=["disabled"],he={__name:"Create",props:{quiz:Object,questionTypes:Object,question:Object,currentQuestions:{type:Number,default:10},questionLimit:{type:Number,default:10}},setup(w){var U,h,Q,C,M,F,A,I,L;const i=w,e=E({type:((U=i.question)==null?void 0:U.type)||"multiple_choice",question:((h=i.question)==null?void 0:h.question)||"",description:((Q=i.question)==null?void 0:Q.description)||"",image:null,points:((C=i.question)==null?void 0:C.points)||1,time_limit:((M=i.question)==null?void 0:M.time_limit)||null,is_required:((F=i.question)==null?void 0:F.is_required)||!1,options:((A=i.question)==null?void 0:A.options)||null,correct_answers:((I=i.question)==null?void 0:I.correct_answers)||[],settings:{rubric:[],distractors:[]}}),q=f(!1),_=f(""),z=f("");function $(b,t){_.value=b,z.value=t,q.value=!0}const y=f(((L=i.question)==null?void 0:L.image)||null),k=f(!1),p=R(()=>!!i.question);function j(b){const t=b.target.files[0];if(!t)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)){alert("Invalid image type.");return}const x=5*1024*1024;if(t.size>x){alert("Image size must be less than 5MB");return}e.image=t;const N=new FileReader;N.onload=D=>{y.value=D.target.result},N.readAsDataURL(t),k.value=!1}function B(){e.image=null,y.value=null,k.value=!0}function P(){if(!(i.currentQuestions<i.questionLimit)){$("Add Question","You have reached the question limit. Upgrade your plan to add more questions.");return}k.value&&p.value&&(e.remove_image=!0),p.value?e.put(route("examiner.quizzes.questions.update",{quiz:i.quiz.id,question:i.question.id})):e.post(route("examiner.quizzes.questions.store",i.quiz.id))}function S(){router.visit(route("examiner.quizzes.questions.index",i.quiz.id))}return(b,t)=>(r(),u(Y,{title:p.value?"Edit Question":"Add Question"},{header:T(()=>[l("h2",ie,c(p.value?"Edit":"Create")+" Question for "+c(w.quiz.title)+" Quiz ",1)]),default:T(()=>[l("div",re,[l("div",ue,[l("div",ne,[l("div",ae,[l("form",{onSubmit:G(P,["prevent"])},[l("div",de,[l("div",null,[t[14]||(t[14]=l("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),g(l("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s(e).type=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[(r(!0),V(O,null,J(w.questionTypes,(o,x)=>(r(),V("option",{key:x,value:x},c(o),9,me))),128))],512),[[W,s(e).type]]),d(a,{message:s(e).errors.type,class:"mt-2"},null,8,["message"])]),l("div",null,[t[15]||(t[15]=l("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),g(l("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(e).question=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[v,s(e).question]]),d(a,{message:s(e).errors.question,class:"mt-2"},null,8,["message"])]),l("div",null,[t[16]||(t[16]=l("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),g(l("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>s(e).description=o),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[v,s(e).description]]),d(a,{message:s(e).errors.description,class:"mt-2"},null,8,["message"])]),l("div",null,[t[19]||(t[19]=l("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),l("div",pe,[y.value?(r(),V("div",ge,[l("div",be,[l("img",{src:y.value,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300"},null,8,fe),l("button",{type:"button",onClick:B,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500"},t[17]||(t[17]=[l("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("p",ce,c(p.value&&!s(e).image?"Current image":"Preview"),1)])):n("",!0),l("input",{ref:"imageInput",type:"file",accept:"image/*",onChange:j,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,544),t[18]||(t[18]=l("p",{class:"text-xs text-gray-500 mt-1"}," Supported formats: JPEG, PNG, GIF, WebP. Max size: 5MB. ",-1))]),d(a,{message:s(e).errors.image,class:"mt-2"},null,8,["message"])]),l("div",null,[t[20]||(t[20]=l("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),g(l("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s(e).points=o),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[v,s(e).points]]),d(a,{message:s(e).errors.points,class:"mt-2"},null,8,["message"])]),l("div",null,[t[21]||(t[21]=l("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),g(l("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s(e).time_limit=o),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[v,s(e).time_limit]]),d(a,{message:s(e).errors.time_limit,class:"mt-2"},null,8,["message"])]),l("div",null,[l("label",ye,[g(l("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s(e).is_required=o),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[X,s(e).is_required]]),t[22]||(t[22]=l("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),d(a,{message:s(e).errors.is_required,class:"mt-2"},null,8,["message"])]),s(e).type==="multiple_choice"?(r(),u(H,{key:0,modelValue:s(e),"onUpdate:modelValue":t[6]||(t[6]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).type==="true_false"?(r(),u(K,{key:1,modelValue:s(e),"onUpdate:modelValue":t[7]||(t[7]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).type==="short_answer"?(r(),u(Z,{key:2,modelValue:s(e),"onUpdate:modelValue":t[8]||(t[8]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).type==="essay"?(r(),u(ee,{key:3,modelValue:s(e),"onUpdate:modelValue":t[9]||(t[9]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).type==="fill_in_the_blank"?(r(),u(te,{key:4,modelValue:s(e),"onUpdate:modelValue":t[10]||(t[10]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).type==="matching"?(r(),u(se,{key:5,modelValue:s(e),"onUpdate:modelValue":t[11]||(t[11]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).type==="ordering"?(r(),u(le,{key:6,modelValue:s(e),"onUpdate:modelValue":t[12]||(t[12]=o=>m(e)?e.value=o:null)},null,8,["modelValue"])):n("",!0),s(e).errors.options?(r(),u(a,{key:7,message:s(e).errors.options,class:"mt-2"},null,8,["message"])):n("",!0),s(e).errors.correct_answers?(r(),u(a,{key:8,message:s(e).errors.correct_answers,class:"mt-2"},null,8,["message"])):n("",!0),s(e).errors.settings?(r(),u(a,{key:9,message:s(e).errors.settings,class:"mt-2"},null,8,["message"])):n("",!0),l("div",xe,[l("button",{type:"button",onClick:S,class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50"}," Cancel "),l("button",{type:"submit",disabled:s(e).processing,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 disabled:opacity-25"},c(p.value?"Update":"Create")+" Question ",9,ve)])])],32)])])])]),d(oe,{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=o=>q.value=o),featureName:_.value,message:z.value},null,8,["modelValue","featureName","message"])]),_:1},8,["title"]))}};export{he as default};
