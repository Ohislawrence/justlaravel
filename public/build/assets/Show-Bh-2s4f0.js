import{A as H}from"./AppLayout-D8ExmrQZ.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as A,f as y,E as I,d as a,o,a as t,t as n,h as v,F as w,l as $,G as F,n as x,k as N,c as j,w as D,b as M}from"./app-QoN49EH_.js";/* empty css                                                                  */const E={class:"bg-white rounded-lg shadow overflow-hidden"},Q={class:"p-6"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},U={class:"bg-blue-50 p-4 rounded-lg"},B={class:"text-2xl font-bold text-blue-900"},Y={class:"bg-green-50 p-4 rounded-lg"},J={class:"text-2xl font-bold text-green-900"},R={class:"bg-purple-50 p-4 rounded-lg"},G={class:"text-2xl font-bold text-purple-900"},K={class:"overflow-x-auto"},W={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rt={class:"px-6 py-4 whitespace-nowrap"},ot={class:"flex items-center"},nt={class:"w-full bg-gray-200 rounded-full h-2.5"},it={class:"ml-2 text-xs font-medium text-gray-700"},at={key:0},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ut={class:"px-6 py-4 whitespace-nowrap"},mt={class:"flex items-center"},pt={class:"w-full bg-gray-200 rounded-full h-2.5"},gt={class:"ml-2 text-xs font-medium text-gray-700"},_t={__name:"QuizPoolAnalysis",props:{quiz:{type:Object,required:!0},questionpools:{type:Object,default:()=>({})},attempts:{type:Object,required:!0},userId:{type:Number,required:!0}},setup(u){const p=u,_=A([]),l=A({name:"Others",questionCount:0,correctCount:0,score:0,maxScore:0,percentage:0});A(!0);const g=A({}),b=A([]),h=A([]),S=A(""),k=y(()=>_.value.reduce((r,s)=>r+s.questionCount,0)+l.value.questionCount),T=y(()=>_.value.reduce((r,s)=>r+s.correctCount,0)+l.value.correctCount),q=y(()=>{const r=_.value.reduce((e,i)=>e+i.score,0)+l.value.score,s=_.value.reduce((e,i)=>e+i.maxScore,0)+l.value.maxScore;return s>0?(r/s*100).toFixed(1):0}),C=r=>r>=80?"bg-green-600":r>=60?"bg-yellow-500":"bg-red-600",f=()=>{_.value=[],l.value={name:"Others",questionCount:0,correctCount:0,score:0,maxScore:0,percentage:0},g.value={},b.value=[],h.value=p.attempts.responses||[];const r={},s=Array.isArray(p.questionpools)?p.questionpools:p.questionpools.data||[];s.length>0&&(S.value=JSON.stringify({id:s[0].id,name:s[0].name,hasQuestions:!!s[0].questions,questionsCount:s[0].questions?s[0].questions.length:0,questionsSample:s[0].questions?s[0].questions.slice(0,2):null})),s.forEach(e=>{const i=[];e.questions&&Array.isArray(e.questions)&&e.questions.forEach(c=>{c.id&&i.push(c.id)}),r[e.id]={...e,responses:[],maxScore:0,questionIds:i},g.value[e.id]=i}),h.value.forEach(e=>{const i=e.question;if(!i||!i.id)return;let c=!1;for(const d in r)if(r[d].questionIds.includes(i.id)){r[d].responses.push(e),r[d].maxScore+=i.points||1,c=!0;break}c||(b.value.push(i.id),l.value.maxScore+=i.points||1,r.others||(r.others={id:"others",name:"Others",responses:[],maxScore:0,questionIds:[]}),r.others.responses.push(e),r.others.maxScore+=i.points||1)});for(const e in r){const i=r[e];if(e==="others"){let c=0,d=0;i.responses.forEach(m=>{m.is_correct&&d++,c+=m.points_earned||0}),l.value.questionCount=i.responses.length,l.value.correctCount=d,l.value.score=c,l.value.percentage=l.value.maxScore>0?c/l.value.maxScore*100:0}else{const c=i.responses,d=i.maxScore;let m=0,L=0;c.forEach(V=>{V.is_correct&&L++,m+=V.points_earned||0});const P=d>0?m/d*100:0;_.value.push({id:i.id,name:i.name,questionCount:c.length,correctCount:L,score:m,maxScore:d,percentage:P})}}};return I(()=>{f()}),(r,s)=>(o(),a("div",E,[s[5]||(s[5]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Quiz Pool Performance Analysis"),t("p",{class:"text-sm text-gray-500 mt-1"},"Performance breakdown by question pool")],-1)),t("div",Q,[t("div",z,[t("div",U,[s[0]||(s[0]=t("p",{class:"text-sm font-medium text-blue-800"},"Total Questions",-1)),t("p",B,n(k.value),1)]),t("div",Y,[s[1]||(s[1]=t("p",{class:"text-sm font-medium text-green-800"},"Correct Answers",-1)),t("p",J,n(T.value),1)]),t("div",R,[s[2]||(s[2]=t("p",{class:"text-sm font-medium text-purple-800"},"Overall Score",-1)),t("p",G,n(q.value)+"%",1)])]),t("div",K,[t("table",W,[s[4]||(s[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Question Pool "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Questions "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Correct "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Score "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Performance ")])],-1)),t("tbody",X,[(o(!0),a(w,null,$(_.value,e=>(o(),a("tr",{key:e.id},[t("td",Z,n(e.name),1),t("td",tt,n(e.questionCount),1),t("td",et,n(e.correctCount)+" / "+n(e.questionCount),1),t("td",st,n(e.score)+" / "+n(e.maxScore),1),t("td",rt,[t("div",ot,[t("div",nt,[t("div",{class:x(["h-2.5 rounded-full",C(e.percentage)]),style:F(`width: ${Math.min(e.percentage,100)}%`)},null,6)]),t("span",it,n(e.percentage.toFixed(1))+"% ",1)])])]))),128)),l.value.questionCount>0?(o(),a("tr",at,[s[3]||(s[3]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Others ",-1)),t("td",lt,n(l.value.questionCount),1),t("td",dt,n(l.value.correctCount)+" / "+n(l.value.questionCount),1),t("td",ct,n(l.value.score)+" / "+n(l.value.maxScore),1),t("td",ut,[t("div",mt,[t("div",pt,[t("div",{class:x(["h-2.5 rounded-full",C(l.value.percentage)]),style:F(`width: ${Math.min(l.value.percentage,100)}%`)},null,6)]),t("span",gt,n(l.value.percentage.toFixed(1))+"% ",1)])])])):v("",!0)])])])])]))}},xt={class:"bg-white rounded-lg shadow overflow-hidden"},yt={class:"p-6"},bt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ft={class:"bg-red-50 p-4 rounded-lg"},ht={class:"text-2xl font-bold text-red-900"},vt={class:"bg-yellow-50 p-4 rounded-lg"},wt={class:"text-2xl font-bold text-yellow-900"},$t={class:"bg-blue-50 p-4 rounded-lg"},kt={class:"text-2xl font-bold text-blue-900"},qt={key:0,class:"mb-6"},Ct={class:"space-y-3"},At={class:"flex-shrink-0"},St={class:"text-xs font-medium text-white"},Tt={class:"ml-3"},Mt={class:"text-sm font-medium text-gray-900"},Lt={class:"text-sm text-gray-500"},Vt={class:"text-xs text-gray-400 mt-1"},Ft={key:1,class:"mb-6"},Nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ot={class:"flex items-center justify-between"},Pt={class:"text-sm font-medium text-gray-900"},Ht={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},It={key:2,class:"text-center py-8 text-gray-500"},jt={__name:"ProctoringTable",props:{attempts:{type:[Array,Object],required:!0,default:()=>[]}},setup(u){const p=u,_=y(()=>Array.isArray(p.attempts)?p.attempts:p.attempts&&Array.isArray(p.attempts.data)?p.attempts.data:[]);y(()=>_.value.filter(s=>s.proctoring_data).length),y(()=>{const s=_.value.find(e=>e.proctoring_data);return s?s.proctoring_data.substring(0,100)+"...":"None"});const l=y(()=>{const s=[];return _.value.forEach(e=>{if(e.proctoring_data)try{const i=JSON.parse(e.proctoring_data);Array.isArray(i)&&i.forEach(c=>{var d;s.push({...c,attempt_id:e.id,user_id:e.user_id,user_name:((d=e.user)==null?void 0:d.name)||"Unknown User",attempt_number:e.attempt_number,score:e.score,percentage:e.percentage})})}catch(i){console.error("Failed to parse proctoring_data:",i,e.proctoring_data)}}),s}),g=y(()=>l.value),b=y(()=>{const s={};return g.value.forEach(e=>{s[e.type]||(s[e.type]=0),s[e.type]++}),Object.entries(s).map(([e,i])=>({type:e,count:i})).sort((e,i)=>i.count-e.count)}),h=y(()=>g.value.length),S=y(()=>g.value.filter(s=>s.type==="tab_switch").length),k=y(()=>g.value.filter(s=>s.type!=="tab_switch").length),T=y(()=>[...g.value].sort((s,e)=>new Date(e.timestamp)-new Date(s.timestamp))),q=s=>({tab_switch:"Tab Switch",face_not_visible:"Face Not Visible",multiple_faces:"Multiple Faces Detected",voice_detected:"Voice Detected",mobile_phone:"Mobile Phone Detected",person_left:"Person Left Camera View",paste_attempt:"Paste Attempt",copy_attempt:"Copy Attempt",forbidden_key_combination:"Forbidden Key Combination"})[s]||s.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase()),C=s=>({tab_switch:"bg-red-500",face_not_visible:"bg-yellow-500",multiple_faces:"bg-orange-500",voice_detected:"bg-purple-500",mobile_phone:"bg-blue-500",person_left:"bg-indigo-500",paste_attempt:"bg-pink-500",copy_attempt:"bg-teal-500",forbidden_key_combination:"bg-cyan-500"})[s]||"bg-gray-500",f=s=>({tab_switch:"TS",face_not_visible:"FNV",multiple_faces:"MF",voice_detected:"VD",mobile_phone:"MP",person_left:"PL",paste_attempt:"PA",copy_attempt:"CA",forbidden_key_combination:"FK"})[s]||s.substring(0,2).toUpperCase(),r=s=>{if(!s)return"Unknown time";try{return new Date(s).toLocaleString()}catch{return s}};return A(!0),(s,e)=>(o(),a("div",xt,[e[5]||(e[5]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Proctoring Violations"),t("p",{class:"text-sm text-gray-500 mt-1"},"Monitoring of exam integrity violations")],-1)),t("div",yt,[t("div",bt,[t("div",ft,[e[0]||(e[0]=t("p",{class:"text-sm font-medium text-red-800"},"Total Violations",-1)),t("p",ht,n(h.value),1)]),t("div",vt,[e[1]||(e[1]=t("p",{class:"text-sm font-medium text-yellow-800"},"Tab Switch Violations",-1)),t("p",wt,n(S.value),1)]),t("div",$t,[e[2]||(e[2]=t("p",{class:"text-sm font-medium text-blue-800"},"Other Violations",-1)),t("p",kt,n(k.value),1)])]),g.value.length>0?(o(),a("div",qt,[e[3]||(e[3]=t("h4",{class:"text-md font-medium mb-3"},"Violation Timeline",-1)),t("div",Ct,[(o(!0),a(w,null,$(T.value,(i,c)=>(o(),a("div",{key:c,class:"flex items-start p-3 border border-gray-200 rounded-lg"},[t("div",At,[t("span",{class:x(["inline-flex items-center justify-center h-8 w-8 rounded-full",C(i.type)])},[t("span",St,n(f(i.type)),1)],2)]),t("div",Tt,[t("p",Mt,n(q(i.type)),1),t("p",Lt,n(r(i.timestamp)),1),t("p",Vt," Attempt #"+n(i.attempt_number)+" by "+n(i.user_name),1)])]))),128))])])):v("",!0),b.value.length>0?(o(),a("div",Ft,[e[4]||(e[4]=t("h4",{class:"text-md font-medium mb-3"},"Violation Types",-1)),t("div",Nt,[(o(!0),a(w,null,$(b.value,(i,c)=>(o(),a("div",{key:c,class:"p-3 border border-gray-200 rounded-lg"},[t("div",Ot,[t("span",Pt,n(q(i.type)),1),t("span",Ht,n(i.count),1)])]))),128))])])):v("",!0),g.value.length===0?(o(),a("div",It," No proctoring violations detected ")):v("",!0)])]))}},Dt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Et={class:"p-6 bg-white border-b border-gray-200"},Qt={key:0,class:"space-y-6"},zt={class:"flex justify-between items-start mb-3"},Ut={class:"flex-1"},Bt={class:"font-medium"},Yt=["innerHTML"],Jt={class:"flex flex-wrap gap-2 text-sm text-gray-500 mt-1"},Rt={class:"bg-gray-100 px-2 py-1 rounded"},Gt={class:"bg-green-100 px-2 py-1 rounded"},Kt={key:0,class:"bg-blue-100 text-blue-700 px-2 py-1 rounded"},Wt={class:"mt-4"},Xt={key:0,class:"space-y-2"},Zt={class:"w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 text-xs font-medium"},te=["innerHTML"],ee={key:0,class:"ml-auto text-green-600 font-medium"},se={key:1,class:"space-y-2"},re={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},oe={key:2,class:"space-y-2"},ne={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},ie={class:"list-disc pl-5 space-y-1"},ae={key:3,class:"space-y-2"},le={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},de=["innerHTML"],ce={key:4,class:"space-y-2"},ue={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},pe=["innerHTML"],ge=["innerHTML"],_e={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-2"},xe=["innerHTML"],ye=["innerHTML"],be={key:1},fe={key:5,class:"space-y-2"},he={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},ve={class:"list-decimal pl-5 space-y-1"},we=["innerHTML"],$e={key:0,class:"list-decimal pl-5 space-y-1"},ke=["innerHTML"],qe={key:1},Ce={key:6,class:"space-y-2"},Ae={class:"p-2 rounded border bg-gray-50"},Se={key:0,class:"whitespace-pre-wrap"},Te={key:1,class:"text-gray-500"},Me={key:0,class:"mt-3 p-3 bg-blue-50 rounded border border-blue-200"},Le={class:"mt-1 text-blue-800"},Ve={class:"mt-4 pt-3 border-t border-gray-200 flex justify-between items-center"},Fe={class:"text-sm text-gray-600"},Ne=["onClick"],Oe={key:0,class:"mt-3 p-3 bg-blue-50 rounded border border-blue-200"},Pe={class:"mt-1 text-blue-800"},He={key:1,class:"mt-3 p-3 bg-gray-50 rounded border border-gray-200"},Ie={class:"mt-1 text-gray-800"},je={key:1,class:"text-center py-8 text-gray-500"},De={__name:"QuestionAttempts",props:{responses:{type:Array,default:()=>[]}},setup(u){const p=A({}),_=r=>{p.value={...p.value,[r]:!p.value[r]}},l=r=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[r]||r,g=r=>{if(r<60)return`${r} sec`;{const s=Math.floor(r/60),e=r%60;return e===0?`${s} min`:`${s} min ${e} sec`}},b=(r,s)=>{if(!r||!s)return r;const e=[...s];return r.replace(/\[blank\]/g,()=>`[${e.shift()||"answer"}]`)},h=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},S=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return{explanation:r}}return r||{}},k=(r,s)=>r.correct_answers&&r.correct_answers.includes(s),T=r=>r.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50",q=r=>r.is_correct?"bg-green-100 text-green-700 px-2 py-1 rounded":"bg-red-100 text-red-700 px-2 py-1 rounded",C=(r,s)=>{const e=h(r.answer),i=k(r.question,s),c=Array.isArray(e)?e.includes(s):e===s;return i?"bg-green-100 border-green-300 text-green-800":c&&!i?"bg-red-100 border-red-300 text-red-800":"bg-gray-50 border-gray-200"},f=r=>r.is_correct?"bg-green-100 border-green-300 text-green-800":"bg-red-100 border-red-300 text-red-800";return(r,s)=>(o(),a("div",Dt,[t("div",Et,[s[19]||(s[19]=t("h3",{class:"text-lg font-medium mb-4"},"Question Review",-1)),u.responses&&u.responses.length>0?(o(),a("div",Qt,[(o(!0),a(w,null,$(u.responses,(e,i)=>{var c;return o(),a("div",{key:e.id,class:x(["border rounded-lg p-4 transition-all duration-200",T(e)])},[t("div",zt,[t("div",Ut,[t("h4",Bt,[N(n(i+1)+". ",1),t("span",{innerHTML:e.question.question},null,8,Yt)]),t("div",Jt,[t("span",Rt,n(l(e.question.type)),1),t("span",Gt,n(e.question.points)+" points ",1),t("span",{class:x(q(e))},n(e.is_correct?"✓ Correct":"✗ Incorrect"),3),e.time_spent>0?(o(),a("span",Kt," ⏱️ "+n(g(e.time_spent)),1)):v("",!0)])])]),t("div",Wt,[e.question.type==="multiple_choice"?(o(),a("div",Xt,[s[0]||(s[0]=t("p",{class:"font-medium text-sm text-gray-700 mb-2"},"Options:",-1)),(o(!0),a(w,null,$(e.question.options,(d,m)=>(o(),a("div",{key:m,class:x(["p-2 rounded border flex items-center",C(e,d)])},[t("span",Zt,n(String.fromCharCode(65+m)),1),t("span",{innerHTML:d},null,8,te),k(e.question,d)?(o(),a("span",ee," ✓ Correct ")):v("",!0)],2))),128))])):e.question.type==="true_false"?(o(),a("div",se,[s[1]||(s[1]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Answer:",-1)),t("div",re,n(e.question.correct_answers&&e.question.correct_answers[0]==="true"?"True":"False"),1),s[2]||(s[2]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Answer:",-1)),t("div",{class:x(["p-2 rounded border",f(e)])},n(e.answer==="true"?"True":"False"),3)])):e.question.type==="short_answer"?(o(),a("div",oe,[s[3]||(s[3]=t("p",{class:"font-medium text-sm text-gray-700"},"Accepted Answers:",-1)),t("div",ne,[t("ul",ie,[(o(!0),a(w,null,$(e.question.correct_answers,(d,m)=>(o(),a("li",{key:m},n(d),1))),128))])]),s[4]||(s[4]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Answer:",-1)),t("div",{class:x(["p-2 rounded border",f(e)])},n(e.answer||"No answer provided"),3)])):e.question.type==="fill_in_blank"?(o(),a("div",ae,[s[5]||(s[5]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Text:",-1)),t("div",le,[t("div",{class:"whitespace-pre-line",innerHTML:b(e.question.question,e.question.correct_answers)},null,8,de)]),s[6]||(s[6]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Answer:",-1)),t("div",{class:x(["p-2 rounded border",f(e)])},n(Array.isArray(e.answer)?e.answer.join(", "):e.answer||"No answer provided"),3)])):e.question.type==="matching"?(o(),a("div",ce,[s[9]||(s[9]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Matches:",-1)),t("div",ue,[t("div",me,[(o(!0),a(w,null,$(e.question.options,(d,m)=>(o(),a("div",{key:m,class:"flex items-center"},[t("span",{class:"font-medium",innerHTML:d.left},null,8,pe),s[7]||(s[7]=t("span",{class:"mx-2"},"→",-1)),t("span",{class:"font-medium",innerHTML:d.right},null,8,ge)]))),128))])]),s[10]||(s[10]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Matches:",-1)),t("div",{class:x(["p-2 rounded border",f(e)])},[e.answer?(o(),a("div",_e,[(o(!0),a(w,null,$(h(e.answer),(d,m)=>(o(),a("div",{key:m,class:"flex items-center"},[t("span",{class:"font-medium",innerHTML:d.left},null,8,xe),s[8]||(s[8]=t("span",{class:"mx-2"},"→",-1)),t("span",{class:"font-medium",innerHTML:d.right||"No match"},null,8,ye)]))),128))])):(o(),a("div",be,"No answer provided"))],2)])):e.question.type==="ordering"?(o(),a("div",fe,[s[11]||(s[11]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Order:",-1)),t("div",he,[t("ol",ve,[(o(!0),a(w,null,$(e.question.correct_answers,(d,m)=>(o(),a("li",{key:m},[t("span",{innerHTML:d},null,8,we)]))),128))])]),s[12]||(s[12]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Order:",-1)),t("div",{class:x(["p-2 rounded border",f(e)])},[e.answer?(o(),a("ol",$e,[(o(!0),a(w,null,$(h(e.answer),(d,m)=>(o(),a("li",{key:m},[t("span",{innerHTML:d},null,8,ke)]))),128))])):(o(),a("div",qe,"No answer provided"))],2)])):e.question.type==="essay"?(o(),a("div",Ce,[s[14]||(s[14]=t("p",{class:"font-medium text-sm text-gray-700"},"Your Answer:",-1)),t("div",Ae,[e.answer?(o(),a("div",Se,n(e.answer),1)):(o(),a("div",Te,"No answer provided"))]),e.feedback?(o(),a("div",Me,[s[13]||(s[13]=t("p",{class:"font-medium text-sm text-blue-700"},"Instructor Feedback:",-1)),t("p",Le,n(e.feedback),1)])):v("",!0)])):v("",!0)]),t("div",Ve,[t("div",Fe,[s[15]||(s[15]=N(" Points earned: ")),t("span",{class:x(e.is_correct?"text-green-600 font-medium":"text-red-600")},n(e.points_earned||0)+" / "+n(e.question.points),3)]),e.feedback&&e.question.type!=="essay"?(o(),a("div",{key:0,class:"text-sm text-blue-600 cursor-pointer hover:underline",onClick:d=>_(e.id)},n(p.value[e.id]?"Hide Feedback":"View Feedback"),9,Ne)):v("",!0)]),p.value[e.id]&&e.feedback&&e.question.type!=="essay"?(o(),a("div",Oe,[s[16]||(s[16]=t("p",{class:"font-medium text-sm text-blue-700"},"Instructor Feedback:",-1)),t("p",Pe,n(e.feedback),1)])):v("",!0),e.grading_data&&typeof e.grading_data=="string"?(o(),a("div",He,[s[17]||(s[17]=t("p",{class:"font-medium text-sm text-gray-700"},"Explanation:",-1)),t("p",Ie,n((c=S(e.grading_data))==null?void 0:c.explanation),1)])):v("",!0)],2)}),128))])):(o(),a("div",je,s[18]||(s[18]=[t("p",null,"No questions available for review.",-1)])))])]))}},Ee=O(De,[["__scopeId","data-v-0a2ab497"]]),Qe={class:"py-6"},ze={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ue={class:"flex justify-between items-start"},Be={class:"text-gray-600 mt-2"},Ye={class:"text-gray-600"},Je={class:"text-right"},Re={class:"text-sm text-gray-500 mt-1"},Ge={class:"mb-6"},Ke={class:"mb-6"},We={class:"mb-6"},Xe={__name:"Show",props:{quiz:{type:Object,default:()=>({})},attempt:{type:Object,default:()=>({})},questions:{type:Array,default:()=>[]},questionpools:Object,violations:Array},setup(u){const p=l=>{if(!l)return"N/A";try{return new Date(l).toLocaleString()}catch{return"Invalid Date"}},_=l=>{if(!l)return"N/A";const g=Math.floor(l/60),b=l%60;return`${g}m ${b}s`};return(l,g)=>{var b;return o(),j(H,{title:`Attempt #${((b=u.attempt)==null?void 0:b.attempt_number)||"Unknown"}`},{default:D(()=>{var h,S,k,T,q,C,f,r,s;return[t("div",Qe,[t("div",ze,[t("div",{class:x(["bg-white shadow-sm sm:rounded-lg mb-6 p-6 border-l-4",(h=u.attempt)!=null&&h.is_passed?"border-green-500":"border-red-500"])},[t("div",Ue,[t("div",null,[g[0]||(g[0]=t("h2",{class:"text-xl font-semibold"},"Attempt Details",-1)),t("p",Be," Examinee: "+n(((k=(S=u.attempt)==null?void 0:S.user)==null?void 0:k.name)||"Unknown User")+" ("+n(((q=(T=u.attempt)==null?void 0:T.user)==null?void 0:q.email)||"No email")+") ",1),t("p",Ye," Completed: "+n(p((C=u.attempt)==null?void 0:C.completed_at)),1)]),t("div",Je,[t("span",{class:x(["px-3 py-1 rounded-full text-sm font-medium",(f=u.attempt)!=null&&f.is_passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])}," Score: "+n(((r=u.attempt)==null?void 0:r.percentage)||0)+"% ",3),t("p",Re," Time: "+n(_((s=u.attempt)==null?void 0:s.time_spent)),1)])])],2),t("div",Ge,[M(_t,{quiz:u.quiz,questionpools:u.questionpools,attempts:u.attempt,userId:u.attempt.user.id},null,8,["quiz","questionpools","attempts","userId"])]),t("div",Ke,[M(jt,{attempts:u.violations},null,8,["attempts"])]),t("div",We,[M(Ee,{responses:u.attempt.responses},null,8,["responses"])])])])]}),_:1},8,["title"])}}},rs=O(Xe,[["__scopeId","data-v-45e2af57"]]);export{rs as default};
