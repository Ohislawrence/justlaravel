import{d as l,o as s,a as e,h,F as S,l as O,t as c,i as j,y as Q,e as B,z as se,A as J,f as k,s as ie,n as W,k as E,b as H,w as ne,j as G,B as re,C as ae,D as ue,W as de,m as ce,E as me,c as fe,G as ge,g as ve}from"./app-Do1sSIaC.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as pe}from"./ClockIcon-0cnmOk7Y.js";const be={class:"space-y-3"},he={class:"space-y-2"},ye=["id","name","value","checked","onChange"],we=["for"],_e={key:0,class:"text-red-500 text-sm"},ke={__name:"MCQ",props:{question:{type:Object,required:!0},answer:{type:[String,Number,Object],default:null}},emits:["update"],setup(n,{emit:m}){const u=n,_=m,t=d=>typeof d=="object"&&typeof u.answer=="object"?JSON.stringify(d)===JSON.stringify(u.answer):u.answer===d,f=d=>{_("update",d)};return(d,v)=>(s(),l("div",be,[e("div",he,[(s(!0),l(S,null,O(n.question.options,(r,i)=>(s(),l("div",{key:i,class:"flex items-center"},[e("input",{id:`option-${n.question.id}-${i}`,type:"radio",name:`question-${n.question.id}`,value:r,checked:t(r),onChange:g=>f(r),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,40,ye),e("label",{for:`option-${n.question.id}-${i}`,class:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer"},c(r.text||r),9,we)]))),128))]),!n.question.options||n.question.options.length===0?(s(),l("div",_e," No options available for this question. ")):h("",!0)]))}},qe={class:"space-y-4"},$e={class:"flex items-center space-x-4"},Ce={class:"inline-flex items-center"},je=["name"],ze={class:"inline-flex items-center"},Me=["name"],Ee={key:0,class:"mt-3 space-y-2"},Se={key:0,class:"p-2 bg-blue-50 rounded-md"},Ie={class:"text-sm text-blue-800"},Ae={key:1,class:"p-2 bg-blue-50 rounded-md"},Le={class:"text-sm text-blue-800"},Oe={__name:"TrueFalse",props:{question:Object,answer:Boolean},emits:["update"],setup(n,{emit:m}){const u=n,_=m,t=j(u.answer);return Q(t,f=>{_("update",f)}),(f,d)=>(s(),l("div",qe,[e("div",$e,[e("label",Ce,[B(e("input",{"onUpdate:modelValue":d[0]||(d[0]=v=>t.value=v),type:"radio",name:`question-${n.question.id}`,value:!0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,je),[[se,t.value]]),d[2]||(d[2]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"True",-1))]),e("label",ze,[B(e("input",{"onUpdate:modelValue":d[1]||(d[1]=v=>t.value=v),type:"radio",name:`question-${n.question.id}`,value:!1,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,Me),[[se,t.value]]),d[3]||(d[3]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"False",-1))])]),n.question.settings.show_feedback?(s(),l("div",Ee,[t.value===!0&&n.question.settings.true_feedback?(s(),l("div",Se,[e("p",Ie,c(n.question.settings.true_feedback),1)])):h("",!0),t.value===!1&&n.question.settings.false_feedback?(s(),l("div",Ae,[e("p",Le,c(n.question.settings.false_feedback),1)])):h("",!0)])):h("",!0)]))}},Be={class:"space-y-4"},Qe={key:0,class:"p-3 bg-gray-50 rounded-md"},Te={class:"text-sm text-gray-600"},Ve={__name:"ShortAnswer",props:{question:{type:Object,required:!0,default:()=>({settings:{feedback:""},correct_answers:[]})},answer:String},emits:["update"],setup(n,{emit:m}){const u=n,_=m,t=j(u.answer||"");return Q(t,f=>{_("update",f)}),(f,d)=>{var v;return s(),l("div",Be,[e("div",null,[d[1]||(d[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Your Answer",-1)),B(e("input",{"onUpdate:modelValue":d[0]||(d[0]=r=>t.value=r),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Type your answer here"},null,512),[[J,t.value]])]),(v=n.question.settings)!=null&&v.feedback?(s(),l("div",Qe,[e("p",Te,c(n.question.settings.feedback),1)])):h("",!0)])}}},Fe={class:"space-y-4"},Ue={key:0,class:"text-sm text-gray-600"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={class:"space-y-2"},We={class:"space-y-2"},Ye=["onUpdate:modelValue"],Re=["value"],De={__name:"Matching",props:{question:{type:Object,required:!0},answer:{type:Array,default:()=>[]}},emits:["update"],setup(n,{emit:m}){var r;const u=n,_=m,t=j(new Array(((r=u.question.options)==null?void 0:r.length)||0).fill("")),f=k(()=>{var g,x;const i=((g=u.question.options)==null?void 0:g.map(y=>y.left))||[];return(x=u.question.settings)!=null&&x.randomize_left?[...i].sort(()=>Math.random()-.5):i}),d=k(()=>{var y,w,C;const i=((y=u.question.options)==null?void 0:y.map(I=>I.right))||[],g=((w=u.question.settings)==null?void 0:w.distractors)||[],x=[...i,...g];return(C=u.question.settings)!=null&&C.randomize_right?[...x].sort(()=>Math.random()-.5):x}),v=()=>{const i={};t.value.forEach((g,x)=>{if(g!==""){const y=f.value[x],w=d.value[g];i[y]=w}}),_("update",i)};return Q(()=>u.answer,i=>{i&&typeof i=="object"&&!Array.isArray(i)&&(t.value=new Array(f.value.length).fill(""),Object.entries(i).forEach(([g,x])=>{const y=f.value.indexOf(g),w=d.value.indexOf(x);y!==-1&&w!==-1&&(t.value[y]=w.toString())}))},{immediate:!0}),(i,g)=>{var x;return s(),l("div",Fe,[(x=n.question.settings)!=null&&x.instructions?(s(),l("div",Ue,c(n.question.settings.instructions),1)):h("",!0),e("div",Ne,[e("div",Pe,[g[0]||(g[0]=e("h3",{class:"text-sm font-medium text-gray-700"},"Items",-1)),(s(!0),l(S,null,O(f.value,(y,w)=>(s(),l("div",{key:`left-${w}`,class:"p-2 bg-gray-50 rounded border border-gray-200"},c(y),1))),128))]),e("div",We,[g[2]||(g[2]=e("h3",{class:"text-sm font-medium text-gray-700"},"Matches",-1)),(s(!0),l(S,null,O(f.value,(y,w)=>B((s(),l("select",{key:`select-${w}`,"onUpdate:modelValue":C=>t.value[w]=C,onChange:v,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[g[1]||(g[1]=e("option",{value:""},"Select match",-1)),(s(!0),l(S,null,O(d.value,(C,I)=>(s(),l("option",{key:`option-${I}`,value:I},c(C),9,Re))),128))],40,Ye)),[[ie,t.value[w]]])),128))])])])}}},He={class:"space-y-4"},Ge={key:0,class:"text-sm text-gray-600"},Je={key:0},Ke={key:1},Xe={key:2},Ze=["placeholder"],et={class:"flex justify-between items-center"},tt={key:0,class:"ml-2 text-red-600"},st={key:0,class:"text-xs text-blue-600"},nt={key:1,class:"mt-4 p-4 bg-gray-50 rounded-md border border-gray-200"},ot=["innerHTML"],lt={key:2,class:"mt-4"},it={class:"mt-1 text-xs text-gray-500"},rt={__name:"Essay",props:{question:{type:Object,required:!0,default:()=>({settings:{min_words:0,max_words:0,sample_answer:"",allow_rich_text:!1,allow_attachments:!1}})},answer:{type:[String,Object],default:""}},emits:["update"],setup(n,{emit:m}){const u=n,_=m,t=j(""),f=j([]);Q(()=>u.answer,a=>{typeof a=="string"?t.value=a:a!=null&&a.text&&(t.value=a.text,f.value=a.attachments||[])},{immediate:!0});const d=k(()=>{var a,z;return((a=u.question.settings)==null?void 0:a.min_words)>0||((z=u.question.settings)==null?void 0:z.max_words)>0}),v=k(()=>{var a;return(a=u.question.settings)==null?void 0:a.allow_rich_text}),r=k(()=>t.value.trim()?t.value.trim().split(/\s+/).length:0),i=k(()=>{const a=u.question.settings||{};return a.min_words>0&&r.value<a.min_words||a.max_words>0&&r.value>a.max_words}),g=k(()=>{const a=u.question.settings||{};return a.min_words>0&&r.value<a.min_words?`${a.min_words-r.value} more words required`:a.max_words>0&&r.value>a.max_words?`${r.value-a.max_words} words over limit`:""}),x=k(()=>i.value?"text-red-600":"text-gray-500"),y=k(()=>{const a=u.question.settings||{};return a.min_words>0&&a.max_words>0?`Write your answer here (${a.min_words}-${a.max_words} words)`:a.min_words>0?`Write your answer here (at least ${a.min_words} words)`:a.max_words>0?`Write your answer here (up to ${a.max_words} words)`:"Write your answer here"}),w=k(()=>v.value?"You may attach supporting documents or use rich text formatting below":"You may attach supporting documents if needed"),C=k(()=>{var a;return(a=u.question.settings)!=null&&a.sample_answer?u.question.settings.sample_answer.replace(/\n/g,"<br>"):""}),I=()=>{F()},Y=a=>{f.value=Array.from(a.target.files),F()},F=()=>{var a;(a=u.question.settings)!=null&&a.allow_attachments?_("update",{text:t.value,attachments:f.value}):_("update",t.value)};return(a,z)=>{var U,T;return s(),l("div",He,[d.value?(s(),l("div",Ge,[n.question.settings.min_words&&n.question.settings.max_words?(s(),l("span",Je," Your answer should be between "+c(n.question.settings.min_words)+" and "+c(n.question.settings.max_words)+" words. ",1)):n.question.settings.min_words?(s(),l("span",Ke," Minimum "+c(n.question.settings.min_words)+" words required. ",1)):n.question.settings.max_words?(s(),l("span",Xe," Maximum "+c(n.question.settings.max_words)+" words allowed. ",1)):h("",!0)])):h("",!0),B(e("textarea",{"onUpdate:modelValue":z[0]||(z[0]=R=>t.value=R),rows:"8",class:W(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",{"border-red-300":i.value}]),placeholder:y.value,onInput:I},null,42,Ze),[[J,t.value]]),e("div",et,[e("div",{class:W(["text-sm",x.value])},[E(" Word count: "+c(r.value)+" ",1),i.value?(s(),l("span",tt," ("+c(g.value)+") ",1)):h("",!0)],2),v.value?(s(),l("div",st," Rich text formatting available ")):h("",!0)]),(U=n.question.settings)!=null&&U.sample_answer?(s(),l("div",nt,[z[1]||(z[1]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Example Answer",-1)),e("div",{class:"text-sm text-gray-600",innerHTML:C.value},null,8,ot)])):h("",!0),(T=n.question.settings)!=null&&T.allow_attachments?(s(),l("div",lt,[z[2]||(z[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Attachments",-1)),e("input",{type:"file",onChange:Y,multiple:"",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e("p",it,c(w.value),1)])):h("",!0)])}}},at={class:"space-y-4"},ut={class:"whitespace-pre-wrap"},dt=["onUpdate:modelValue","placeholder"],ct={__name:"FillInTheBlank",props:{question:{type:Object,required:!0},answer:{type:Array,default:()=>[]}},emits:["update"],setup(n,{emit:m}){const u=n,_=m,t=k(()=>{const v=[],r=u.question.question||"",i=/(\[blank\])/gi;let g=0,x=0,y;for(;(y=i.exec(r))!==null;)y.index>g&&v.push({text:r.substring(g,y.index),isBlank:!1}),v.push({text:y[0],isBlank:!0,blankIndex:x++}),g=i.lastIndex;return g<r.length&&v.push({text:r.substring(g),isBlank:!1}),v}),f=j([]);Q(()=>u.question,v=>{const r=(v.question.match(/\[blank\]/gi)||[]).length;f.value=new Array(r).fill(""),u.answer&&u.answer.length>0&&u.answer.forEach((i,g)=>{g<f.value.length&&(f.value[g]=i)})},{immediate:!0});const d=()=>{_("update",[...f.value])};return(v,r)=>(s(),l("div",at,[e("div",ut,[(s(!0),l(S,null,O(t.value,(i,g)=>(s(),l(S,{key:g},[i.isBlank?B((s(),l("input",{key:0,"onUpdate:modelValue":x=>f.value[i.blankIndex]=x,onInput:d,type:"text",class:"inline-block mx-1 px-2 py-1 border-b-2 border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:`Blank ${i.blankIndex+1}`},null,40,dt)),[[J,f.value[i.blankIndex]]]):(s(),l(S,{key:1},[E(c(i.text),1)],64))],64))),128))])]))}},mt={class:"space-y-4"},ft={key:0,class:"text-sm text-gray-600 mb-3"},gt={class:"flex items-center bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200"},vt={class:"flex-1"},xt={class:"ml-3 text-sm text-gray-500"},pt={class:"mt-4"},bt={class:"list-decimal pl-5 mt-1 space-y-1"},ht={__name:"Ordering",props:{question:{type:Object,required:!0},answer:{type:Array,default:()=>[]}},emits:["update"],setup(n,{emit:m}){const u=n,_=m,t=j([]);Q(()=>u.question,d=>{var v;if(d.options)if(u.answer&&u.answer.length>0)t.value=u.answer.map(r=>d.options[r]);else{const r=[...d.options];(v=d.settings)!=null&&v.randomize&&r.sort(()=>Math.random()-.5),t.value=r}},{immediate:!0});const f=()=>{if(!u.question.options)return;const d=t.value.map(v=>u.question.options.findIndex(r=>r.id===v.id)).filter(v=>v!==-1);_("update",d)};return(d,v)=>{var r;return s(),l("div",mt,[(r=n.question.settings)!=null&&r.instructions?(s(),l("div",ft,c(n.question.settings.instructions),1)):h("",!0),H(G(re),{modelValue:t.value,"onUpdate:modelValue":v[0]||(v[0]=i=>t.value=i),"item-key":"id",class:"space-y-2",onEnd:f},{item:ne(({element:i,index:g})=>[e("div",gt,[v[1]||(v[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-5 h-5 text-gray-400 cursor-move mr-3"},[e("line",{x1:"9",y1:"18",x2:"9",y2:"6"}),e("line",{x1:"15",y1:"18",x2:"15",y2:"6"})],-1)),e("span",vt,c(i.text),1),e("span",xt,"#"+c(g+1),1)])]),_:1},8,["modelValue"]),e("div",pt,[v[2]||(v[2]=e("h4",{class:"text-sm font-medium text-gray-700"},"Your current order:",-1)),e("ol",bt,[(s(!0),l(S,null,O(t.value,(i,g)=>(s(),l("li",{key:`current-${g}`},c(i.text),1))),128))])])])}}},yt={class:"bg-white text-gray-800 py-3 px-4 shadow-sm rounded-b-lg border-b border-gray-200 sticky top-0 z-10"},wt={class:"max-w-4xl mx-auto flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},_t={class:"text-xl font-bold text-gray-900 truncate w-full sm:w-auto"},kt={class:"flex items-center justify-between w-full sm:w-auto gap-3"},qt={key:0,class:"flex items-center bg-gray-100 px-3 py-1.5 rounded-full text-sm"},$t=["disabled"],Ct={class:"max-w-4xl mx-auto py-6 px-4 sm:px-6"},jt={class:"mb-6"},zt={class:"flex justify-between text-sm text-gray-600 mb-1"},Mt={class:"font-medium text-emerald-600"},Et={class:"w-full bg-gray-200 rounded-full h-2.5"},St={class:"bg-white rounded-lg shadow hover:shadow-md transition-shadow duration-300 p-6 mb-6 border border-gray-200"},It={class:"flex items-start mb-5"},At={class:"flex-shrink-0 bg-emerald-100 text-emerald-800 rounded-full w-9 h-9 flex items-center justify-center mr-4 font-bold text-sm"},Lt={class:"min-w-0 flex-1"},Ot={class:"text-lg font-semibold text-gray-900 leading-relaxed"},Bt={class:"mt-3 flex flex-wrap items-center gap-2 text-xs"},Qt={class:"bg-gray-100 text-gray-700 px-2.5 py-1 rounded-full font-medium"},Tt={class:"bg-emerald-100 text-emerald-700 px-2.5 py-1 rounded-full font-medium"},Vt={key:0,class:"bg-amber-100 text-amber-700 px-2.5 py-1 rounded-full font-medium"},Ft={key:1,class:"bg-rose-100 text-rose-700 px-2.5 py-1 rounded-full font-medium text-xs"},Ut={key:0,class:"mt-4 text-sm text-gray-600"},Nt={key:0,class:"mb-6 flex justify-center"},Pt={class:"max-w-2xl w-full"},Wt=["src","alt"],Yt={key:1},Rt={key:1,class:"p-4 bg-amber-50 border border-amber-200 rounded-md"},Dt={class:"flex items-start"},Ht={class:"text-sm text-amber-700 mt-1"},Gt={key:2,class:"flex justify-center py-10"},Jt={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},Kt=["disabled"],Xt={class:"flex space-x-1.5 justify-center"},Zt=["onClick","title","aria-label"],es={class:"flex space-x-2 w-full sm:w-auto"},ts=["disabled"],ss={class:"relative max-w-6xl max-h-[90vh] w-full h-full flex items-center justify-center"},ns=["src","alt"],os={class:"absolute bottom-4 left-4 bg-black bg-opacity-60 text-white px-3 py-1.5 rounded-md text-sm font-medium"},ls={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4"},is={class:"relative w-full max-w-md bg-white rounded-xl shadow-xl transform transition-all"},rs={class:"px-6 pt-6 pb-4"},as={class:"mt-4 text-center"},us={key:0,class:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-5"},ds={class:"text-amber-800 text-sm font-semibold flex items-center justify-center"},cs={class:"text-left bg-gray-50 rounded-lg p-3 text-xs text-gray-600 space-y-1"},ms={class:"font-medium"},fs={key:0},gs={class:"font-medium"},vs={class:"bg-gray-50 px-6 py-4 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 rounded-b-xl"},xs=["disabled"],ps={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},bs={__name:"QuizPlayer",props:{quiz:{type:Object,required:!0},attempt:{type:Object,required:!0},questions:{type:Array,required:!0,default:()=>[]},timeLimit:{type:Number,default:null}},setup(n){const m=n,u=p=>p?{multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",matching:"Matching",ordering:"Ordering",fill_in_the_blank:"Fill In The Blank",essay:"Essay"}[p]||p:"Unknown",_={multiple_choice:ke,true_false:Oe,short_answer:Ve,matching:De,ordering:ht,fill_in_the_blank:ct,essay:rt},t=j(0),f=j([]),d=j(!1),v=j(!1),r=j(!1),i=j(m.timeLimit?m.timeLimit*60:0),g=j(null),x=k(()=>!m.questions||!m.questions.length||t.value>=m.questions.length?null:m.questions[t.value]),y=k(()=>!m.questions||m.questions.length===0?0:Math.round((t.value+1)/m.questions.length*100)),w=k(()=>{const p=Math.floor(i.value/60),o=i.value%60;return`${p}:${o.toString().padStart(2,"0")}`}),C=k(()=>f.value.filter(p=>p==null||p==="").length),I=p=>{if(!p)return console.error("Question type is undefined"),null;const o=_[p];return o||(console.error(`No component found for question type: ${p}`),null)};ae(()=>{console.log("Quiz component mounted"),console.log("Props:",m),console.log("Questions:",m.questions),m.questions&&m.questions.length>0&&(f.value=new Array(m.questions.length).fill(null)),m.timeLimit&&m.timeLimit>0&&Y(),le(),window.addEventListener("beforeunload",Z)}),ue(()=>{g.value&&clearInterval(g.value),window.removeEventListener("beforeunload",Z)});function Y(){g.value=setInterval(()=>{i.value--,i.value<=0&&(clearInterval(g.value),alert("Time is up! Your quiz will be submitted automatically."),X())},1e3)}function F(){t.value<m.questions.length-1&&t.value++}function a(){t.value>0&&t.value--}function z(p){p>=0&&p<m.questions.length&&(t.value=p)}function U(){v.value=!0}function T(){v.value=!1}function R(p){console.error("Failed to load question image:",p.target.src),p.target.style.display="none";const o=p.target.parentElement;if(o){const A=document.createElement("div");A.className="text-center text-gray-500 py-4",A.textContent="Image failed to load.",o.appendChild(A)}}function oe(p){console.log("Updating answer for question",t.value,"with value:",p),f.value[t.value]=p}function K(){d.value=!0}const X=async()=>{var p,o,A;r.value=!0,d.value=!1;try{if(!((p=m.attempt)!=null&&p.id)||!((o=m.quiz)!=null&&o.id))throw new Error("Missing quiz or attempt information");const L=m.questions.reduce((q,$,P)=>{const b=f.value[P];if(b!=null&&b!==""&&($!=null&&$.id))switch($.type){case"ordering":q[$.id]=Array.isArray(b)?b:[b];break;case"multiple_choice":case"true_false":q[$.id]=b;break;case"fill_in_the_blank":q[$.id]=typeof b=="string"?b.trim():b;break;case"matching":typeof b=="object"&&b!==null?q[$.id]=Object.keys(b).length>0?b:null:q[$.id]=null;break;default:Array.isArray(b)?q[$.id]=b.length>0?b:null:typeof b=="object"&&b!==null?q[$.id]=Object.keys(b).length>0?b:null:q[$.id]=b}return q},{}),V={attempt_id:m.attempt.id,answers:L,time_spent:m.timeLimit?Math.max(0,m.timeLimit*60-i.value):null,proctoring_flags:{tab_switches:window.tabSwitchCount||0,fullscreen_exits:window.fullscreenExitCount||0}};return console.debug("Submission payload:",V),await de.post(route("examinee.submit",{quiz:m.quiz.id}),V,{headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((A=document.querySelector('meta[name="csrf-token"]'))==null?void 0:A.content)||""},onError:q=>{throw q.message?new Error(q.message):new Error("Submission failed. Please try again.")}})}catch(L){throw console.error("Submission error:",L),showSubmissionError.value=!0,submissionError.value=L.message||"Failed to submit quiz. Please try again.",r.value=!1,L}finally{}};function le(){window.tabSwitchCount=0,window.addEventListener("blur",()=>{document.visibilityState==="hidden"&&(window.tabSwitchCount++,console.log("Tab switch detected. Count:",window.tabSwitchCount))}),window.fullscreenExitCount=0,document.addEventListener("fullscreenchange",N),document.addEventListener("webkitfullscreenchange",N),document.addEventListener("mozfullscreenchange",N),document.addEventListener("MSFullscreenChange",N)}function N(){!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.mozFullScreenElement&&!document.msFullscreenElement&&(window.fullscreenExitCount++,console.log("Fullscreen exit detected. Count:",window.fullscreenExitCount))}function Z(p){if(!r.value&&f.value.some(o=>o!=null&&o!=="")&&C.value>0)return p.preventDefault(),p.returnValue="You have unanswered questions. Are you sure you want to leave?",p.returnValue}return(p,o)=>{var A,L,V,D,q,$,P,b,ee;return s(),l(S,null,[H(G(ce),null,{default:ne(()=>[e("title",null,c(n.quiz.title),1)]),_:1}),e("div",yt,[e("div",wt,[e("h1",_t,c(n.quiz.title),1),e("div",kt,[n.timeLimit?(s(),l("div",qt,[H(G(pe),{class:"h-4 w-4 mr-1 text-gray-600"}),e("span",{class:W({"text-red-600 font-medium":i.value<=300,"animate-pulse":i.value<=60})},c(w.value),3)])):h("",!0),e("button",{onClick:K,class:"bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-500 focus:ring-offset-2 text-white px-4 py-1.5 rounded-md text-sm font-medium transition-colors shadow-sm focus:outline-none focus:ring-2",disabled:r.value}," Submit Quiz ",8,$t)])])]),e("div",Ct,[e("div",jt,[e("div",zt,[e("span",null,"Question "+c(t.value+1)+" of "+c(n.questions.length),1),e("span",Mt,c(y.value)+"% Complete",1)]),e("div",Et,[e("div",{class:"bg-emerald-600 h-2.5 rounded-full transition-all duration-500 ease-out",style:me({width:`${y.value}%`})},null,4)])]),e("div",St,[e("div",It,[e("span",At,c(t.value+1),1),e("div",Lt,[e("h3",Ot,c(((A=x.value)==null?void 0:A.question)||"Loading question..."),1),e("div",Bt,[e("span",Qt,c(u((L=x.value)==null?void 0:L.type)),1),e("span",Tt,c(((V=x.value)==null?void 0:V.points)||0)+" pt"+c((((D=x.value)==null?void 0:D.points)||0)!==1?"s":""),1),(q=x.value)!=null&&q.time_limit?(s(),l("span",Vt,c(x.value.time_limit)+" min limit ",1)):h("",!0),($=x.value)!=null&&$.is_required?(s(),l("span",Ft," Required ")):h("",!0)]),(P=x.value)!=null&&P.description?(s(),l("p",Ut,c(x.value.description),1)):h("",!0)])]),(b=x.value)!=null&&b.image?(s(),l("div",Nt,[e("div",Pt,[e("img",{src:x.value.image,alt:`Question ${t.value+1} image`,class:"w-full h-auto rounded-lg border border-gray-200 shadow-sm cursor-zoom-in transition-transform hover:scale-[1.02]",onClick:U,onError:R,loading:"lazy"},null,40,Wt),o[2]||(o[2]=e("p",{class:"text-xs text-gray-500 text-center mt-2"}," Click to enlarge ",-1))])])):h("",!0),x.value?(s(),l("div",Yt,[I(x.value.type)?(s(),fe(ge(I(x.value.type)),{key:0,question:x.value,answer:f.value[t.value],onUpdate:oe,class:"mt-2"},null,40,["question","answer"])):(s(),l("div",Rt,[e("div",Dt,[o[4]||(o[4]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[o[3]||(o[3]=e("p",{class:"text-amber-800 font-medium"}," Unsupported Question Type ",-1)),e("p",Ht,' The question type "'+c(x.value.type)+'" is not currently supported in this quiz interface. ',1)])])]))])):(s(),l("div",Gt,o[5]||(o[5]=[e("div",{class:"flex items-center text-gray-600"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-emerald-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",null,"Loading question...")],-1)])))]),e("div",Jt,[e("button",{onClick:a,disabled:t.value===0,class:"w-full sm:w-auto bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed text-gray-800 px-5 py-2 rounded-md font-medium transition-colors flex items-center justify-center"},o[6]||(o[6]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),E(" Previous ")]),8,Kt),e("div",Xt,[(s(!0),l(S,null,O(n.questions,(te,M)=>(s(),l("button",{key:te.id,onClick:hs=>z(M),class:W(["w-3 h-3 rounded-full transition-colors focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-emerald-500",M===t.value?"bg-emerald-600 scale-125":f.value[M]!==null&&f.value[M]!==void 0&&f.value[M]!==""?"bg-emerald-500":"bg-gray-300"]),title:`Go to Question ${M+1}${f.value[M]!==null&&f.value[M]!==void 0&&f.value[M]!==""?" (Answered)":""}`,"aria-label":`Go to Question ${M+1}`},null,10,Zt))),128))]),e("div",es,[t.value<n.questions.length-1?(s(),l("button",{key:0,onClick:F,class:"w-full bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-500 text-white px-5 py-2 rounded-md font-medium transition-colors flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-sm"},o[7]||(o[7]=[E(" Next "),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):t.value===n.questions.length-1?(s(),l("button",{key:1,onClick:K,class:"w-full bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-500 text-white px-5 py-2 rounded-md font-medium transition-colors flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-sm",disabled:r.value},o[8]||(o[8]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),E(" Submit Quiz ")]),8,ts)):h("",!0)])])]),v.value?(s(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:T},[e("div",ss,[e("img",{src:(ee=x.value)==null?void 0:ee.image,alt:`Question ${t.value+1} image - Full size`,class:"max-w-full max-h-full object-contain rounded-lg shadow-xl border border-gray-700",onClick:o[0]||(o[0]=ve(()=>{},["stop"]))},null,8,ns),e("button",{onClick:T,class:"absolute top-4 right-4 bg-black bg-opacity-60 text-white rounded-full p-2 hover:bg-opacity-80 transition-opacity focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Close image"},o[9]||(o[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",os," Question "+c(t.value+1)+" Image ",1)])])):h("",!0),d.value?(s(),l("div",ls,[e("div",is,[e("div",rs,[o[16]||(o[16]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-rose-100 mb-4"},[e("svg",{class:"h-6 w-6 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})])],-1)),o[17]||(o[17]=e("h3",{class:"text-lg font-bold text-center text-gray-900"},"Submit Quiz",-1)),e("div",as,[o[15]||(o[15]=e("p",{class:"text-sm text-gray-600 mb-5"}," Are you sure you want to submit your quiz? This action cannot be undone. ",-1)),C.value>0?(s(),l("div",us,[e("p",ds,[o[10]||(o[10]=e("svg",{class:"w-5 h-5 mr-1.5 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),E(" "+c(C.value)+" Unanswered Question"+c(C.value!==1?"s":""),1)]),o[11]||(o[11]=e("p",{class:"text-xs text-amber-700 mt-1"},"You can go back to review them.",-1))])):h("",!0),e("div",cs,[o[14]||(o[14]=e("p",{class:"font-medium text-gray-700"},"Summary:",-1)),e("p",null,[o[12]||(o[12]=E("• Answered: ")),e("span",ms,c(n.questions.length-C.value),1),E(" / "+c(n.questions.length),1)]),n.timeLimit?(s(),l("p",fs,[o[13]||(o[13]=E("• Time remaining: ")),e("span",gs,c(w.value),1)])):h("",!0)])])]),e("div",vs,[e("button",{onClick:o[1]||(o[1]=te=>d.value=!1),type:"button",class:"w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:text-sm"}," Cancel "),e("button",{onClick:X,disabled:r.value,type:"button",class:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:text-sm disabled:opacity-75"},[r.value?(s(),l("svg",ps,o[18]||(o[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):h("",!0),E(" "+c(r.value?"Submitting...":"Yes, Submit Quiz"),1)],8,xs)])])])):h("",!0)],64)}}},ks=xe(bs,[["__scopeId","data-v-b938b906"]]);export{ks as default};
