import{x as j,i as v,f as C,E as P,c as S,o as n,w as k,a as s,b as l,j as o,S as $,k as N,g as F,d as a,h as d,e as c,F as G,l as L,t as y,z as A,A as _,Q as R,a0 as g}from"./app-DK7Qb6e3.js";import{A as D}from"./AppLayout-SHzQRZzg.js";import{_ as O,a as J,b as W,c as H,d as K,e as X,f as Y}from"./OrderingEditor-BM837OwO.js";import{_ as m}from"./InputError-D4mNXB1g.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const ee={class:"font-semibold text-xl text-gray-800 leading-tight"},te={class:"py-6"},se={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-100"},ie={class:"p-6 bg-white border-b border-gray-200"},re={class:"mb-6"},ne={class:"grid grid-cols-1 gap-6"},le=["value"],ae={class:"mt-1"},ue={key:0,class:"mb-4"},de={class:"relative inline-block"},me=["src"],ge={class:"text-sm text-gray-500 mt-2"},ce={class:"text-xs text-gray-500 mt-1"},pe={class:"inline-flex items-center"},fe={key:0},be={key:1},xe={key:2},ve={key:3},ye={key:4},_e={key:5},we={key:6},ke={key:7},qe={key:8},he={key:9},Ve={class:"flex justify-end pt-4"},ze=["disabled"],Ue={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ce={key:1},Ie={key:2},Me={__name:"Edit",props:{quiz:Object,questionTypes:Object,question:{type:Object,required:!0}},setup(f){var V,z;const r=f,e=j({type:r.question.type||"multiple_choice",question:r.question.question||"",description:r.question.description||"",image:null,points:r.question.points||1,time_limit:r.question.time_limit||null,is_required:r.question.is_required||!1,options:r.question.options||null,correct_answers:r.question.correct_answers||[],settings:{rubric:((V=r.question.settings)==null?void 0:V.rubric)||[],distractors:((z=r.question.settings)==null?void 0:z.distractors)||[],...r.question.settings}}),p=v(r.question.image||null),b=v(!1),q=v(r.question.image||null);C(()=>!0);const h=C(()=>!!q.value);function I(u){const t=u.target.files[0];if(t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)"),u.target.value="";return}const x=5*1024*1024;if(t.size>x){alert("Image size must be less than 5MB"),u.target.value="";return}e.image=t;const U=new FileReader;U.onload=T=>{p.value=T.target.result},U.readAsDataURL(t),b.value=!1}}function M(){e.image=null,p.value=null,b.value=!0;const u=w.value;u&&(u.value="")}function B(){e.image=null,p.value=q.value,b.value=!1;const u=w.value;u&&(u.value="")}function E(){b.value&&(e.remove_image=!0),e.put(route("examiner.quizzes.questions.update",{quiz:r.quiz.id,question:r.question.id}),{preserveScroll:!0,onSuccess:()=>{router.visit(route("examiner.quizzes.questions.index",r.quiz.id))},onError:u=>{console.log("Validation errors:",u)}})}function Q(){router.visit(route("examiner.quizzes.questions.index",r.quiz.id))}P(()=>{r.question.settings&&(e.settings={rubric:r.question.settings.rubric||[],distractors:r.question.settings.distractors||[],...r.question.settings})});const w=v(null);return(u,t)=>(n(),S(D,{title:"Edit Question"},{header:k(()=>[s("h2",ee," Edit Question for "+y(f.quiz.title),1)]),default:k(()=>[s("div",te,[s("div",se,[s("div",oe,[s("div",ie,[s("div",re,[l(o($),{href:u.route("examiner.quizzes.questions.index",f.quiz.id),class:"inline-flex items-center text-green-600 hover:text-green-800 text-sm font-medium transition-colors duration-200"},{default:k(()=>t[13]||(t[13]=[s("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),N(" ← Back to Questions ")])),_:1,__:[13]},8,["href"])]),s("form",{onSubmit:F(E,["prevent"])},[s("div",ne,[s("div",null,[t[14]||(t[14]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Type",-1)),c(s("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>o(e).type=i),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},[(n(!0),a(G,null,L(f.questionTypes,(i,x)=>(n(),a("option",{key:x,value:x},y(i),9,le))),128))],512),[[A,o(e).type]]),l(m,{message:o(e).errors.type,class:"mt-2"},null,8,["message"])]),s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Text",-1)),c(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=i=>o(e).question=i),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[_,o(e).question]]),l(m,{message:o(e).errors.question,class:"mt-2"},null,8,["message"])]),s("div",null,[t[16]||(t[16]=s("label",{class:"block text-sm font-medium text-gray-700"},"Description (optional)",-1)),c(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=i=>o(e).description=i),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[_,o(e).description]]),l(m,{message:o(e).errors.description,class:"mt-2"},null,8,["message"])]),s("div",null,[t[18]||(t[18]=s("label",{class:"block text-sm font-medium text-gray-700"},"Question Image (optional)",-1)),s("div",ae,[p.value?(n(),a("div",ue,[s("div",de,[s("img",{src:p.value,alt:"Question image",class:"max-w-xs max-h-48 rounded-lg border border-gray-300 shadow-sm"},null,8,me),s("button",{type:"button",onClick:M,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200"},t[17]||(t[17]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),s("p",ge,y(o(e).image?"New image preview":"Current image"),1),h.value&&o(e).image?(n(),a("button",{key:0,type:"button",onClick:B,class:"mt-2 text-xs text-green-600 hover:text-green-800 transition-colors duration-200"}," Reset to original image ")):d("",!0)])):d("",!0),s("input",{ref_key:"imageInput",ref:w,type:"file",accept:"image/*",onChange:I,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 transition-colors duration-200"},null,544),s("p",ce," Supported formats: JPEG, PNG, GIF, WebP. Maximum size: 5MB. "+y(h.value?"Leave empty to keep current image.":""),1)]),l(m,{message:o(e).errors.image,class:"mt-2"},null,8,["message"])]),s("div",null,[t[19]||(t[19]=s("label",{class:"block text-sm font-medium text-gray-700"},"Points",-1)),c(s("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>o(e).points=i),type:"number",min:"0",step:"0.5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[_,o(e).points]]),l(m,{message:o(e).errors.points,class:"mt-2"},null,8,["message"])]),s("div",null,[t[20]||(t[20]=s("label",{class:"block text-sm font-medium text-gray-700"},"Time Limit (seconds, optional)",-1)),c(s("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>o(e).time_limit=i),type:"number",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[_,o(e).time_limit]]),l(m,{message:o(e).errors.time_limit,class:"mt-2"},null,8,["message"])]),s("div",null,[s("label",pe,[c(s("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>o(e).is_required=i),type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-500 focus:ring-green-500 transition-colors duration-200"},null,512),[[R,o(e).is_required]]),t[21]||(t[21]=s("span",{class:"ml-2 text-sm text-gray-600"},"Required Question",-1))]),l(m,{message:o(e).errors.is_required,class:"mt-2"},null,8,["message"])]),o(e).type==="multiple_choice"?(n(),a("div",fe,[l(O,{modelValue:o(e),"onUpdate:modelValue":t[6]||(t[6]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).type==="true_false"?(n(),a("div",be,[l(J,{modelValue:o(e),"onUpdate:modelValue":t[7]||(t[7]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).type==="short_answer"?(n(),a("div",xe,[l(W,{modelValue:o(e),"onUpdate:modelValue":t[8]||(t[8]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).type==="essay"?(n(),a("div",ve,[l(H,{modelValue:o(e),"onUpdate:modelValue":t[9]||(t[9]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).type==="fill_in_blank"?(n(),a("div",ye,[l(K,{modelValue:o(e),"onUpdate:modelValue":t[10]||(t[10]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).type==="matching"?(n(),a("div",_e,[l(X,{modelValue:o(e),"onUpdate:modelValue":t[11]||(t[11]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).type==="ordering"?(n(),a("div",we,[l(Y,{modelValue:o(e),"onUpdate:modelValue":t[12]||(t[12]=i=>g(e)?e.value=i:null)},null,8,["modelValue"])])):d("",!0),o(e).errors.options?(n(),a("div",ke,[l(m,{message:o(e).errors.options,class:"mt-2"},null,8,["message"])])):d("",!0),o(e).errors.correct_answers?(n(),a("div",qe,[l(m,{message:o(e).errors.correct_answers,class:"mt-2"},null,8,["message"])])):d("",!0),o(e).errors.settings?(n(),a("div",he,[l(m,{message:o(e).errors.settings,class:"mt-2"},null,8,["message"])])):d("",!0),s("div",Ve,[s("button",{type:"button",onClick:Q,class:"mr-3 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"}," Cancel "),s("button",{type:"submit",disabled:o(e).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition-colors duration-200 flex items-center"},[o(e).processing?(n(),a("svg",Ue,t[22]||(t[22]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),o(e).processing?(n(),a("span",Ce,"Updating...")):(n(),a("span",Ie,"Update Question"))],8,ze)])])],32)])])])])]),_:1}))}},Se=Z(Me,[["__scopeId","data-v-731f0e45"]]);export{Se as default};
