import{P as I}from"./PublicLayout-Dqb_Woy4.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{e as r,o as t,a as e,d as O,f as v,t as g,F as x,h as w,n as $,l as h,g as A,b as q,u as R,c as B,w as N,D as M}from"./app-BYM1Msdw.js";function T(l,n){return t(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})])}const L={class:"space-y-4"},S={key:0,class:"text-center py-4 text-gray-500"},F={key:1},E={key:0,class:"text-red-500 p-4 border border-red-200 rounded mb-4"},Y={class:"space-y-2"},V={key:0,class:"text-xs"},z={class:"flex-1"},P={key:0,class:"ml-2 text-green-600"},Q={key:1,class:"ml-2 text-red-600"},D={key:1,class:"mt-4 p-3 bg-blue-50 rounded border border-blue-200"},H={class:"text-sm text-blue-600"},J={__name:"MultipleChoiceResult",props:{question:{type:Object,required:!0,default:()=>({options:[],correct_answers:[],explanation:"",settings:{}})},response:{type:[Array,Number,String,Object],default:null},showExplanation:{type:Boolean,default:!0}},setup(l){const n=l,b=O(!1),f=O(null),c=s=>typeof s=="string"?s:s.value||s.text||s.id||JSON.stringify(s),i=s=>{if(n.response===null||n.response===void 0)return!1;const u=c(n.question.options[s]);return Array.isArray(n.response)?n.response.some(_=>c(_)===u):c(n.response)===u},a=s=>{if(!n.question.correct_answers)return!1;const u=c(n.question.options[s]);return Array.isArray(n.question.correct_answers)?n.question.correct_answers.some(_=>c(_)===u):c(n.question.correct_answers)===u},d=s=>typeof s=="string"?s:s.text||s.label||s.value||JSON.stringify(s);return(s,u)=>(t(),r("div",L,[b.value?(t(),r("div",S," Loading results... ")):(t(),r("div",F,[f.value?(t(),r("div",E," Error loading results: "+g(f.value),1)):v("",!0),u[1]||(u[1]=e("div",{class:"font-medium text-gray-700 mb-2"},"Your Answer:",-1)),e("div",Y,[(t(!0),r(x,null,w(l.question.options,(_,p)=>(t(),r("div",{key:p,class:$(["flex items-center p-3 rounded border transition-colors",{"border-green-500 bg-green-50":i(p)&&a(p),"border-red-500 bg-red-50":i(p)&&!a(p),"border-green-300 bg-green-50":!i(p)&&a(p),"border-gray-200":!i(p)&&!a(p)}])},[e("div",{class:$(["flex-shrink-0 h-5 w-5 rounded-full border flex items-center justify-center mr-3",{"bg-green-500 border-green-500 text-white":i(p)&&a(p),"bg-red-500 border-red-500 text-white":i(p)&&!a(p),"border-gray-300":!i(p)}])},[i(p)?(t(),r("span",V,"✓")):v("",!0)],2),e("div",z,g(d(_)),1),a(p)?(t(),r("div",P," ✓ Correct answer ")):i(p)?(t(),r("div",Q," ✗ Incorrect ")):v("",!0)],2))),128))]),l.showExplanation?(t(),r("div",D,[u[0]||(u[0]=e("div",{class:"font-medium text-blue-700 mb-1"},"Explanation:",-1)),e("div",H,g(l.question.explanation||"No explanation provided"),1)])):v("",!0)]))]))}},U=j(J,[["__scopeId","data-v-71487026"]]),W={class:"space-y-4"},G={class:"flex space-x-4"},K={key:0,class:"ml-2"},X={key:0,class:"ml-2"},Z={class:"text-sm text-gray-600 mt-2"},ee={__name:"TrueFalseResult",props:{question:{type:Object,required:!0,default:()=>({correct_answers:[!0]})},response:{type:Boolean,default:null}},setup(l){const n=l,b=h(()=>{var f;return((f=n.question.correct_answers)==null?void 0:f[0])??!0});return(f,c)=>(t(),r("div",W,[c[2]||(c[2]=e("div",{class:"font-medium text-gray-700"},"Your Answer:",-1)),e("div",G,[e("div",{class:$(["p-3 rounded border flex-1 text-center",{"border-green-500 bg-green-50":l.response===!0&&b.value===!0,"border-red-500 bg-red-50":l.response===!0&&b.value!==!0,"border-gray-200":l.response!==!0}])},[c[0]||(c[0]=A(" True ")),l.response===!0?(t(),r("span",K,"✓")):v("",!0)],2),e("div",{class:$(["p-3 rounded border flex-1 text-center",{"border-green-500 bg-green-50":l.response===!1&&b.value===!1,"border-red-500 bg-red-50":l.response===!1&&b.value!==!1,"border-gray-200":l.response!==!1}])},[c[1]||(c[1]=A(" False ")),l.response===!1?(t(),r("span",X,"✓")):v("",!0)],2)]),e("div",Z," Correct answer: "+g(b.value===!0?"True":"False"),1)]))}},se={class:"space-y-4"},te={class:"p-3 bg-gray-50 rounded border border-gray-200"},re={key:0},ne={class:"list-disc pl-5 space-y-1"},oe={key:1,class:"text-sm text-gray-600"},le={__name:"ShortAnswerResult",props:{question:Object,response:String},setup(l){return(n,b)=>{var f,c;return t(),r("div",se,[e("div",null,[b[0]||(b[0]=e("div",{class:"font-medium text-gray-700 mb-1"},"Your Answer:",-1)),e("div",te,g(l.response||"(No answer provided)"),1)]),((f=l.question.correct_answers)==null?void 0:f.length)>0?(t(),r("div",re,[b[1]||(b[1]=e("div",{class:"font-medium text-gray-700 mb-1"},"Accepted Answers:",-1)),e("ul",ne,[(t(!0),r(x,null,w(l.question.correct_answers,(i,a)=>(t(),r("li",{key:a},g(i),1))),128))])])):v("",!0),(c=l.question.settings)!=null&&c.case_sensitive?(t(),r("div",oe," Note: Answers were checked case-sensitively ")):v("",!0)])}}},ie={class:"space-y-4"},ae={class:"p-4 bg-gray-50 rounded border border-gray-200 whitespace-pre-wrap"},de={class:"text-sm text-gray-600 mt-1"},ce={key:0,class:"ml-2"},ue={key:0,class:"mt-4"},pe={class:"space-y-2"},me={class:"text-sm text-gray-700"},ge={__name:"EssayResult",props:{question:Object,response:[String,Object]},setup(l){const n=l,b=h(()=>{var i;const c=((i=n.response)==null?void 0:i.text)||n.response||"";return c.trim()?c.trim().split(/\s+/).length:0}),f=h(()=>{var c,i;return((c=n.question.settings)==null?void 0:c.min_words)>0||((i=n.question.settings)==null?void 0:i.max_words)>0});return(c,i)=>{var a,d,s;return t(),r("div",ie,[e("div",null,[i[0]||(i[0]=e("div",{class:"font-medium text-gray-700 mb-1"},"Your Answer:",-1)),e("div",ae,g(((a=l.response)==null?void 0:a.text)||l.response||"(No answer provided)"),1),e("div",de,[A(" Word count: "+g(b.value)+" ",1),f.value?(t(),r("span",ce," (Required: "+g(l.question.settings.min_words)+"-"+g(l.question.settings.max_words)+" words) ",1)):v("",!0)])]),((s=(d=l.response)==null?void 0:d.attachments)==null?void 0:s.length)>0?(t(),r("div",ue,[i[1]||(i[1]=e("div",{class:"font-medium text-gray-700 mb-2"},"Attachments:",-1)),e("div",pe,[(t(!0),r(x,null,w(l.response.attachments,(u,_)=>(t(),r("div",{key:_,class:"flex items-center"},[q(R(T),{class:"h-4 w-4 text-gray-500 mr-2"}),e("span",me,g(u.name),1)]))),128))])])):v("",!0)])}}},ye={class:"space-y-4"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e={class:"space-y-2"},fe={class:"space-y-2"},ve={class:"mt-4"},xe={class:"space-y-2"},he={class:"font-medium"},ke={class:"font-medium"},we={__name:"MatchingResult",props:{question:{type:Object,required:!0,default:()=>({options:[],correct_answers:[]})},response:{type:[Array,Object],default:()=>[]}},setup(l){const n=l,b=h(()=>Array.isArray(n.response)?n.response:typeof n.response=="object"&&n.response!==null?Object.entries(n.response).map(([i,a])=>({left:i,right:a})):[]),f=i=>{var s;const a=(s=n.question.options[i])==null?void 0:s.left;if(!a)return"(No match)";const d=b.value.find(u=>u.left===a);return d&&d.right||"(No match)"},c=i=>{var u,_;const a=(u=n.question.options[i])==null?void 0:u.left;if(!a)return!1;const d=(_=n.question.options[i])==null?void 0:_.right;if(!d)return!1;const s=b.value.find(p=>p.left===a);return s?s.right===d:!1};return(i,a)=>(t(),r("div",ye,[a[4]||(a[4]=e("div",{class:"font-medium text-gray-700"},"Your Matches:",-1)),e("div",be,[e("div",_e,[a[0]||(a[0]=e("h3",{class:"text-sm font-medium text-gray-700"},"Items",-1)),(t(!0),r(x,null,w(l.question.options,(d,s)=>(t(),r("div",{key:s,class:$(["p-2 bg-gray-50 rounded border",{"border-green-500":c(s),"border-red-500":!c(s)}])},g(d.left),3))),128))]),e("div",fe,[a[1]||(a[1]=e("h3",{class:"text-sm font-medium text-gray-700"},"Your Matches",-1)),(t(!0),r(x,null,w(l.question.options,(d,s)=>(t(),r("div",{key:s,class:$(["p-2 bg-gray-50 rounded border",{"border-green-500":c(s),"border-red-500":!c(s)}])},g(f(s)),3))),128))])]),e("div",ve,[a[3]||(a[3]=e("div",{class:"font-medium text-gray-700 mb-2"},"Correct Matches:",-1)),e("ul",xe,[(t(!0),r(x,null,w(l.question.options,(d,s)=>(t(),r("li",{key:s,class:"text-sm"},[e("span",he,g(d.left),1),a[2]||(a[2]=A(" → ")),e("span",ke,g(d.right),1)]))),128))])])]))}},$e={class:"space-y-4"},qe={class:"space-y-2 list-decimal pl-5"},Ae={class:"mt-4"},Ce={class:"space-y-2 list-decimal pl-5"},Oe={__name:"OrderingResult",props:{question:Object,response:Array},setup(l){const n=l,b=h(()=>!n.response||!n.question.options?[]:n.response.map(i=>n.question.options[i])),f=h(()=>[...n.question.options||[]].sort((i,a)=>n.question.correct_answers.indexOf(i.id)-n.question.correct_answers.indexOf(a.id))),c=i=>!n.response||!n.question.correct_answers?!1:n.response[i]===n.question.correct_answers[i];return(i,a)=>(t(),r("div",$e,[a[1]||(a[1]=e("div",{class:"font-medium text-gray-700"},"Your Order:",-1)),e("ol",qe,[(t(!0),r(x,null,w(b.value,(d,s)=>(t(),r("li",{key:s,class:$(["p-2 rounded",{"bg-green-50":c(s),"bg-red-50":!c(s)}])},g(d.text),3))),128))]),e("div",Ae,[a[0]||(a[0]=e("div",{class:"font-medium text-gray-700 mb-2"},"Correct Order:",-1)),e("ol",Ce,[(t(!0),r(x,null,w(f.value,(d,s)=>(t(),r("li",{key:s,class:"p-2 bg-gray-50 rounded"},g(d.text),1))),128))])])]))}},je={class:"space-y-4"},Ie={key:0,class:"text-center py-4 text-gray-500"},Re={key:1},Be={key:0,class:"text-red-500 p-4 border border-red-200 rounded mb-4"},Ne={class:"whitespace-pre-wrap"},Me={key:0,class:"ml-1"},Te={key:1,class:"ml-1"},Le={key:1,class:"mt-4"},Se={class:"list-disc pl-5 space-y-1"},Fe={class:"font-medium"},Ee={key:2,class:"text-sm text-gray-600 mt-2"},Ye={__name:"FillInBlankResult",props:{question:{type:Object,required:!0,default:()=>({question:"",correct_answers:[],settings:{}})},response:{type:Array,default:()=>[]}},setup(l){const n=l,b=O(!1),f=O(null),c=h(()=>{const d=[],s=n.question.question||"",u=/(\[blank\])/gi;let _=0,p=0,k;for(;(k=u.exec(s))!==null;)k.index>_&&d.push({text:s.substring(_,k.index),isBlank:!1}),d.push({text:k[0],isBlank:!0,blankIndex:p++}),_=u.lastIndex;return _<s.length&&d.push({text:s.substring(_),isBlank:!1}),d}),i=d=>{var s;return(s=n.response)==null?void 0:s[d]},a=d=>{var _;if(!n.response||!n.question.correct_answers)return!1;const s=n.response[d],u=n.question.correct_answers[d];return s?(_=n.question.settings)!=null&&_.case_sensitive?s===u:s.toLowerCase()===(u==null?void 0:u.toLowerCase()):!1};return(d,s)=>{var u,_;return t(),r("div",je,[b.value?(t(),r("div",Ie," Loading results... ")):(t(),r("div",Re,[f.value?(t(),r("div",Be," Error loading results: "+g(f.value),1)):v("",!0),s[1]||(s[1]=e("div",{class:"font-medium text-gray-700"},"Your Answers:",-1)),e("div",Ne,[(t(!0),r(x,null,w(c.value,(p,k)=>(t(),r(x,{key:k},[p.isBlank?(t(),r("span",{key:0,class:$(["inline-block mx-1 px-2 py-1 border-b-2",{"border-green-500 text-green-700 bg-green-50":a(p.blankIndex),"border-red-500 text-red-700 bg-red-50":!a(p.blankIndex)&&i(p.blankIndex),"border-gray-300":!i(p.blankIndex)}])},[A(g(i(p.blankIndex)||"(blank)")+" ",1),a(p.blankIndex)?(t(),r("span",Me,"✓")):i(p.blankIndex)?(t(),r("span",Te,"✗")):v("",!0)],2)):(t(),r(x,{key:1},[A(g(p.text),1)],64))],64))),128))]),((u=l.question.correct_answers)==null?void 0:u.length)>0?(t(),r("div",Le,[s[0]||(s[0]=e("div",{class:"font-medium text-gray-700 mb-2"},"Correct Answers:",-1)),e("ul",Se,[(t(!0),r(x,null,w(l.question.correct_answers,(p,k)=>(t(),r("li",{key:k},[A(" Blank "+g(k+1)+": ",1),e("span",Fe,g(p),1)]))),128))])])):v("",!0),(_=l.question.settings)!=null&&_.case_sensitive?(t(),r("div",Ee," Note: Answers were checked case-sensitively ")):v("",!0)]))])}}},Ve=j(Ye,[["__scopeId","data-v-a1c1de80"]]),ze={key:0,class:"container mx-auto px-4 py-8"},Pe={class:"bg-white rounded-lg shadow-md p-6 mb-8"},Qe={class:"flex flex-wrap justify-between items-center mb-6"},De={class:"text-lg"},He={class:"ml-2"},Je={class:"text-lg"},Ue={class:"ml-2"},We={class:"text-lg"},Ge={class:"ml-2"},Ke={key:0,class:"text-lg"},Xe={class:"ml-2"},Ze={class:"w-full bg-gray-200 rounded-full h-4 mb-6"},es={class:"space-y-8"},ss={class:"flex justify-between items-start mb-4"},ts={class:"text-xl font-semibold text-gray-800"},rs={class:"text-sm font-normal ml-2"},ns=["innerHTML"],os={key:0},ls={key:1},is={key:2},as={key:3},ds={key:4},cs={key:5},us={key:6},ps={key:7,class:"mt-4 p-4 bg-blue-50 rounded-lg"},ms={class:"text-blue-700"},gs={class:"mt-8 flex justify-between"},ys={__name:"Result",props:{attempt:{type:Object,required:!0},questions:{type:Array,required:!0,default:()=>[]},responses:{type:Array,required:!0,default:()=>[]}},setup(l){const n=l,b=h(()=>{var y;return((y=n.attempt)==null?void 0:y.score)||0}),f=h(()=>n.questions.reduce((y,m)=>y+(m.points||0),0)),c=h(()=>Math.round(b.value/(f.value||1)*100)),i=h(()=>n.responses.filter(y=>y==null?void 0:y.is_correct).length),a=h(()=>{var y;return((y=n.attempt)==null?void 0:y.completion_time)||0}),d=y=>{const m=n.responses.find(o=>(o==null?void 0:o.question_id)===y);return m==null?void 0:m.answer},s=y=>{var o;const m=n.responses.find(C=>(C==null?void 0:C.question_id)===y);return((o=m==null?void 0:m.grading_data)==null?void 0:o.feedback)||(m==null?void 0:m.feedback)},u=y=>{const m=n.responses.find(o=>(o==null?void 0:o.question_id)===y);return(m==null?void 0:m.is_correct)||!1},_=y=>y!=null&&y.question?y.type==="fill_in_blank"?y.question.replace(/\[blank\]/gi,'<span class="blank-space">______</span>'):y.question:"",p=y=>{const m=Math.floor(y/60),o=y%60;return`${m}m ${o}s`},k=()=>{console.log("Downloading results...")};return(y,m)=>(t(),B(I,null,{default:N(()=>[l.attempt?(t(),r("div",ze,[e("div",Pe,[m[5]||(m[5]=e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"Quiz Results",-1)),e("div",Qe,[e("div",De,[m[1]||(m[1]=e("span",{class:"font-semibold"},"Score:",-1)),e("span",He,g(b.value)+" / "+g(f.value),1)]),e("div",Je,[m[2]||(m[2]=e("span",{class:"font-semibold"},"Percentage:",-1)),e("span",Ue,g(c.value)+"%",1)]),e("div",We,[m[3]||(m[3]=e("span",{class:"font-semibold"},"Correct Answers:",-1)),e("span",Ge,g(i.value)+" / "+g(l.questions.length),1)]),a.value?(t(),r("div",Ke,[m[4]||(m[4]=e("span",{class:"font-semibold"},"Time:",-1)),e("span",Xe,g(p(a.value)),1)])):v("",!0)]),e("div",Ze,[e("div",{class:"bg-blue-600 h-4 rounded-full",style:M({width:`${c.value}%`})},null,4)])]),e("div",es,[(t(!0),r(x,null,w(l.questions,(o,C)=>(t(),r("div",{key:o.id,class:$(["bg-white rounded-lg shadow-md p-6",{"border-l-4 border-green-500":u(o.id),"border-l-4 border-red-500":!u(o.id)}])},[e("div",ss,[e("h2",ts,[A(" Question "+g(C+1)+" ",1),e("span",rs," ("+g(o.points)+" point"+g(o.points!==1?"s":"")+") ",1)]),e("span",{class:$(["px-3 py-1 rounded-full text-sm font-medium",{"bg-green-100 text-green-800":u(o.id),"bg-red-100 text-red-800":!u(o.id)}])},g(u(o.id)?"Correct":"Incorrect"),3)]),e("div",{class:"mb-6 prose max-w-none",innerHTML:_(o)},null,8,ns),o.type==="multiple_choice"?(t(),r("div",os,[q(U,{question:o,response:d(o.id)},null,8,["question","response"])])):o.type==="true_false"?(t(),r("div",ls,[q(ee,{question:o,response:d(o.id)},null,8,["question","response"])])):o.type==="short_answer"?(t(),r("div",is,[q(le,{question:o,response:d(o.id)},null,8,["question","response"])])):o.type==="essay"?(t(),r("div",as,[q(ge,{question:o,response:d(o.id)},null,8,["question","response"])])):o.type==="matching"?(t(),r("div",ds,[q(we,{question:o,response:d(o.id)},null,8,["question","response"])])):o.type==="ordering"?(t(),r("div",cs,[q(Oe,{question:o,response:d(o.id)},null,8,["question","response"])])):o.type==="fill_in_blank"?(t(),r("div",us,[q(Ve,{question:o,response:d(o.id)},null,8,["question","response"])])):v("",!0),o.explanation?(t(),r("div",ps,[m[6]||(m[6]=e("h3",{class:"font-medium text-blue-800 mb-2"},"Explanation",-1)),e("p",ms,g(o.explanation),1)])):v("",!0),s(o.id)?(t(),r("div",{key:8,class:$(["mt-4 p-4 rounded-lg",{"bg-green-50 text-green-700":u(o.id),"bg-red-50 text-red-700":!u(o.id)}])},[m[7]||(m[7]=e("h3",{class:"font-medium mb-2"},"Feedback",-1)),e("p",null,g(s(o.id)),1)],2)):v("",!0)],2))),128))]),e("div",gs,[e("button",{onClick:m[0]||(m[0]=o=>y.$router.go(-1)),class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition"}," Back to Quiz "),e("button",{onClick:k,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Download Results ")])])):v("",!0)]),_:1}))}},vs=j(ys,[["__scopeId","data-v-a4faa5c7"]]);export{vs as default};
