import{C as u,r as C}from"./chart-DUfl3Dpl.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as y,z as p,E as v,J as F,d as B,o as k,a as A}from"./app-BbjuU1ab.js";const E={class:"chart-container relative"},R={__name:"DoughnutChart",props:{data:{type:Object,required:!0,validator:s=>Array.isArray(s.labels)&&Array.isArray(s.datasets)},options:{type:Object,default:()=>({responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"right"}}})},aspectRatio:{type:Number,default:1.5}},setup(s){u.register(...C);const e=s,n=y(null);let t=null;const i=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],b=()=>{var l;if(!n.value)return;const o=e.data.datasets.map((a,c)=>({...a,backgroundColor:a.backgroundColor||i.slice(0,e.data.labels.length),borderColor:a.borderColor||"#FFFFFF",borderWidth:a.borderWidth||1,hoverOffset:a.hoverOffset||8})),r={labels:e.data.labels,datasets:o};t&&t.destroy(),t=new u(n.value,{type:"doughnut",data:r,options:{...e.options,aspectRatio:e.aspectRatio,plugins:{...e.options.plugins,legend:{position:"right",labels:{boxWidth:12,padding:20,usePointStyle:!0,pointStyle:"circle"},...(l=e.options.plugins)==null?void 0:l.legend},tooltip:{enabled:!0,callbacks:{label:function(a){const c=a.label||"",d=a.raw||0,h=a.dataset.data.reduce((g,m)=>g+m,0),f=Math.round(d/h*100);return`${c}: ${d} (${f}%)`}}}},animation:{animateScale:!0,animateRotate:!0}}})};return p(()=>e.data,o=>{t&&(t.data.labels=o.labels,t.data.datasets=o.datasets.map((r,l)=>({...r,backgroundColor:r.backgroundColor||i.slice(0,o.labels.length)})),t.update())},{deep:!0}),p(()=>e.options,o=>{t&&(t.options={...t.options,...o},t.update())},{deep:!0}),v(()=>{b()}),F(()=>{t&&t.destroy()}),(o,r)=>(k(),B("div",E,[A("canvas",{ref_key:"chartCanvas",ref:n},null,512)]))}},W=_(R,[["__scopeId","data-v-f1a03264"]]);export{W as D};
