import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as d,d as n,o as i,a as r,F as g,l as h,k as w,h as v,t as o}from"./app-CFKp1s14.js";const A={class:"overflow-x-auto"},k={key:0,class:"text-center py-8 text-gray-500"},b={key:1,class:"min-w-full divide-y divide-gray-200"},P={class:"bg-white divide-y divide-gray-200"},C={class:"px-6 py-4 whitespace-nowrap"},Q={class:"text-sm font-medium text-gray-900"},S={key:0,class:"ml-2 text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full"},T={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},F={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},M={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},B={__name:"QuestionStatsTable",props:{attempts:{type:[Array,Object],required:!0,default:()=>[]},quiz:{type:Object,default:null}},setup(u){const c=u,y=d(()=>Array.isArray(c.attempts)?c.attempts:c.attempts&&Array.isArray(c.attempts.data)?c.attempts.data:[]),x=d(()=>{const s=[];return y.value.forEach(e=>{e.responses&&Array.isArray(e.responses)&&s.push(...e.responses)}),s}),p=d(()=>{const s=x.value;if(!s||s.length===0)return[];const e=new Map;return s.forEach(t=>{const a=t.question;if(!a||!a.id)return;e.has(a.id)||e.set(a.id,{id:a.id,text:a.question||"Unknown Question",type:a.type||"unknown",is_ai:a.is_ai||!1,maxPoints:a.points||1,correctCount:0,totalAttempts:0,totalPoints:0});const l=e.get(a.id);l.totalAttempts+=1,l.totalPoints+=t.points_earned||0,t.is_correct&&(l.correctCount+=1)}),Array.from(e.values()).map(t=>({...t,averagePoints:t.totalAttempts>0?t.totalPoints/t.totalAttempts:0}))}),m=s=>({multiple_choice:"MCQ",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill Blank",matching:"Matching",ordering:"Ordering"})[s]||s,_=(s,e)=>!e||e===0?0:Math.round(s/e*100);return(s,e)=>(i(),n("div",A,[!p.value||p.value.length===0?(i(),n("div",k," No question statistics available ")):(i(),n("table",b,[e[0]||(e[0]=r("thead",{class:"bg-gray-50"},[r("tr",null,[r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Question "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Correct "),r("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avg Points ")])],-1)),r("tbody",P,[(i(!0),n(g,null,h(p.value,(t,a)=>(i(),n("tr",{key:a},[r("td",C,[r("div",Q,[w(o(t.text)+" ",1),t.is_ai?(i(),n("span",S," AI-Generated ")):v("",!0)])]),r("td",T,o(m(t.type)),1),r("td",F,o(t.correctCount)+" / "+o(t.totalAttempts)+" ("+o(_(t.correctCount,t.totalAttempts))+"%) ",1),r("td",M,o(t.averagePoints.toFixed(1))+" / "+o(t.maxPoints),1)]))),128))])]))]))}},O=f(B,[["__scopeId","data-v-d8c436d5"]]);export{O as Q};
