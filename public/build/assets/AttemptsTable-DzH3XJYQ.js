import{d as n,o as r,a as e,h as b,F as h,l as T,k as y,t as c,c as w,w as F,j as v,S as j,n as L,i as k,f as Q,e as A,b as V,A as P,s as z,E as U}from"./app-Do1sSIaC.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as E}from"./Pagination-g71SnpNx.js";import{r as q,a as I}from"./SummaryCard-DIzQqgh9.js";function O(i,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const G={class:"overflow-x-auto"},H={key:0,class:"text-center py-8 text-gray-500"},R={class:"min-w-full divide-y divide-gray-200"},Z={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"text-sm font-medium text-gray-900"},W={key:0,class:"ml-2 text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ee={key:1},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap"},ae={__name:"QuestionStatsTable",props:{stats:{type:Array,required:!0,default:()=>[],validator:i=>Array.isArray(i)&&i.every(u=>typeof u=="object"&&u!==null)},quiz:{type:Object,default:null},analysis:Object},setup(i){const u=o=>({multiple_choice:"MCQ",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill Blank",matching:"Matching",ordering:"Ordering"})[o]||o,m=o=>{switch(o){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=(o,d)=>!d||d===0?0:Math.round(o/d*100),p=(o,d)=>o==null?"N/A":`${o.toFixed(1)} / ${d||"N/A"}`;return(o,d)=>(r(),n("div",G,[!i.stats||i.stats.length===0?(r(),n("div",H," No question statistics available ")):b("",!0),e("table",R,[d[1]||(d[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Question "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Source "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Correct "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avg Points "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Difficulty ")])],-1)),e("tbody",Z,[(r(!0),n(h,null,T(i.stats,(l,$)=>(r(),n("tr",{key:$},[e("td",J,[e("div",K,[y(c(l.question)+" ",1),l.is_ai===1?(r(),n("span",W," AI-Generated ")):b("",!0)])]),e("td",X,c(u(l.type)),1),e("td",Y,[l.source.type==="direct"?(r(),n(h,{key:0},[y(" Direct Question ")],64)):l.source.type==="pool"?(r(),n(h,{key:1},[d[0]||(d[0]=y(" From Pool: ")),i.quiz?(r(),w(v(j),{key:0,href:o.route("examiner.question-pools.show",{question_pool:l.source.pool_id}),class:"text-blue-600 hover:text-blue-800"},{default:F(()=>[y(c(l.source.pool_name),1)]),_:2},1032,["href"])):(r(),n("span",ee,c(l.source.pool_name),1))],64)):(r(),n(h,{key:2},[y(" Unknown Source ")],64))]),e("td",te,c(l.correct_responses)+" / "+c(l.total_responses)+" ("+c(f(l.correct_responses,l.total_responses))+"%) ",1),e("td",se,c(p(l.average_points,l.points)),1),e("td",re,[e("span",{class:L(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",m(l.difficulty)])},c(l.difficulty),3)])]))),128))])])]))}},Me=M(ae,[["__scopeId","data-v-95ca7f22"]]),oe={class:"overflow-x-auto"},le={class:"flex justify-between items-center mb-4"},ie={class:"relative max-w-xs"},ne={class:"relative"},ce={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},de={class:"flex space-x-2"},ue={class:"min-w-full divide-y divide-gray-200"},pe={class:"bg-white divide-y divide-gray-200"},xe={class:"px-6 py-4 whitespace-nowrap"},ye={class:"flex items-center"},me={class:"flex-shrink-0 h-10 w-10"},fe={class:"flex items-center justify-center w-10 h-10 bg-blue-500 rounded-full text-white font-semibold uppercase"},ge={class:"ml-4"},_e={class:"text-sm font-medium text-gray-900"},he={class:"text-sm text-gray-500"},we={class:"px-6 py-4 whitespace-nowrap"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},be={class:"flex items-center"},ke={class:"w-16 bg-gray-200 rounded-full h-2.5 mr-2"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Se={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ce={key:1,class:"text-gray-400"},De=["onClick"],Ne={key:0,class:"text-center py-8 text-gray-500"},ze={__name:"AttemptsTable",props:{attempts:{type:Object,required:!0,validator:i=>Array.isArray(i==null?void 0:i.data)&&i.data.every(u=>"id"in u&&"user"in u)},quizId:{type:[Number,String],required:!0}},setup(i){const u=i,m=k(""),f=k("all"),p=k("completed_at"),o=k("desc"),d=Q(()=>{var s;if(!((s=u.attempts)!=null&&s.data))return[];let a=[...u.attempts.data];if(m.value){const t=m.value.toLowerCase();a=a.filter(x=>{var S,C,D,N;const g=((C=(S=x.user)==null?void 0:S.name)==null?void 0:C.toLowerCase())||"",_=((N=(D=x.user)==null?void 0:D.email)==null?void 0:N.toLowerCase())||"";return g.includes(t)||_.includes(t)})}return f.value!=="all"&&(a=a.filter(t=>f.value==="passed"?t.is_passed:!t.is_passed)),a.sort((t,x)=>{let g=t[p.value],_=x[p.value];return p.value==="completed_at"&&(g=new Date(g),_=new Date(_)),g<_?o.value==="asc"?-1:1:g>_?o.value==="asc"?1:-1:0}),a}),l=a=>{if(!a)return"N/A";const s=Math.floor(a/60),t=a%60;return`${s}m ${t}s`},$=a=>{if(!a)return"N/A";const s=new Date(a);return s.toLocaleDateString()+" "+s.toLocaleTimeString()},B=a=>{try{window.open(route("examiner.certificates.download",{quiz:a.quiz_id,attempt:a.id}),"_blank")}catch(s){console.error("Failed to generate certificate URL:",s)}};return(a,s)=>(r(),n("div",oe,[e("div",le,[e("div",ie,[s[4]||(s[4]=e("label",{for:"search",class:"sr-only"},"Search",-1)),e("div",ne,[e("div",ce,[V(v(O),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),A(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),type:"text",name:"search",id:"search",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search attempts..."},null,512),[[P,m.value]])])]),e("div",de,[A(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>f.value=t),class:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},s[5]||(s[5]=[e("option",{value:"all"},"All Statuses",-1),e("option",{value:"passed"},"Passed",-1),e("option",{value:"failed"},"Failed",-1)]),512),[[z,f.value]]),A(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>p.value=t),class:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},s[6]||(s[6]=[e("option",{value:"completed_at"},"Date",-1),e("option",{value:"percentage"},"Score",-1),e("option",{value:"time_spent"},"Duration",-1)]),512),[[z,p.value]]),e("button",{onClick:s[3]||(s[3]=t=>o.value=o.value==="asc"?"desc":"asc"),class:"p-2 rounded-md border border-gray-300 hover:bg-gray-50"},[o.value==="asc"?(r(),w(v(q),{key:0,class:"h-5 w-5 text-gray-400"})):(r(),w(v(I),{key:1,class:"h-5 w-5 text-gray-400"}))])])]),e("table",ue,[s[8]||(s[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Score "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Time Spent "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",pe,[(r(!0),n(h,null,T(d.value,t=>(r(),n("tr",{key:t.id},[e("td",xe,[e("div",ye,[e("div",me,[e("div",fe,c(a.$page.props.auth.user.name.split(" ").map(x=>x[0]).join("").substring(0,2)),1)]),e("div",ge,[e("div",_e,c(t.user.name),1),e("div",he,c(t.user.email),1)])])]),e("td",we,[e("span",{class:L(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.is_passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},c(t.is_passed?"Passed":"Failed"),3)]),e("td",ve,[e("div",be,[e("div",ke,[e("div",{class:"bg-blue-600 h-2.5 rounded-full",style:U(`width: ${t.percentage}%`)},null,4)]),y(" "+c(Math.round(t.percentage))+"% ",1)])]),e("td",$e,c(l(t.time_spent)),1),e("td",Ae,c($(t.completed_at)),1),e("td",Se,[t.quiz_id?(r(),w(v(j),{key:0,href:a.route("examiner.quiz.attempts.show",{quiz:t.quiz_id,attempt:t.id}),class:"text-blue-600 hover:text-blue-900 mr-3"},{default:F(()=>s[7]||(s[7]=[y(" Details ")])),_:2,__:[7]},1032,["href"])):(r(),n("span",Ce,"N/A")),t.is_passed&&t.quiz_id?(r(),n("button",{key:2,onClick:x=>B(t),class:"text-green-600 hover:text-green-900"}," Certificate ",8,De)):b("",!0)])]))),128))])]),d.value.length===0?(r(),n("div",Ne," No attempts match your search criteria ")):b("",!0),i.attempts.last_page>1?(r(),w(E,{key:1,links:i.attempts.links,class:"mt-4"},null,8,["links"])):b("",!0)]))}},Be=M(ze,[["__scopeId","data-v-35dacd03"]]);export{Be as A,Me as Q};
