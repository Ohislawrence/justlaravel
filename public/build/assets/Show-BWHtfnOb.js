import{A as H}from"./AppLayout-DrgNT64Z.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as A,f as y,E as j,d as a,o as i,a as t,t as n,h as v,F as w,l as k,G as N,n as _,k as T,c as I,w as D,b as L}from"./app-DvBnAnlC.js";/* empty css                                                                  */const E={class:"bg-white rounded-lg shadow overflow-hidden"},Q={class:"p-6"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},U={class:"bg-blue-50 p-4 rounded-lg"},B={class:"text-2xl font-bold text-blue-900"},Y={class:"bg-green-50 p-4 rounded-lg"},J={class:"text-2xl font-bold text-green-900"},R={class:"bg-purple-50 p-4 rounded-lg"},G={class:"text-2xl font-bold text-purple-900"},K={class:"overflow-x-auto"},W={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap"},rt={class:"flex items-center"},nt={class:"w-full bg-gray-200 rounded-full h-2.5"},it={class:"ml-2 text-xs font-medium text-gray-700"},at={key:0},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ut={class:"px-6 py-4 whitespace-nowrap"},mt={class:"flex items-center"},pt={class:"w-full bg-gray-200 rounded-full h-2.5"},gt={class:"ml-2 text-xs font-medium text-gray-700"},xt={__name:"QuizPoolAnalysis",props:{quiz:{type:Object,required:!0},questionpools:{type:Object,default:()=>({})},attempts:{type:Object,required:!0},userId:{type:Number,required:!0}},setup(m){const g=m,x=A([]),l=A({name:"Others",questionCount:0,correctCount:0,score:0,maxScore:0,percentage:0});A(!0);const c=A({}),b=A([]),h=A([]),M=A(""),$=y(()=>x.value.reduce((o,s)=>o+s.questionCount,0)+l.value.questionCount),S=y(()=>x.value.reduce((o,s)=>o+s.correctCount,0)+l.value.correctCount),q=y(()=>{const o=x.value.reduce((e,r)=>e+r.score,0)+l.value.score,s=x.value.reduce((e,r)=>e+r.maxScore,0)+l.value.maxScore;return s>0?(o/s*100).toFixed(1):0}),C=o=>o>=80?"bg-green-600":o>=60?"bg-yellow-500":"bg-red-600",f=()=>{x.value=[],l.value={name:"Others",questionCount:0,correctCount:0,score:0,maxScore:0,percentage:0},c.value={},b.value=[],h.value=g.attempts.responses||[];const o={},s=Array.isArray(g.questionpools)?g.questionpools:g.questionpools.data||[];s.length>0&&(M.value=JSON.stringify({id:s[0].id,name:s[0].name,hasQuestions:!!s[0].questions,questionsCount:s[0].questions?s[0].questions.length:0,questionsSample:s[0].questions?s[0].questions.slice(0,2):null})),s.forEach(e=>{const r=[];e.questions&&Array.isArray(e.questions)&&e.questions.forEach(u=>{u.id&&r.push(u.id)}),o[e.id]={...e,responses:[],maxScore:0,questionIds:r},c.value[e.id]=r}),h.value.forEach(e=>{const r=e.question;if(!r||!r.id)return;let u=!1;for(const d in o)if(o[d].questionIds.includes(r.id)){o[d].responses.push(e),o[d].maxScore+=r.points||1,u=!0;break}u||(b.value.push(r.id),l.value.maxScore+=r.points||1,o.others||(o.others={id:"others",name:"Others",responses:[],maxScore:0,questionIds:[]}),o.others.responses.push(e),o.others.maxScore+=r.points||1)});for(const e in o){const r=o[e];if(e==="others"){let u=0,d=0;r.responses.forEach(p=>{p.is_correct&&d++,u+=p.points_earned||0}),l.value.questionCount=r.responses.length,l.value.correctCount=d,l.value.score=u,l.value.percentage=l.value.maxScore>0?u/l.value.maxScore*100:0}else{const u=r.responses,d=r.maxScore;let p=0,V=0;u.forEach(F=>{F.is_correct&&V++,p+=F.points_earned||0});const P=d>0?p/d*100:0;x.value.push({id:r.id,name:r.name,questionCount:u.length,correctCount:V,score:p,maxScore:d,percentage:P})}}};return j(()=>{f()}),(o,s)=>(i(),a("div",E,[s[5]||(s[5]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Quiz Pool Performance Analysis"),t("p",{class:"text-sm text-gray-500 mt-1"},"Performance breakdown by question pool")],-1)),t("div",Q,[t("div",z,[t("div",U,[s[0]||(s[0]=t("p",{class:"text-sm font-medium text-blue-800"},"Total Questions",-1)),t("p",B,n($.value),1)]),t("div",Y,[s[1]||(s[1]=t("p",{class:"text-sm font-medium text-green-800"},"Correct Answers",-1)),t("p",J,n(S.value),1)]),t("div",R,[s[2]||(s[2]=t("p",{class:"text-sm font-medium text-purple-800"},"Overall Score",-1)),t("p",G,n(q.value)+"%",1)])]),t("div",K,[t("table",W,[s[4]||(s[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Question Pool "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Questions "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Correct "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Score "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Performance ")])],-1)),t("tbody",X,[(i(!0),a(w,null,k(x.value,e=>(i(),a("tr",{key:e.id},[t("td",Z,n(e.name),1),t("td",tt,n(e.questionCount),1),t("td",et,n(e.correctCount)+" / "+n(e.questionCount),1),t("td",st,n(e.score)+" / "+n(e.maxScore),1),t("td",ot,[t("div",rt,[t("div",nt,[t("div",{class:_(["h-2.5 rounded-full",C(e.percentage)]),style:N(`width: ${Math.min(e.percentage,100)}%`)},null,6)]),t("span",it,n(e.percentage.toFixed(1))+"% ",1)])])]))),128)),l.value.questionCount>0?(i(),a("tr",at,[s[3]||(s[3]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Others ",-1)),t("td",lt,n(l.value.questionCount),1),t("td",dt,n(l.value.correctCount)+" / "+n(l.value.questionCount),1),t("td",ct,n(l.value.score)+" / "+n(l.value.maxScore),1),t("td",ut,[t("div",mt,[t("div",pt,[t("div",{class:_(["h-2.5 rounded-full",C(l.value.percentage)]),style:N(`width: ${Math.min(l.value.percentage,100)}%`)},null,6)]),t("span",gt,n(l.value.percentage.toFixed(1))+"% ",1)])])])):v("",!0)])])])])]))}},_t={class:"bg-white rounded-lg shadow overflow-hidden"},yt={class:"p-6"},bt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ft={class:"bg-red-50 p-4 rounded-lg"},ht={class:"text-2xl font-bold text-red-900"},vt={class:"bg-yellow-50 p-4 rounded-lg"},wt={class:"text-2xl font-bold text-yellow-900"},kt={class:"bg-blue-50 p-4 rounded-lg"},$t={class:"text-2xl font-bold text-blue-900"},qt={key:0,class:"mb-6"},Ct={class:"space-y-3"},At={class:"flex-shrink-0"},Mt={class:"text-xs font-medium text-white"},St={class:"ml-3"},Tt={class:"text-sm font-medium text-gray-900"},Lt={class:"text-sm text-gray-500"},Vt={class:"text-xs text-gray-400 mt-1"},Ft={key:1,class:"mb-6"},Nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ot={class:"flex items-center justify-between"},Pt={class:"text-sm font-medium text-gray-900"},Ht={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},jt={key:2,class:"text-center py-8 text-gray-500"},It={__name:"ProctoringTable",props:{attempts:{type:[Array,Object],required:!0,default:()=>[]}},setup(m){const g=m,x=y(()=>Array.isArray(g.attempts)?g.attempts:g.attempts&&Array.isArray(g.attempts.data)?g.attempts.data:[]);y(()=>x.value.filter(s=>s.proctoring_data).length),y(()=>{const s=x.value.find(e=>e.proctoring_data);return s?s.proctoring_data.substring(0,100)+"...":"None"});const l=y(()=>{const s=[];return x.value.forEach(e=>{if(e.proctoring_data)try{const r=JSON.parse(e.proctoring_data);Array.isArray(r)&&r.forEach(u=>{var d;s.push({...u,attempt_id:e.id,user_id:e.user_id,user_name:((d=e.user)==null?void 0:d.name)||"Unknown User",attempt_number:e.attempt_number,score:e.score,percentage:e.percentage})})}catch(r){console.error("Failed to parse proctoring_data:",r,e.proctoring_data)}}),s}),c=y(()=>l.value),b=y(()=>{const s={};return c.value.forEach(e=>{s[e.type]||(s[e.type]=0),s[e.type]++}),Object.entries(s).map(([e,r])=>({type:e,count:r})).sort((e,r)=>r.count-e.count)}),h=y(()=>c.value.length),M=y(()=>c.value.filter(s=>s.type==="tab_switch").length),$=y(()=>c.value.filter(s=>s.type!=="tab_switch").length),S=y(()=>[...c.value].sort((s,e)=>new Date(e.timestamp)-new Date(s.timestamp))),q=s=>({tab_switch:"Tab Switch",face_not_visible:"Face Not Visible",multiple_faces:"Multiple Faces Detected",voice_detected:"Voice Detected",mobile_phone:"Mobile Phone Detected",person_left:"Person Left Camera View",paste_attempt:"Paste Attempt",copy_attempt:"Copy Attempt",forbidden_key_combination:"Forbidden Key Combination"})[s]||s.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()),C=s=>({tab_switch:"bg-red-500",face_not_visible:"bg-yellow-500",multiple_faces:"bg-orange-500",voice_detected:"bg-purple-500",mobile_phone:"bg-blue-500",person_left:"bg-indigo-500",paste_attempt:"bg-pink-500",copy_attempt:"bg-teal-500",forbidden_key_combination:"bg-cyan-500"})[s]||"bg-gray-500",f=s=>({tab_switch:"TS",face_not_visible:"FNV",multiple_faces:"MF",voice_detected:"VD",mobile_phone:"MP",person_left:"PL",paste_attempt:"PA",copy_attempt:"CA",forbidden_key_combination:"FK"})[s]||s.substring(0,2).toUpperCase(),o=s=>{if(!s)return"Unknown time";try{return new Date(s).toLocaleString()}catch{return s}};return A(!0),(s,e)=>(i(),a("div",_t,[e[5]||(e[5]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Proctoring Violations"),t("p",{class:"text-sm text-gray-500 mt-1"},"Monitoring of exam integrity violations")],-1)),t("div",yt,[t("div",bt,[t("div",ft,[e[0]||(e[0]=t("p",{class:"text-sm font-medium text-red-800"},"Total Violations",-1)),t("p",ht,n(h.value),1)]),t("div",vt,[e[1]||(e[1]=t("p",{class:"text-sm font-medium text-yellow-800"},"Tab Switch Violations",-1)),t("p",wt,n(M.value),1)]),t("div",kt,[e[2]||(e[2]=t("p",{class:"text-sm font-medium text-blue-800"},"Other Violations",-1)),t("p",$t,n($.value),1)])]),c.value.length>0?(i(),a("div",qt,[e[3]||(e[3]=t("h4",{class:"text-md font-medium mb-3"},"Violation Timeline",-1)),t("div",Ct,[(i(!0),a(w,null,k(S.value,(r,u)=>(i(),a("div",{key:u,class:"flex items-start p-3 border border-gray-200 rounded-lg"},[t("div",At,[t("span",{class:_(["inline-flex items-center justify-center h-8 w-8 rounded-full",C(r.type)])},[t("span",Mt,n(f(r.type)),1)],2)]),t("div",St,[t("p",Tt,n(q(r.type)),1),t("p",Lt,n(o(r.timestamp)),1),t("p",Vt," Attempt #"+n(r.attempt_number)+" by "+n(r.user_name),1)])]))),128))])])):v("",!0),b.value.length>0?(i(),a("div",Ft,[e[4]||(e[4]=t("h4",{class:"text-md font-medium mb-3"},"Violation Types",-1)),t("div",Nt,[(i(!0),a(w,null,k(b.value,(r,u)=>(i(),a("div",{key:u,class:"p-3 border border-gray-200 rounded-lg"},[t("div",Ot,[t("span",Pt,n(q(r.type)),1),t("span",Ht,n(r.count),1)])]))),128))])])):v("",!0),c.value.length===0?(i(),a("div",jt," No proctoring violations detected ")):v("",!0)])]))}},Dt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Et={class:"p-6 bg-white border-b border-gray-200"},Qt={key:0,class:"space-y-6"},zt={class:"flex justify-between items-start mb-3"},Ut={class:"flex-1"},Bt={class:"font-medium"},Yt=["innerHTML"],Jt={class:"flex flex-wrap gap-2 text-sm text-gray-500 mt-1"},Rt={class:"bg-gray-100 px-2 py-1 rounded"},Gt={class:"bg-green-100 px-2 py-1 rounded"},Kt={key:0,class:"bg-blue-100 text-blue-700 px-2 py-1 rounded"},Wt={class:"mt-4"},Xt={key:0,class:"space-y-2"},Zt={class:"w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 text-xs font-medium"},te=["innerHTML"],ee={key:0,class:"ml-auto text-green-600 font-medium"},se={key:1,class:"space-y-2"},oe={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},re={key:2,class:"space-y-2"},ne={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},ie={class:"list-disc pl-5 space-y-1"},ae={key:3,class:"space-y-2"},le={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},de=["innerHTML"],ce={key:4,class:"space-y-2"},ue={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},pe=["innerHTML"],ge=["innerHTML"],xe={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-2"},_e=["innerHTML"],ye=["innerHTML"],be={key:1},fe={key:5,class:"space-y-2"},he={class:"p-2 bg-green-100 text-green-800 rounded border border-green-200"},ve={class:"list-decimal pl-5 space-y-1"},we=["innerHTML"],ke={key:0,class:"list-decimal pl-5 space-y-1"},$e=["innerHTML"],qe={key:1},Ce={key:6,class:"space-y-2"},Ae={class:"p-2 rounded border bg-gray-50"},Me={key:0,class:"whitespace-pre-wrap"},Se={key:1,class:"text-gray-500"},Te={key:0,class:"mt-3 p-3 bg-blue-50 rounded border border-blue-200"},Le={class:"mt-1 text-blue-800"},Ve={class:"mt-4 pt-3 border-t border-gray-200 flex justify-between items-center"},Fe={class:"text-sm text-gray-600"},Ne=["onClick"],Oe={key:0,class:"mt-3 p-3 bg-blue-50 rounded border border-blue-200"},Pe={class:"mt-1 text-blue-800"},He={key:1,class:"mt-3 p-3 bg-gray-50 rounded border border-gray-200"},je={class:"mt-1 text-gray-800"},Ie={key:1,class:"text-center py-8 text-gray-500"},De={__name:"QuestionAttempts",props:{responses:{type:Array,default:()=>[]}},setup(m){const g=A({}),x=o=>{g.value={...g.value,[o]:!g.value[o]}},l=o=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[o]||o,c=o=>{if(o<60)return`${o} sec`;{const s=Math.floor(o/60),e=o%60;return e===0?`${s} min`:`${s} min ${e} sec`}},b=(o,s)=>{if(!o||!s)return o;const e=[...s];return o.replace(/\[blank\]/g,()=>`[${e.shift()||"answer"}]`)},h=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return o}return o},M=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return{explanation:o}}return o||{}},$=(o,s)=>o.correct_answers&&o.correct_answers.includes(s),S=o=>o.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50",q=o=>o.is_correct?"bg-green-100 text-green-700 px-2 py-1 rounded":"bg-red-100 text-red-700 px-2 py-1 rounded",C=(o,s)=>{const e=h(o.answer),r=$(o.question,s),u=Array.isArray(e)?e.includes(s):e===s;return r?"bg-green-100 border-green-300 text-green-800":u&&!r?"bg-red-100 border-red-300 text-red-800":"bg-gray-50 border-gray-200"},f=o=>o.is_correct?"bg-green-100 border-green-300 text-green-800":"bg-red-100 border-red-300 text-red-800";return(o,s)=>(i(),a("div",Dt,[t("div",Et,[s[19]||(s[19]=t("h3",{class:"text-lg font-medium mb-4"},"Question Review",-1)),m.responses&&m.responses.length>0?(i(),a("div",Qt,[(i(!0),a(w,null,k(m.responses,(e,r)=>{var u;return i(),a("div",{key:e.id,class:_(["border rounded-lg p-4 transition-all duration-200",S(e)])},[t("div",zt,[t("div",Ut,[t("h4",Bt,[T(n(r+1)+". ",1),t("span",{innerHTML:e.question.question},null,8,Yt)]),t("div",Jt,[t("span",Rt,n(l(e.question.type)),1),t("span",Gt,n(e.question.points)+" points ",1),t("span",{class:_(q(e))},n(e.is_correct?"✓ Correct":"✗ Incorrect"),3),e.time_spent>0?(i(),a("span",Kt," ⏱️ "+n(c(e.time_spent)),1)):v("",!0)])])]),t("div",Wt,[e.question.type==="multiple_choice"?(i(),a("div",Xt,[s[0]||(s[0]=t("p",{class:"font-medium text-sm text-gray-700 mb-2"},"Options:",-1)),(i(!0),a(w,null,k(e.question.options,(d,p)=>(i(),a("div",{key:p,class:_(["p-2 rounded border flex items-center",C(e,d)])},[t("span",Zt,n(String.fromCharCode(65+p)),1),t("span",{innerHTML:d},null,8,te),$(e.question,d)?(i(),a("span",ee," ✓ Correct ")):v("",!0)],2))),128))])):e.question.type==="true_false"?(i(),a("div",se,[s[1]||(s[1]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Answer:",-1)),t("div",oe,n(e.question.correct_answers&&e.question.correct_answers[0]==="true"?"True":"False"),1),s[2]||(s[2]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Answer:",-1)),t("div",{class:_(["p-2 rounded border",f(e)])},n(e.answer==="true"?"True":"False"),3)])):e.question.type==="short_answer"?(i(),a("div",re,[s[3]||(s[3]=t("p",{class:"font-medium text-sm text-gray-700"},"Accepted Answers:",-1)),t("div",ne,[t("ul",ie,[(i(!0),a(w,null,k(e.question.correct_answers,(d,p)=>(i(),a("li",{key:p},n(d),1))),128))])]),s[4]||(s[4]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Answer:",-1)),t("div",{class:_(["p-2 rounded border",f(e)])},n(e.answer||"No answer provided"),3)])):e.question.type==="fill_in_blank"?(i(),a("div",ae,[s[5]||(s[5]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Text:",-1)),t("div",le,[t("div",{class:"whitespace-pre-line",innerHTML:b(e.question.question,e.question.correct_answers)},null,8,de)]),s[6]||(s[6]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Answer:",-1)),t("div",{class:_(["p-2 rounded border",f(e)])},n(Array.isArray(e.answer)?e.answer.join(", "):e.answer||"No answer provided"),3)])):e.question.type==="matching"?(i(),a("div",ce,[s[9]||(s[9]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Matches:",-1)),t("div",ue,[t("div",me,[(i(!0),a(w,null,k(e.question.options,(d,p)=>(i(),a("div",{key:p,class:"flex items-center"},[t("span",{class:"font-medium",innerHTML:d.left},null,8,pe),s[7]||(s[7]=t("span",{class:"mx-2"},"→",-1)),t("span",{class:"font-medium",innerHTML:d.right},null,8,ge)]))),128))])]),s[10]||(s[10]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Matches:",-1)),t("div",{class:_(["p-2 rounded border",f(e)])},[e.answer?(i(),a("div",xe,[(i(!0),a(w,null,k(h(e.answer),(d,p)=>(i(),a("div",{key:p,class:"flex items-center"},[t("span",{class:"font-medium",innerHTML:d.left},null,8,_e),s[8]||(s[8]=t("span",{class:"mx-2"},"→",-1)),t("span",{class:"font-medium",innerHTML:d.right||"No match"},null,8,ye)]))),128))])):(i(),a("div",be,"No answer provided"))],2)])):e.question.type==="ordering"?(i(),a("div",fe,[s[11]||(s[11]=t("p",{class:"font-medium text-sm text-gray-700"},"Correct Order:",-1)),t("div",he,[t("ol",ve,[(i(!0),a(w,null,k(e.question.correct_answers,(d,p)=>(i(),a("li",{key:p},[t("span",{innerHTML:d},null,8,we)]))),128))])]),s[12]||(s[12]=t("p",{class:"font-medium text-sm text-gray-700 mt-3"},"Your Order:",-1)),t("div",{class:_(["p-2 rounded border",f(e)])},[e.answer?(i(),a("ol",ke,[(i(!0),a(w,null,k(h(e.answer),(d,p)=>(i(),a("li",{key:p},[t("span",{innerHTML:d},null,8,$e)]))),128))])):(i(),a("div",qe,"No answer provided"))],2)])):e.question.type==="essay"?(i(),a("div",Ce,[s[14]||(s[14]=t("p",{class:"font-medium text-sm text-gray-700"},"Your Answer:",-1)),t("div",Ae,[e.answer?(i(),a("div",Me,n(e.answer),1)):(i(),a("div",Se,"No answer provided"))]),e.feedback?(i(),a("div",Te,[s[13]||(s[13]=t("p",{class:"font-medium text-sm text-blue-700"},"Instructor Feedback:",-1)),t("p",Le,n(e.feedback),1)])):v("",!0)])):v("",!0)]),t("div",Ve,[t("div",Fe,[s[15]||(s[15]=T(" Points earned: ")),t("span",{class:_(e.is_correct?"text-green-600 font-medium":"text-red-600")},n(e.points_earned||0)+" / "+n(e.question.points),3)]),e.feedback&&e.question.type!=="essay"?(i(),a("div",{key:0,class:"text-sm text-blue-600 cursor-pointer hover:underline",onClick:d=>x(e.id)},n(g.value[e.id]?"Hide Feedback":"View Feedback"),9,Ne)):v("",!0)]),g.value[e.id]&&e.feedback&&e.question.type!=="essay"?(i(),a("div",Oe,[s[16]||(s[16]=t("p",{class:"font-medium text-sm text-blue-700"},"Instructor Feedback:",-1)),t("p",Pe,n(e.feedback),1)])):v("",!0),e.grading_data&&typeof e.grading_data=="string"?(i(),a("div",He,[s[17]||(s[17]=t("p",{class:"font-medium text-sm text-gray-700"},"Explanation:",-1)),t("p",je,n((u=M(e.grading_data))==null?void 0:u.explanation),1)])):v("",!0)],2)}),128))])):(i(),a("div",Ie,s[18]||(s[18]=[t("p",null,"No questions available for review.",-1)])))])]))}},Ee=O(De,[["__scopeId","data-v-0a2ab497"]]),Qe={class:"py-6"},ze={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ue={class:"font-semibold text-xl text-gray-800 leading-tight mb-3"},Be={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},Ye={class:"flex-1"},Je={class:"space-y-1.5"},Re={class:"text-sm"},Ge={class:"ml-1 text-gray-900"},Ke={class:"text-gray-500 ml-2"},We={class:"text-sm text-gray-600 flex items-center"},Xe={class:"font-medium ml-1"},Ze={class:"flex flex-col items-start lg:items-end space-y-2"},ts={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},es=["d"],ss={class:"flex items-center text-sm text-gray-600"},os={class:"font-medium ml-1"},rs={class:"mb-6"},ns={class:"mb-6"},is={class:"mb-6"},as={__name:"Show",props:{quiz:{type:Object,default:()=>({})},attempt:{type:Object,default:()=>({})},questions:{type:Array,default:()=>[]},questionpools:Object,violations:Array},setup(m){const g=l=>{if(!l)return"N/A";try{return new Date(l).toLocaleString()}catch{return"Invalid Date"}},x=l=>{if(!l)return"N/A";const c=Math.floor(l/60),b=l%60;return`${c}m ${b}s`};return(l,c)=>{var b;return i(),I(H,{title:`Attempt #${((b=m.attempt)==null?void 0:b.attempt_number)||"Unknown"}`},{default:D(()=>{var h,M,$,S,q,C,f,o,s,e,r,u,d;return[t("div",Qe,[t("div",ze,[t("h2",Ue,n(((M=(h=m.attempt)==null?void 0:h.user)==null?void 0:M.name)||"Unknown User")+"'s attempt #"+n((($=m.attempt)==null?void 0:$.attempt_number)||"Unknown"),1),t("div",{class:_(["bg-white shadow-sm rounded-xl border-2 p-6 mb-6 transition-shadow duration-200",(S=m.attempt)!=null&&S.is_passed?"border-green-500 shadow-green-50/30":"border-red-500 shadow-red-50/30"])},[t("div",Be,[t("div",Ye,[t("div",Je,[t("p",Re,[c[0]||(c[0]=t("span",{class:"font-semibold text-gray-900"},"Examinee:",-1)),t("span",Ge,n(((C=(q=m.attempt)==null?void 0:q.user)==null?void 0:C.name)||"Unknown User"),1),t("span",Ke,"("+n(((o=(f=m.attempt)==null?void 0:f.user)==null?void 0:o.email)||"No email")+")",1)]),t("p",We,[c[1]||(c[1]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c[2]||(c[2]=T(" Completed: ")),t("span",Xe,n(g((s=m.attempt)==null?void 0:s.completed_at)),1)])])]),t("div",Ze,[t("div",{class:_(["inline-flex items-center px-4 py-2 rounded-lg text-sm font-bold shadow-sm",(e=m.attempt)!=null&&e.is_passed?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"])},[(i(),a("svg",ts,[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:(r=m.attempt)!=null&&r.is_passed?"M5 13l4 4L19 7":"M6 18L18 6M6 6l12 12"},null,8,es)])),T(" "+n(((u=m.attempt)==null?void 0:u.percentage)||0)+"% ",1)],2),t("div",ss,[c[3]||(c[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c[4]||(c[4]=T(" Time Spent: ")),t("span",os,n(x((d=m.attempt)==null?void 0:d.time_spent)),1)])])])],2),t("div",rs,[L(xt,{quiz:m.quiz,questionpools:m.questionpools,attempts:m.attempt,userId:m.attempt.user.id},null,8,["quiz","questionpools","attempts","userId"])]),t("div",ns,[L(It,{attempts:m.violations},null,8,["attempts"])]),t("div",is,[L(Ee,{responses:m.attempt.responses},null,8,["responses"])])])])]}),_:1},8,["title"])}}},ms=O(as,[["__scopeId","data-v-b62d5a9d"]]);export{ms as default};
