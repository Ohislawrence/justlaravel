import{K as P,x as U,i as h,f as B,L as N,c as T,o as d,w as l,d as u,h as x,a as t,b as o,j as r,t as p,g as F,F as A,l as E,k as c,n as k,W as V}from"./app-Do1sSIaC.js";import{A as I}from"./AppLayout-DUw_ZWTf.js";import{_ as y}from"./InputError-BalbFUZ-.js";import{_ as g}from"./InputLabel-CoAPtlZS.js";import{_ as L}from"./PrimaryButton-Ch7jOFNf.js";import{_ as q}from"./TextInput-CbC0PeBd.js";import{_ as W}from"./Textarea-uqrTs8Yb.js";import{_ as $}from"./Checkbox-DtNwaiTW.js";import{_ as O}from"./SelectInput-M835gHNO.js";import{_ as C,a as M}from"./DangerButton-D4VEbzGB.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */import"./Modal-ggGwXBJY.js";const K={class:"flex items-center justify-between"},H={class:"font-semibold text-xl text-gray-800 leading-tight"},J={class:"flex items-center space-x-2"},R={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4"},X={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},Y={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4"},Z={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},ee={class:"py-8"},te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},se={class:"bg-white shadow overflow-hidden sm:rounded-lg"},oe={class:"px-4 py-5 sm:p-6"},re={class:"space-y-6"},ie={class:"grid grid-cols-1 gap-4"},ne={key:0},ae=["value"],le={key:1},de={class:"mt-1 p-2 bg-gray-50 rounded-md border border-gray-200"},ue={class:"space-y-4"},pe={class:"flex items-center"},me={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"mt-1 relative rounded-md shadow-sm"},ge={class:"flex items-center"},fe={class:"flex justify-between pt-6 border-t border-gray-200"},xe={class:"flex space-x-3"},ve={key:0,class:"mt-2 text-red-600"},be={key:1,class:"mt-2 text-red-600"},ye={class:"flex justify-end space-x-3"},_e={__name:"Edit",props:{organization:Object,group:Object,parentGroups:Array},setup(n){const a=n,{flash:b}=P().props,s=U({name:a.group.name,description:a.group.description,price:a.group.price,is_active:a.group.is_active,parent_id:a.group.parent_id}),_=h(null),f=h(!!a.group.price),v=h(!1),G=()=>{s.put(route("examiner.quiz-groups.update",{organization:a.organization.id,quiz_group:a.group.id}),{preserveScroll:!0,onSuccess:()=>{}})},S=()=>{V.delete(route("examiner.quiz-groups.destroy",{organization:a.organization.id,quiz_group:a.group.id}),{preserveScroll:!0,onSuccess:()=>{v.value=!1,V.visit(route("examiner.quiz-groups.index",a.organization.id))}})},j=()=>{if(s.price){let m=s.price.toString().replace(/[^0-9.]/g,"");s.price=parseFloat(m).toFixed(2)}},D=()=>{f.value=!f.value,f.value&&_.value?_.value.focus():s.price=null},w=B(()=>a.parentGroups.filter(m=>m.id!==a.group.id&&(!a.group.parent_id||m.id!==a.group.parent_id)));return(m,e)=>{const z=N("Link");return d(),T(I,{title:`Edit ${n.group.name}`},{header:l(()=>[t("div",K,[t("h2",H," Edit Quiz Group: "+p(n.group.name),1),t("div",J,[o(z,{href:m.route("examiner.quiz-groups.show",{organization:n.organization.id,quiz_group:n.group.id}),class:"text-sm text-gray-600 hover:text-gray-900"},{default:l(()=>e[9]||(e[9]=[c(" Back to Group ")])),_:1,__:[9]},8,["href"])])])]),default:l(()=>[r(b).success?(d(),u("div",R,[t("div",X,p(r(b).success),1)])):x("",!0),r(b).error?(d(),u("div",Y,[t("div",Z,p(r(b).error),1)])):x("",!0),t("div",ee,[t("div",te,[t("div",se,[t("div",oe,[t("form",{onSubmit:F(G,["prevent"])},[t("div",re,[t("div",null,[e[12]||(e[12]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Basic Information ",-1)),t("div",ie,[t("div",null,[o(g,{for:"name",value:"Group Name *"}),o(q,{id:"name",modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=i=>r(s).name=i),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),o(y,{class:"mt-2",message:r(s).errors.name},null,8,["message"])]),t("div",null,[o(g,{for:"description",value:"Description"}),o(W,{id:"description",modelValue:r(s).description,"onUpdate:modelValue":e[1]||(e[1]=i=>r(s).description=i),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),o(y,{class:"mt-2",message:r(s).errors.description},null,8,["message"])]),w.value.length>0?(d(),u("div",ne,[o(g,{for:"parent_id",value:"Parent Group"}),o(O,{id:"parent_id",modelValue:r(s).parent_id,"onUpdate:modelValue":e[2]||(e[2]=i=>r(s).parent_id=i),class:"mt-1 block w-full"},{default:l(()=>[e[10]||(e[10]=t("option",{value:null},"No parent group",-1)),(d(!0),u(A,null,E(w.value,i=>(d(),u("option",{key:i.id,value:i.id},p(i.name),9,ae))),128))]),_:1,__:[10]},8,["modelValue"]),o(y,{class:"mt-2",message:r(s).errors.parent_id},null,8,["message"])])):n.group.parent?(d(),u("div",le,[o(g,{value:"Current Parent Group"}),t("div",de,p(n.group.parent.name),1),e[11]||(e[11]=t("p",{class:"mt-1 text-sm text-gray-500"}," No other parent groups available ",-1))])):x("",!0)])]),t("div",null,[e[16]||(e[16]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Pricing Options ",-1)),t("div",ue,[t("div",pe,[o($,{id:"has_price",checked:f.value,"onUpdate:checked":e[3]||(e[3]=i=>f.value=i),onChange:D},null,8,["checked"]),o(g,{for:"has_price",value:"This is a paid group",class:"ml-2"})]),f.value?(d(),u("div",me,[t("div",null,[o(g,{for:"price",value:"Price (USD)"}),t("div",ce,[e[13]||(e[13]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"$")],-1)),o(q,{ref_key:"priceInput",ref:_,id:"price",modelValue:r(s).price,"onUpdate:modelValue":e[4]||(e[4]=i=>r(s).price=i),type:"number",min:"0",step:"0.01",class:"block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md",onBlur:j},null,8,["modelValue"]),e[14]||(e[14]=t("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"USD")],-1))]),e[15]||(e[15]=t("p",{class:"mt-1 text-sm text-gray-500"}," Set a price if this group contains premium content ",-1)),o(y,{class:"mt-2",message:r(s).errors.price},null,8,["message"])])])):x("",!0)])]),t("div",null,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Status ",-1)),t("div",ge,[o($,{id:"is_active",checked:r(s).is_active,"onUpdate:checked":e[5]||(e[5]=i=>r(s).is_active=i)},null,8,["checked"]),o(g,{for:"is_active",value:"Active (visible to users)",class:"ml-2"})]),e[18]||(e[18]=t("p",{class:"mt-1 text-sm text-gray-500"}," Inactive groups won't be visible to students ",-1))]),t("div",fe,[o(C,{type:"button",onClick:e[6]||(e[6]=i=>v.value=!0),class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},{default:l(()=>e[19]||(e[19]=[c(" Delete Group ")])),_:1,__:[19]}),t("div",xe,[o(z,{href:m.route("examiner.quiz-groups.show",{organization:n.organization.id,quiz_group:n.group.id}),class:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:l(()=>e[20]||(e[20]=[c(" Cancel ")])),_:1,__:[20]},8,["href"]),o(L,{type:"submit",class:k(["inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",{"opacity-25":r(s).processing}]),disabled:r(s).processing},{default:l(()=>e[21]||(e[21]=[c(" Save Changes ")])),_:1,__:[21]},8,["class","disabled"])])])])],32)])])])]),o(M,{show:v.value,onClose:e[8]||(e[8]=i=>v.value=!1)},{title:l(()=>e[22]||(e[22]=[c(" Delete Quiz Group ")])),content:l(()=>[e[23]||(e[23]=t("p",{class:"text-gray-700"},[c(" Are you sure you want to delete this quiz group? "),t("span",{class:"font-semibold"},"This action cannot be undone.")],-1)),n.group.quizzes_count>0?(d(),u("p",ve," Warning: This group contains "+p(n.group.quizzes_count)+" quiz"+p(n.group.quizzes_count!==1?"zes":"")+". They will be removed from this group but not deleted. ",1)):x("",!0),n.group.children_count>0?(d(),u("p",be," Warning: This group has "+p(n.group.children_count)+" subgroup"+p(n.group.children_count!==1?"s":"")+". They will become root groups if you proceed. ",1)):x("",!0)]),footer:l(()=>[t("div",ye,[t("button",{type:"button",onClick:e[7]||(e[7]=i=>v.value=!1),class:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),o(C,{type:"button",onClick:S,class:k(["inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",{"opacity-25":r(s).processing}]),disabled:r(s).processing},{default:l(()=>e[24]||(e[24]=[c(" Delete Group ")])),_:1,__:[24]},8,["class","disabled"])])]),_:1},8,["show"])]),_:1},8,["title"])}}},Ue=Q(_e,[["__scopeId","data-v-f2222154"]]);export{Ue as default};
