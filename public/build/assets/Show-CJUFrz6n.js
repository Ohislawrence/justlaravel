import{i as k,K as R,C as U,y as W,f as G,c as K,o as i,w as x,d as o,h as r,a as e,j as a,t as l,b as _,S as w,k as m,F as h,l as v,n as C,e as E,s as Y,A as J,W as S}from"./app-Do1sSIaC.js";import{A as X}from"./AppLayout-DUw_ZWTf.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */const ee={class:"flex justify-between items-center"},se={class:"font-semibold text-xl text-gray-800 leading-tight"},te={class:"space-x-2"},ie={key:0,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},oe={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},ne={key:1,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},le={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},de={key:2,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},re={class:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded"},ae={key:3,class:"mb-4 mx-auto max-w-7xl sm:px-6 lg:px-8"},ue={class:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded"},ce={class:"py-12"},me={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},be={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ge={class:"md:col-span-2 space-y-6"},xe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},pe={class:"p-6 bg-white border-b border-gray-200"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},he={class:"font-medium"},ve={class:"font-medium"},fe={key:0,class:"mb-4"},_e=["innerHTML"],we={key:1,class:"mb-4"},ze=["innerHTML"],ke={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},qe={class:"font-medium"},Le={class:"font-medium"},Se={class:"font-medium"},Te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Me={class:"p-6 bg-white border-b border-gray-200"},Ce={class:"flex justify-between items-center mb-4"},Pe={key:0,class:"space-y-4"},Ae={class:"flex justify-between items-start"},He={class:"flex-1"},Ne={class:"font-medium mb-2"},Qe=["innerHTML"],je={class:"flex flex-wrap gap-2 text-sm text-gray-500 mb-2"},De={class:"bg-gray-100 px-2 py-1 rounded"},Ee={class:"bg-blue-100 px-2 py-1 rounded"},Be={class:"flex space-x-2 ml-4"},Fe=["onClick"],Oe={class:"mt-3 text-sm"},Ve={key:0,class:"bg-gray-50 p-3 rounded"},$e={class:"space-y-1"},Ie={class:"w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center mr-2 text-xs"},Re=["innerHTML"],Ue={key:0,class:"ml-2 text-green-600 font-medium"},We={key:1,class:"bg-gray-50 p-3 rounded"},Ge={class:"font-medium"},Ke={class:"text-green-600"},Ye={key:2,class:"bg-gray-50 p-3 rounded"},Je={class:"list-disc pl-5 space-y-1"},Xe={key:3,class:"bg-gray-50 p-3 rounded"},Ze=["innerHTML"],es={key:4,class:"bg-gray-50 p-3 rounded"},ss={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},ts=["innerHTML"],is=["innerHTML"],os={key:5,class:"bg-gray-50 p-3 rounded"},ns={class:"list-decimal pl-5 space-y-1"},ls=["innerHTML"],ds={key:6,class:"bg-gray-50 p-3 rounded"},rs={key:0,class:"text-sm text-gray-500 mt-1"},as={key:1,class:"text-center py-8 text-gray-500"},us={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},cs={class:"p-6 bg-white border-b border-gray-200"},ms={class:"flex justify-between items-center mb-4"},bs={key:0,class:"space-y-4 mb-6"},gs={class:"flex justify-between items-start"},xs={class:"flex-1"},ps={class:"font-medium mb-1"},ys={class:"text-sm text-gray-500 mb-2"},hs={class:"flex flex-wrap gap-2 text-sm text-gray-500"},vs={class:"bg-gray-100 px-2 py-1 rounded"},fs={class:"bg-blue-100 px-2 py-1 rounded"},_s=["onClick"],ws={key:1,class:"text-center py-4 text-gray-500"},zs={key:2,class:"mt-6"},ks={class:"space-y-3"},qs=["value"],Ls={key:0},Ss=["max"],Ts=["disabled"],Ms={class:"space-y-6"},Cs={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ps={class:"p-6 bg-white border-b border-gray-200"},As={class:"space-y-4"},Hs={class:"font-medium"},Ns={class:"font-medium"},Qs={key:0},js={class:"font-medium"},Ds={key:1},Es={class:"font-medium"},Bs={class:"font-medium"},Fs={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Os={class:"p-6 bg-white border-b border-gray-200"},Vs={class:"space-y-4"},$s={class:"font-medium"},Is={class:"font-medium"},Rs={class:"font-medium"},Us={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ws={class:"p-6 bg-white border-b border-gray-200"},Gs={key:0},Ks={class:"flex items-center space-x-2 mb-2"},Ys=["value"],Js=["disabled"],Xs={key:0,class:"text-green-600 text-sm flex items-center"},Zs={key:1,class:"text-center py-4"},et={__name:"Show",props:{quiz:Object,stats:Object,availablePools:Array,quizPools:Object},setup(n){const c=n,p=k(""),z=k(!1),P=k(null),y=k(""),q=k(1),{flash:b}=R().props,A=()=>{S.post(route("examiner.quizzes.toggle-publish",c.quiz.id),{},{preserveScroll:!0,onSuccess:()=>{c.quiz.is_published&&T()}})},T=async()=>{try{const d=await axios.get(route("examiner.quizzes.share-link",c.quiz.id));p.value=d.data.link}catch(d){console.error("Error generating share link:",d),p.value="Error: Could not generate link"}},B=async()=>{if(p.value)try{await navigator.clipboard.writeText(p.value),z.value=!0,setTimeout(()=>z.value=!1,2e3)}catch{P.value.select(),document.execCommand("copy"),z.value=!0,setTimeout(()=>z.value=!1,2e3)}};U(()=>{c.quiz.is_published&&T()}),W(()=>c.quiz.is_published,d=>{d?T():p.value=""});const F=d=>({multiple_choice:"Multiple Choice",true_false:"True/False",short_answer:"Short Answer",essay:"Essay",fill_in_blank:"Fill in Blank",matching:"Matching",ordering:"Ordering"})[d]||d,O=(d,s)=>{if(!d||!s)return d;const f=[...s];return d.replace(/\[blank\]/g,()=>`[${f.shift()||"answer"}]`)},V=d=>{confirm(`Are you sure you want to delete this question?
"${d.question}"`)&&S.delete(route("examiner.quizzes.questions.destroy",{quiz:c.quiz.id,question:d.id}))},$=()=>{S.post(route("examiner.quizzes.attach-pool",{quiz:c.quiz.id,pool:y.value}),{questions_to_show:q.value},{preserveScroll:!0,onSuccess:()=>{y.value="",q.value=1}})},I=d=>{S.delete(route("examiner.quizzes.detach-pool",{quiz:c.quiz.id,pool:d}),{preserveScroll:!0})},M=G(()=>c.availablePools.filter(d=>{var s;return!((s=c.quizPools)!=null&&s.some(f=>f.id===d.id))}));return(d,s)=>(i(),K(X,{title:n.quiz.title},{header:x(()=>[e("div",ee,[e("h2",se,l(n.quiz.title),1),e("div",te,[e("button",{onClick:A,class:C(["btn btn-sm",{"btn-success":!n.quiz.is_published,"btn-outline":n.quiz.is_published}])},l(n.quiz.is_published?"Unpublish":"Publish"),3),_(a(w),{href:d.route("examiner.quizzes.edit",n.quiz.id),class:"btn btn-sm btn-primary"},{default:x(()=>s[2]||(s[2]=[m(" Edit ")])),_:1,__:[2]},8,["href"])])])]),default:x(()=>{var f,H,N,Q,j,D;return[a(b).success?(i(),o("div",ie,[e("div",oe,l(a(b).success),1)])):r("",!0),a(b).error?(i(),o("div",ne,[e("div",le,l(a(b).error),1)])):r("",!0),a(b).info?(i(),o("div",de,[e("div",re,l(a(b).info),1)])):r("",!0),a(b).warning?(i(),o("div",ae,[e("div",ue,l(a(b).warning),1)])):r("",!0),e("div",ce,[e("div",me,[e("div",be,[e("div",ge,[e("div",xe,[e("div",pe,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium mb-4"},"Quiz Details",-1)),e("div",ye,[e("div",null,[s[3]||(s[3]=e("p",{class:"text-sm text-gray-500"},"Type",-1)),e("p",he,l(n.quiz.quiz_type),1)]),e("div",null,[s[4]||(s[4]=e("p",{class:"text-sm text-gray-500"},"Industry",-1)),e("p",ve,l(n.quiz.industry||"N/A"),1)])]),n.quiz.description?(i(),o("div",fe,[s[5]||(s[5]=e("p",{class:"text-sm text-gray-500 mb-2"},"Description",-1)),e("div",{class:"prose prose-sm max-w-none",innerHTML:n.quiz.description},null,8,_e)])):r("",!0),n.quiz.instructions?(i(),o("div",we,[s[6]||(s[6]=e("p",{class:"text-sm text-gray-500 mb-2"},"Instructions",-1)),e("div",{class:"prose prose-sm max-w-none bg-blue-50 p-3 rounded-md border-l-4 border-blue-400",innerHTML:n.quiz.instructions},null,8,ze)])):r("",!0),e("div",ke,[e("div",null,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-500"},"Time Limit",-1)),e("p",qe,l(n.quiz.time_limit?`${n.quiz.time_limit} minutes`:"No limit"),1)]),e("div",null,[s[8]||(s[8]=e("p",{class:"text-sm text-gray-500"},"Passing Score",-1)),e("p",Le,l(n.quiz.passing_score?`${n.quiz.passing_score}%`:"Not set"),1)]),e("div",null,[s[9]||(s[9]=e("p",{class:"text-sm text-gray-500"},"Questions",-1)),e("p",Se,l(((f=n.quiz.questions)==null?void 0:f.length)||0),1)])])])]),e("div",Te,[e("div",Me,[e("div",Ce,[s[12]||(s[12]=e("h3",{class:"text-lg font-medium"},"Questions",-1)),_(a(w),{href:d.route("examiner.quizzes.questions.create",n.quiz.id),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring focus:ring-blue-300 disabled:opacity-25 transition"},{default:x(()=>s[11]||(s[11]=[m(" Add Question ")])),_:1,__:[11]},8,["href"])]),n.quiz.questions&&n.quiz.questions.length>0?(i(),o("div",Pe,[(i(!0),o(h,null,v(n.quiz.questions,(t,L)=>(i(),o("div",{key:t.id,class:"border rounded-lg p-4 hover:bg-gray-50"},[e("div",Ae,[e("div",He,[e("h4",Ne,[m(l(L+1)+". ",1),e("span",{innerHTML:t.question},null,8,Qe)]),e("div",je,[e("span",De,l(F(t.type)),1),e("span",Ee,l(t.points)+" points ",1),e("span",{class:C(["px-2 py-1 rounded",{"bg-red-100 text-red-700":t.is_required,"bg-green-100 text-green-700":!t.is_required}])},l(t.is_required?"Required":"Optional"),3)])]),e("div",Be,[_(a(w),{href:d.route("examiner.quizzes.questions.edit",{quiz:n.quiz.id,question:t.id}),class:"text-blue-600 hover:text-blue-800 text-sm"},{default:x(()=>s[13]||(s[13]=[m(" Edit ")])),_:2,__:[13]},1032,["href"]),e("button",{onClick:u=>V(t),class:"text-red-600 hover:text-red-800 text-sm"}," Delete ",8,Fe)])]),e("div",Oe,[t.type==="multiple_choice"?(i(),o("div",Ve,[s[14]||(s[14]=e("p",{class:"font-medium mb-2"},"Options:",-1)),e("ul",$e,[(i(!0),o(h,null,v(t.options,(u,g)=>(i(),o("li",{key:g,class:"flex items-center"},[e("span",Ie,l(String.fromCharCode(65+g)),1),e("span",{innerHTML:u},null,8,Re),t.correct_answers&&t.correct_answers.includes(u)?(i(),o("span",Ue," ✓ ")):r("",!0)]))),128))])])):t.type==="true_false"?(i(),o("div",We,[e("p",Ge,[s[15]||(s[15]=m("Correct Answer: ")),e("span",Ke,l(t.correct_answers&&t.correct_answers[0]===!0?"True":"False"),1)])])):t.type==="short_answer"?(i(),o("div",Ye,[s[16]||(s[16]=e("p",{class:"font-medium mb-2"},"Accepted Answers:",-1)),e("ul",Je,[(i(!0),o(h,null,v(t.correct_answers,(u,g)=>(i(),o("li",{key:g,class:"text-green-600"},l(u),1))),128))])])):t.type==="fill_in_blank"?(i(),o("div",Xe,[s[17]||(s[17]=e("p",{class:"font-medium mb-2"},"With Answers:",-1)),e("div",{class:"whitespace-pre-line",innerHTML:O(t.question,t.correct_answers)},null,8,Ze)])):t.type==="matching"?(i(),o("div",es,[s[19]||(s[19]=e("p",{class:"font-medium mb-2"},"Correct Matches:",-1)),e("div",ss,[(i(!0),o(h,null,v(t.options,(u,g)=>(i(),o("div",{key:g,class:"flex items-center"},[e("span",{class:"font-medium",innerHTML:u.left},null,8,ts),s[18]||(s[18]=e("span",{class:"mx-2"},"→",-1)),e("span",{class:"text-green-600 font-medium",innerHTML:u.right},null,8,is)]))),128))])])):t.type==="ordering"?(i(),o("div",os,[s[20]||(s[20]=e("p",{class:"font-medium mb-2"},"Correct Order:",-1)),e("ol",ns,[(i(!0),o(h,null,v(t.correct_answers,(u,g)=>(i(),o("li",{key:g,class:"text-green-600"},[e("span",{innerHTML:u},null,8,ls)]))),128))])])):t.type==="essay"?(i(),o("div",ds,[s[21]||(s[21]=e("p",{class:"font-medium text-gray-600"},"Essay Question - Manual Grading Required",-1)),t.max_words?(i(),o("p",rs," Max words: "+l(t.max_words),1)):r("",!0)])):r("",!0)])]))),128))])):(i(),o("div",as,[s[23]||(s[23]=e("p",{class:"mb-4"},"No questions added yet.",-1)),_(a(w),{href:d.route("examiner.quizzes.questions.create",n.quiz.id),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition"},{default:x(()=>s[22]||(s[22]=[m(" Add First Question ")])),_:1,__:[22]},8,["href"])]))])]),e("div",us,[e("div",cs,[e("div",ms,[s[25]||(s[25]=e("h3",{class:"text-lg font-medium"},"Question Pools",-1)),_(a(w),{href:d.route("examiner.question-pools.create"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:x(()=>s[24]||(s[24]=[m(" Create New Pool ")])),_:1,__:[24]},8,["href"])]),(H=n.quizPools)!=null&&H.length?(i(),o("div",bs,[(i(!0),o(h,null,v(n.quizPools,t=>{var L;return i(),o("div",{key:t.id,class:"border rounded-lg p-4 hover:bg-gray-50"},[e("div",gs,[e("div",xs,[e("h4",ps,l(t.name),1),e("p",ys,l(t.description||"No description"),1),e("div",hs,[e("span",vs,l(t.questions_count)+" questions ",1),e("span",fs," Show "+l(((L=t.pivot)==null?void 0:L.questions_to_show)||0)+" questions ",1)])]),e("button",{onClick:u=>I(t.id),class:"text-red-600 hover:text-red-800 text-sm"}," Remove ",8,_s)]),_(a(w),{href:d.route("examiner.question-pools.manage-questions",t.id),class:"mt-3 inline-block text-sm text-blue-600 hover:text-blue-800"},{default:x(()=>s[26]||(s[26]=[m(" Manage Questions ")])),_:2,__:[26]},1032,["href"])])}),128))])):(i(),o("div",ws,s[27]||(s[27]=[e("p",null,"No question pools added yet.",-1)]))),M.value.length>0?(i(),o("div",zs,[s[30]||(s[30]=e("h4",{class:"font-medium mb-3"},"Add Existing Pool",-1)),e("div",ks,[E(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>y.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[28]||(s[28]=e("option",{value:"",disabled:""},"Select a pool to add",-1)),(i(!0),o(h,null,v(M.value,t=>(i(),o("option",{key:t.id,value:t.id},l(t.name)+" ("+l(t.questions_count)+" questions) ",9,qs))),128))],512),[[Y,y.value]]),y.value?(i(),o("div",Ls,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Questions to show from this pool ",-1)),E(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>q.value=t),type:"number",min:"1",max:((N=M.value.find(t=>t.id===y.value))==null?void 0:N.questions_count)||1,class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,Ss),[[J,q.value]])])):r("",!0),e("button",{onClick:$,disabled:!y.value,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"}," Add Pool ",8,Ts)])])):r("",!0)])])]),e("div",Ms,[e("div",Cs,[e("div",Ps,[s[36]||(s[36]=e("h3",{class:"text-lg font-medium mb-4"},"Status",-1)),e("div",As,[e("div",null,[s[31]||(s[31]=e("p",{class:"text-sm text-gray-500"},"Published",-1)),e("p",Hs,[e("span",{class:C({"text-green-600":n.quiz.is_published,"text-red-600":!n.quiz.is_published})},l(n.quiz.is_published?"Yes":"No"),3)])]),e("div",null,[s[32]||(s[32]=e("p",{class:"text-sm text-gray-500"},"Created",-1)),e("p",Ns,l(new Date(n.quiz.created_at).toLocaleDateString()),1)]),n.quiz.starts_at?(i(),o("div",Qs,[s[33]||(s[33]=e("p",{class:"text-sm text-gray-500"},"Starts",-1)),e("p",js,l(new Date(n.quiz.starts_at).toLocaleString()),1)])):r("",!0),n.quiz.ends_at?(i(),o("div",Ds,[s[34]||(s[34]=e("p",{class:"text-sm text-gray-500"},"Ends",-1)),e("p",Es,l(new Date(n.quiz.ends_at).toLocaleString()),1)])):r("",!0),e("div",null,[s[35]||(s[35]=e("p",{class:"text-sm text-gray-500"},"Visibility",-1)),e("p",Bs,l(n.quiz.is_public?"Public":"Private"),1)])])])]),e("div",Fs,[e("div",Os,[s[40]||(s[40]=e("h3",{class:"text-lg font-medium mb-4"},"Statistics",-1)),e("div",Vs,[e("div",null,[s[37]||(s[37]=e("p",{class:"text-sm text-gray-500"},"Total Attempts",-1)),e("p",$s,l(((Q=n.stats)==null?void 0:Q.attempts_count)||0),1)]),e("div",null,[s[38]||(s[38]=e("p",{class:"text-sm text-gray-500"},"Average Score",-1)),e("p",Is,l(Math.round(((j=n.stats)==null?void 0:j.average_score)||0))+"%",1)]),e("div",null,[s[39]||(s[39]=e("p",{class:"text-sm text-gray-500"},"Completion Rate",-1)),e("p",Rs,l(Math.round(((D=n.stats)==null?void 0:D.completion_rate)||0))+"%",1)])])])]),e("div",Us,[e("div",Ws,[s[44]||(s[44]=e("h3",{class:"text-lg font-medium mb-4"},"Share Quiz",-1)),n.quiz.is_published?(i(),o("div",Gs,[e("div",Ks,[e("input",{ref_key:"shareLinkInput",ref:P,type:"text",value:p.value,readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Generating link..."},null,8,Ys),e("button",{onClick:B,disabled:!p.value,class:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"}," Copy ",8,Js)]),z.value?(i(),o("p",Xs,s[41]||(s[41]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),m(" Link copied to clipboard! ")]))):r("",!0),s[42]||(s[42]=e("div",{class:"mt-4 p-3 bg-blue-50 rounded-md"},[e("p",{class:"text-sm text-blue-700"}," Share this link with students to allow them to take the quiz. ")],-1))])):(i(),o("div",Zs,[s[43]||(s[43]=e("p",{class:"text-sm text-gray-600 mb-3"},"Publish the quiz to generate a shareable link.",-1)),e("button",{onClick:A,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium"}," Publish Quiz ")]))])])])])])])]}),_:1},8,["title"]))}},nt=Z(et,[["__scopeId","data-v-d7af8089"]]);export{nt as default};
